(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{678:function(e,t,a){Promise.resolve().then(a.bind(a,8908))},8908:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return er}});var r=a(7437),n=a(2265),i=a(6463),c=a(842),s=a(1765);function o(e){return 0===e.prixFermeTotal?e.prixUnitaireFerme:e.prixFermeTotal/4}function l(e){return new Intl.NumberFormat("fr-CA",{style:"currency",currency:"CAD",minimumFractionDigits:2}).format(e)}let d={c228:.05,c229:.05,c230:.15,c231:.15,default:.15};class m{static syncPriceChange(e,t,a,r,n){let i=d[r]||d.default,c=t*(1+i);n.updateRegisters&&n.updateRegisters(r,a,e,t,c),n.updateForms&&n.updateForms(r,t,c);let s={projectId:r,itemType:a,itemId:e,montantHT:t,montantTTC:c,taxRate:i,timestamp:new Date().toISOString()};n.onSync&&n.onSync(s),console.log("\uD83D\uDD04 Prix synchronis\xe9: ".concat(a," ").concat(e," dans ").concat(r.toUpperCase()),s)}}let p={19:"c228",34:"c228",65:"c228",69:"c228",20:"c229",66:"c229",70:"c229",21:"c230",67:"c230",71:"c230",22:"c231",68:"c231",72:"c231"};function u(e){return p["string"==typeof e?parseInt(e):e]||function(e){if("".includes("c228")||"".includes("c-228")||"".includes("nlt1"));else if("".includes("c229")||"".includes("c-229")||"".includes("nlt2"))return"c229";else if("".includes("c230")||"".includes("c-230")||"".includes("nlt3"))return"c230";else if("".includes("c231")||"".includes("c-231")||"".includes("nlt4"))return"c231";return"c228"}(0)}let x=[{id:1,numeroEtape:"1",description:"PDR",pourcentage:2,prixUnitaireFerme:1759454.42,prixFermeTotal:1759454.42,facture:!1},{id:2,numeroEtape:"2",description:"CDR",pourcentage:4,prixUnitaireFerme:3518908.84,prixFermeTotal:3518908.84,facture:!1},{id:3,numeroEtape:"3",description:"Financial Security",pourcentage:0,prixUnitaireFerme:526625,prixFermeTotal:526625,facture:!1},{id:4,numeroEtape:"4a",description:"PO one non-recurrent (steel)",pourcentage:12,prixUnitaireFerme:36125.13,prixFermeTotal:144500.5,facture:!1},{id:5,numeroEtape:"4.1b",description:"Balance delivery to subcontractor (steel)",pourcentage:0,prixUnitaireFerme:2603056.5,prixFermeTotal:2603056.5,facture:!1},{id:6,numeroEtape:"4.2b",description:"Balance delivery to subcontractor (steel)",pourcentage:0,prixUnitaireFerme:2603056.5,prixFermeTotal:2603056.5,facture:!1},{id:7,numeroEtape:"4.3b",description:"Balance delivery to subcontractor (steel)",pourcentage:0,prixUnitaireFerme:2603056.5,prixFermeTotal:2603056.5,facture:!1},{id:8,numeroEtape:"4.4b",description:"Balance delivery to subcontractor (steel)",pourcentage:0,prixUnitaireFerme:2603056.5,prixFermeTotal:2603056.5,facture:!1},{id:9,numeroEtape:"5a",description:"PO one non-recurrent (propulsion)",pourcentage:8,prixUnitaireFerme:506009.87,prixFermeTotal:2024039.48,facture:!1},{id:10,numeroEtape:"5.1b",description:"Propulsion Delivered",pourcentage:0,prixUnitaireFerme:1253444.55,prixFermeTotal:1253444.55,facture:!1},{id:11,numeroEtape:"5.2b",description:"Propulsion Delivered",pourcentage:0,prixUnitaireFerme:1253444.55,prixFermeTotal:1253444.55,facture:!1},{id:12,numeroEtape:"5.3b",description:"Propulsion Delivered",pourcentage:0,prixUnitaireFerme:1253444.55,prixFermeTotal:1253444.55,facture:!1},{id:13,numeroEtape:"5.4b",description:"Propulsion Delivered",pourcentage:0,prixUnitaireFerme:1253444.55,prixFermeTotal:1253444.55,facture:!1},{id:14,numeroEtape:"6a",description:"PO one non-recurrent (electrical)",pourcentage:6,prixUnitaireFerme:442084.25,prixFermeTotal:1768337,facture:!1},{id:15,numeroEtape:"6.1b",description:"Electrical Delivered",pourcentage:0,prixUnitaireFerme:877506.57,prixFermeTotal:877506.57,facture:!1},{id:16,numeroEtape:"6.2b",description:"Electrical Delivered",pourcentage:0,prixUnitaireFerme:877506.57,prixFermeTotal:877506.57,facture:!1},{id:17,numeroEtape:"6.3b",description:"Electrical Delivered",pourcentage:0,prixUnitaireFerme:877506.57,prixFermeTotal:877506.57,facture:!1},{id:18,numeroEtape:"6.4b",description:"Electrical Delivered",pourcentage:0,prixUnitaireFerme:877506.57,prixFermeTotal:877506.57,facture:!1},{id:19,numeroEtape:"7.1",description:"Hull, deck, wheelhouse enclosed C228 NLT1",pourcentage:10,prixUnitaireFerme:2199318.03,prixFermeTotal:2199318.03,facture:!1},{id:20,numeroEtape:"7.2",description:"Hull, deck, wheelhouse enclosed C229 NLT2",pourcentage:0,prixUnitaireFerme:2199318.03,prixFermeTotal:2199318.03,facture:!1},{id:21,numeroEtape:"7.3",description:"Hull, deck, wheelhouse enclosed C230 NLT3",pourcentage:10,prixUnitaireFerme:8797272.12,prixFermeTotal:8797272.12,facture:!1},{id:22,numeroEtape:"7.4",description:"Hull, deck, wheelhouse enclosed C231 NLT4",pourcentage:0,prixUnitaireFerme:8797272.12,prixFermeTotal:8797272.12,facture:!1},{id:23,numeroEtape:"7.3a",description:"Deckhouse complete and accepted by Canada",pourcentage:0,prixUnitaireFerme:329897.71,prixFermeTotal:329897.71,facture:!1},{id:24,numeroEtape:"7.3b",description:"Hull enclosed and accepted by Canada",pourcentage:0,prixUnitaireFerme:989693.11,prixFermeTotal:989693.11,facture:!1},{id:25,numeroEtape:"7.3c",description:"Deckhouse and hull assembly complete and accepted by Canada",pourcentage:0,prixUnitaireFerme:879727.21,prixFermeTotal:879727.21,facture:!1},{id:26,numeroEtape:"7.4a",description:"Deckhouse complete and accepted by Canada",pourcentage:0,prixUnitaireFerme:329897.71,prixFermeTotal:329897.71,facture:!1},{id:27,numeroEtape:"7.4b",description:"Hull enclosed and accepted by Canada",pourcentage:0,prixUnitaireFerme:989693.11,prixFermeTotal:989693.11,facture:!1},{id:28,numeroEtape:"7.4c",description:"Deckhouse and hull assembly complete and accepted by Canada",pourcentage:0,prixUnitaireFerme:879727.21,prixFermeTotal:879727.21,facture:!1},{id:29,numeroEtape:"8.1",description:"Prime movers installed and accepted by Canada",pourcentage:10,prixUnitaireFerme:8797272.1,prixFermeTotal:8797272.1,facture:!1},{id:30,numeroEtape:"8.1a",description:"Prime Movers Installed",pourcentage:0,prixUnitaireFerme:3518908.84,prixFermeTotal:3518908.84,facture:!1},{id:31,numeroEtape:"8.2a",description:"Prime Movers Installed",pourcentage:0,prixUnitaireFerme:3518908.84,prixFermeTotal:3518908.84,facture:!1},{id:32,numeroEtape:"8.3a",description:"Prime Movers Installed",pourcentage:0,prixUnitaireFerme:3518908.84,prixFermeTotal:3518908.84,facture:!1},{id:33,numeroEtape:"8.4a",description:"Prime Movers Installed",pourcentage:0,prixUnitaireFerme:3518908.84,prixFermeTotal:3518908.84,facture:!1},{id:34,numeroEtape:"8.1b",description:"Prime mover to Propulsor C228 NLT1",pourcentage:10,prixUnitaireFerme:1319590.81,prixFermeTotal:1319590.81,facture:!1},{id:35,numeroEtape:"8.2b1",description:"All shaft components installed and accepted by Canada",pourcentage:0,prixUnitaireFerme:527836.33,prixFermeTotal:527836.33,facture:!1},{id:36,numeroEtape:"8.3b1",description:"All shaft components installed and accepted by Canada",pourcentage:0,prixUnitaireFerme:527836.33,prixFermeTotal:527836.33,facture:!1},{id:37,numeroEtape:"8.4b1",description:"All shaft components installed and accepted by Canada",pourcentage:0,prixUnitaireFerme:527836.33,prixFermeTotal:527836.33,facture:!1},{id:38,numeroEtape:"8.2b2",description:"Final alignment complete and accepted by Canada",pourcentage:0,prixUnitaireFerme:791754.49,prixFermeTotal:791754.49,facture:!1},{id:39,numeroEtape:"8.3b2",description:"Final alignment complete and accepted by Canada",pourcentage:0,prixUnitaireFerme:791754.49,prixFermeTotal:791754.49,facture:!1},{id:40,numeroEtape:"8.4b2",description:"Final alignment complete and accepted by Canada",pourcentage:0,prixUnitaireFerme:791754.49,prixFermeTotal:791754.49,facture:!1},{id:41,numeroEtape:"9.1",description:"Mise \xe0 la mer du navire, tests et essais termin\xe9s et accept\xe9s par le Canada",pourcentage:15,prixUnitaireFerme:13195908.15,prixFermeTotal:13195908.15,facture:!1},{id:42,numeroEtape:"9.2",description:"Mise \xe0 la mer du navire, tests et essais termin\xe9s et accept\xe9s par le Canada",pourcentage:0,prixUnitaireFerme:13195908.15,prixFermeTotal:13195908.15,facture:!1},{id:43,numeroEtape:"9.3",description:"Mise \xe0 la mer du navire, tests et essais termin\xe9s et accept\xe9s par le Canada",pourcentage:0,prixUnitaireFerme:13195908.15,prixFermeTotal:13195908.15,facture:!1},{id:44,numeroEtape:"9.4",description:"Mise \xe0 la mer du navire, tests et essais termin\xe9s et accept\xe9s par le Canada",pourcentage:0,prixUnitaireFerme:13195908.15,prixFermeTotal:13195908.15,facture:!1},{id:45,numeroEtape:"9.1a",description:"Test and Trials Program Complete and accepted by Canada (applicable for 4)",pourcentage:0,prixUnitaireFerme:659795.4,prixFermeTotal:659795.4,facture:!1},{id:46,numeroEtape:"9.2a",description:"Test and Trials Program Complete and accepted by Canada (applicable for 4)",pourcentage:0,prixUnitaireFerme:659795.4,prixFermeTotal:659795.4,facture:!1},{id:47,numeroEtape:"9.3a",description:"Test and Trials Program Complete and accepted by Canada (applicable for 4)",pourcentage:0,prixUnitaireFerme:659795.4,prixFermeTotal:659795.4,facture:!1},{id:48,numeroEtape:"9.4a",description:"Test and Trials Program Complete and accepted by Canada (applicable for 4)",pourcentage:0,prixUnitaireFerme:659795.4,prixFermeTotal:659795.4,facture:!1},{id:49,numeroEtape:"9.1b",description:"Pre-Requisites Complete and accepted by Canada (Commissioning, Flushing, ITP)",pourcentage:0,prixUnitaireFerme:1319590.8,prixFermeTotal:1319590.8,facture:!1},{id:50,numeroEtape:"9.2b",description:"Pre-Requisites Complete and accepted by Canada (Commissioning, Flushing, ITP)",pourcentage:0,prixUnitaireFerme:1319590.8,prixFermeTotal:1319590.8,facture:!1},{id:51,numeroEtape:"9.3b",description:"Pre-Requisites Complete and accepted by Canada (Commissioning, Flushing, ITP)",pourcentage:0,prixUnitaireFerme:1319590.8,prixFermeTotal:1319590.8,facture:!1},{id:52,numeroEtape:"9.4b",description:"Pre-Requisites Complete and accepted by Canada (Commissioning, Flushing, ITP)",pourcentage:0,prixUnitaireFerme:1319590.8,prixFermeTotal:1319590.8,facture:!1},{id:53,numeroEtape:"9.1c",description:"Trials Conduct Complete and accepted by Canada",pourcentage:0,prixUnitaireFerme:5938158.68,prixFermeTotal:5938158.68,facture:!1},{id:54,numeroEtape:"9.2c",description:"Trials Conduct Complete and accepted by Canada",pourcentage:0,prixUnitaireFerme:5938158.68,prixFermeTotal:5938158.68,facture:!1},{id:55,numeroEtape:"9.3c",description:"Trials Conduct Complete and accepted by Canada",pourcentage:0,prixUnitaireFerme:5938158.68,prixFermeTotal:5938158.68,facture:!1},{id:56,numeroEtape:"9.4c",description:"Trials Conduct Complete and accepted by Canada",pourcentage:0,prixUnitaireFerme:5938158.68,prixFermeTotal:5938158.68,facture:!1},{id:57,numeroEtape:"9.1d",description:"Trials Reports Submitted and accepted by Canada",pourcentage:0,prixUnitaireFerme:2639181.64,prixFermeTotal:2639181.64,facture:!1},{id:58,numeroEtape:"9.2d",description:"Trials Reports Submitted and accepted by Canada",pourcentage:0,prixUnitaireFerme:2639181.64,prixFermeTotal:2639181.64,facture:!1},{id:59,numeroEtape:"9.3d",description:"Trials Reports Submitted and accepted by Canada",pourcentage:0,prixUnitaireFerme:2639181.64,prixFermeTotal:2639181.64,facture:!1},{id:60,numeroEtape:"9.4d",description:"Trials Reports Submitted and accepted by Canada",pourcentage:0,prixUnitaireFerme:2639181.64,prixFermeTotal:2639181.64,facture:!1},{id:61,numeroEtape:"10.1",description:"First Article Completion at Subcontractor Facility",pourcentage:10,prixUnitaireFerme:8797272.1,prixFermeTotal:8797272.1,facture:!1},{id:62,numeroEtape:"10.2",description:"First Article Completion at Subcontractor Facility",pourcentage:0,prixUnitaireFerme:8797272.1,prixFermeTotal:8797272.1,facture:!1},{id:63,numeroEtape:"10.3",description:"First Article Completion at Subcontractor Facility",pourcentage:10,prixUnitaireFerme:8797272.1,prixFermeTotal:8797272.1,facture:!1},{id:64,numeroEtape:"10.4",description:"First Article Completion at Subcontractor Facility",pourcentage:0,prixUnitaireFerme:8797272.1,prixFermeTotal:8797272.1,facture:!1},{id:65,numeroEtape:"11.1",description:"C228 NLT1 Ready for Delivery",pourcentage:15,prixUnitaireFerme:13195908.15,prixFermeTotal:13195908.15,facture:!1},{id:66,numeroEtape:"11.2",description:"C229 NLT2 Ready for Delivery",pourcentage:0,prixUnitaireFerme:13195908.15,prixFermeTotal:13195908.15,facture:!1},{id:67,numeroEtape:"11.3",description:"C230 NLT3 Ready for Delivery",pourcentage:15,prixUnitaireFerme:52783635.6,prixFermeTotal:52783635.6,facture:!1},{id:68,numeroEtape:"11.4",description:"C231 NLT4 Ready for Delivery",pourcentage:0,prixUnitaireFerme:52783635.6,prixFermeTotal:52783635.6,facture:!1},{id:69,numeroEtape:"12.1",description:"C228 NLT1 Delivered and Accepted by the Canada",pourcentage:8,prixUnitaireFerme:7037826.52,prixFermeTotal:7037826.52,facture:!1},{id:70,numeroEtape:"12.2",description:"C229 NLT2 Delivered and Accepted by the Canada",pourcentage:0,prixUnitaireFerme:7037826.52,prixFermeTotal:7037826.52,facture:!1},{id:71,numeroEtape:"12.3",description:"C230 NLT3 Delivered and Accepted by the Canada",pourcentage:8,prixUnitaireFerme:28151307.08,prixFermeTotal:28151307.08,facture:!1},{id:72,numeroEtape:"12.4",description:"C231 NLT4 Delivered and Accepted by the Canada",pourcentage:0,prixUnitaireFerme:28151307.08,prixFermeTotal:28151307.08,facture:!1},{id:73,numeroEtape:"13.1",description:"Technology Transfer",pourcentage:0,prixUnitaireFerme:2e5,prixFermeTotal:2e5,facture:!1},{id:74,numeroEtape:"13.2",description:"Technology Transfer",pourcentage:0,prixUnitaireFerme:2e5,prixFermeTotal:2e5,facture:!1},{id:75,numeroEtape:"13.3",description:"Technology Transfer",pourcentage:0,prixUnitaireFerme:8e5,prixFermeTotal:8e5,facture:!1},{id:76,numeroEtape:"13.4",description:"Technology Transfer",pourcentage:0,prixUnitaireFerme:8e5,prixFermeTotal:8e5,facture:!1},{id:77,numeroEtape:"14.1",description:"Final Technical Data Package (All 4 vessels)",pourcentage:0,prixUnitaireFerme:3e5,prixFermeTotal:3e5,facture:!1},{id:78,numeroEtape:"14.2",description:"Final Technical Data Package (All 4 vessels)",pourcentage:0,prixUnitaireFerme:3e5,prixFermeTotal:3e5,facture:!1},{id:79,numeroEtape:"14.3",description:"Final Technical Data Package (All 4 vessels)",pourcentage:0,prixUnitaireFerme:12e5,prixFermeTotal:12e5,facture:!1},{id:80,numeroEtape:"14.4",description:"Final Technical Data Package (All 4 vessels)",pourcentage:0,prixUnitaireFerme:12e5,prixFermeTotal:12e5,facture:!1},{id:81,numeroEtape:"15.1",description:"Shore-based Training",pourcentage:0,prixUnitaireFerme:1e5,prixFermeTotal:1e5,facture:!1},{id:82,numeroEtape:"15.2",description:"Shore-based Training",pourcentage:0,prixUnitaireFerme:1e5,prixFermeTotal:1e5,facture:!1},{id:83,numeroEtape:"15.3",description:"Shore-based Training",pourcentage:0,prixUnitaireFerme:4e5,prixFermeTotal:4e5,facture:!1},{id:84,numeroEtape:"15.4",description:"Shore-based Training",pourcentage:0,prixUnitaireFerme:4e5,prixFermeTotal:4e5,facture:!1},{id:85,numeroEtape:"16.1",description:"Instruction and Maintenance Training",pourcentage:0,prixUnitaireFerme:15e4,prixFermeTotal:15e4,facture:!1},{id:86,numeroEtape:"16.2",description:"Instruction and Maintenance Training",pourcentage:0,prixUnitaireFerme:15e4,prixFermeTotal:15e4,facture:!1},{id:87,numeroEtape:"16.3",description:"Instruction and Maintenance Training",pourcentage:0,prixUnitaireFerme:6e5,prixFermeTotal:6e5,facture:!1},{id:88,numeroEtape:"16.4",description:"Instruction and Maintenance Training",pourcentage:0,prixUnitaireFerme:6e5,prixFermeTotal:6e5,facture:!1},{id:89,numeroEtape:"17.1",description:"Training - On Board",pourcentage:0,prixUnitaireFerme:1e5,prixFermeTotal:1e5,facture:!1},{id:90,numeroEtape:"17.2",description:"Training - On Board",pourcentage:0,prixUnitaireFerme:1e5,prixFermeTotal:1e5,facture:!1},{id:91,numeroEtape:"17.3",description:"Training - On Board",pourcentage:0,prixUnitaireFerme:4e5,prixFermeTotal:4e5,facture:!1},{id:92,numeroEtape:"17.4",description:"Training - On Board",pourcentage:0,prixUnitaireFerme:4e5,prixFermeTotal:4e5,facture:!1},{id:93,numeroEtape:"18.1",description:"Mandatory - ISI",pourcentage:0,prixUnitaireFerme:25e4,prixFermeTotal:25e4,facture:!1},{id:94,numeroEtape:"18.2",description:"Mandatory - ISI",pourcentage:0,prixUnitaireFerme:25e4,prixFermeTotal:25e4,facture:!1},{id:95,numeroEtape:"18.3",description:"Mandatory - ISI",pourcentage:0,prixUnitaireFerme:1e6,prixFermeTotal:1e6,facture:!1},{id:96,numeroEtape:"18.4",description:"Mandatory - ISI",pourcentage:0,prixUnitaireFerme:1e6,prixFermeTotal:1e6,facture:!1},{id:97,numeroEtape:"19.1",description:"Warranty",pourcentage:0,prixUnitaireFerme:5e5,prixFermeTotal:5e5,facture:!1},{id:98,numeroEtape:"19.2",description:"Warranty",pourcentage:0,prixUnitaireFerme:5e5,prixFermeTotal:5e5,facture:!1},{id:99,numeroEtape:"19.3",description:"Warranty",pourcentage:0,prixUnitaireFerme:2e6,prixFermeTotal:2e6,facture:!1},{id:100,numeroEtape:"19.4",description:"Warranty",pourcentage:0,prixUnitaireFerme:2e6,prixFermeTotal:2e6,facture:!1},{id:101,numeroEtape:"19.a",description:"Auxiliary Milestone - Delivery and Acceptance NLT 1",pourcentage:0,prixUnitaireFerme:4e5,prixFermeTotal:4e5,facture:!1},{id:102,numeroEtape:"19.b",description:"Auxiliary Milestone - Delivery and Acceptance NLT 2",pourcentage:0,prixUnitaireFerme:4e5,prixFermeTotal:4e5,facture:!1},{id:103,numeroEtape:"19.c",description:"Auxiliary Milestone - Delivery and Acceptance NLT 3",pourcentage:0,prixUnitaireFerme:16e5,prixFermeTotal:16e5,facture:!1},{id:104,numeroEtape:"19.d",description:"Auxiliary Milestone - Delivery and Acceptance NLT 4",pourcentage:0,prixUnitaireFerme:16e5,prixFermeTotal:16e5,facture:!1},{id:105,numeroEtape:"19.e",description:"Auxiliary Milestone - Delivery and Acceptance NLT 1",pourcentage:0,prixUnitaireFerme:4e5,prixFermeTotal:4e5,facture:!1},{id:106,numeroEtape:"19.f",description:"Auxiliary Milestone - Delivery and Acceptance NLT 2",pourcentage:0,prixUnitaireFerme:4e5,prixFermeTotal:4e5,facture:!1},{id:107,numeroEtape:"19.g",description:"Auxiliary Milestone - Delivery and Acceptance NLT 3",pourcentage:0,prixUnitaireFerme:16e5,prixFermeTotal:16e5,facture:!1},{id:108,numeroEtape:"19.h",description:"Auxiliary Milestone - Delivery and Acceptance NLT 4",pourcentage:0,prixUnitaireFerme:16e5,prixFermeTotal:16e5,facture:!1},{id:109,numeroEtape:"20.1",description:"Construction Planning and Additional Services",pourcentage:0,prixUnitaireFerme:3e5,prixFermeTotal:3e5,facture:!1},{id:110,numeroEtape:"20.2",description:"Construction Planning and Additional Services",pourcentage:0,prixUnitaireFerme:3e5,prixFermeTotal:3e5,facture:!1},{id:111,numeroEtape:"20.3",description:"Construction Planning and Additional Services",pourcentage:0,prixUnitaireFerme:12e5,prixFermeTotal:12e5,facture:!1},{id:112,numeroEtape:"20.4",description:"Construction Planning and Additional Services",pourcentage:0,prixUnitaireFerme:12e5,prixFermeTotal:12e5,facture:!1},{id:113,numeroEtape:"21.1",description:"Project Management and Quality Assurance",pourcentage:0,prixUnitaireFerme:5e5,prixFermeTotal:5e5,facture:!1},{id:114,numeroEtape:"21.2",description:"Project Management and Quality Assurance",pourcentage:0,prixUnitaireFerme:5e5,prixFermeTotal:5e5,facture:!1},{id:115,numeroEtape:"21.3",description:"Project Management and Quality Assurance",pourcentage:0,prixUnitaireFerme:2e6,prixFermeTotal:2e6,facture:!1},{id:116,numeroEtape:"21.4",description:"Project Management and Quality Assurance",pourcentage:0,prixUnitaireFerme:2e6,prixFermeTotal:2e6,facture:!1},{id:117,numeroEtape:"22.1",description:"Systems Integration and Testing",pourcentage:0,prixUnitaireFerme:6e5,prixFermeTotal:6e5,facture:!1},{id:118,numeroEtape:"22.2",description:"Systems Integration and Testing",pourcentage:0,prixUnitaireFerme:6e5,prixFermeTotal:6e5,facture:!1},{id:119,numeroEtape:"22.3",description:"Systems Integration and Testing",pourcentage:0,prixUnitaireFerme:24e5,prixFermeTotal:24e5,facture:!1},{id:120,numeroEtape:"22.4",description:"Systems Integration and Testing",pourcentage:0,prixUnitaireFerme:24e5,prixFermeTotal:24e5,facture:!1},{id:121,numeroEtape:"23.1",description:"Final Documentation and Deliverables",pourcentage:0,prixUnitaireFerme:2e5,prixFermeTotal:2e5,facture:!1},{id:122,numeroEtape:"23.2",description:"Final Documentation and Deliverables",pourcentage:0,prixUnitaireFerme:2e5,prixFermeTotal:2e5,facture:!1},{id:123,numeroEtape:"23.3",description:"Final Documentation and Deliverables",pourcentage:0,prixUnitaireFerme:8e5,prixFermeTotal:8e5,facture:!1},{id:124,numeroEtape:"23.4",description:"Final Documentation and Deliverables",pourcentage:0,prixUnitaireFerme:8e5,prixFermeTotal:8e5,facture:!1},{id:125,numeroEtape:"24.1",description:"Supply Chain Management",pourcentage:0,prixUnitaireFerme:35e4,prixFermeTotal:35e4,facture:!1},{id:126,numeroEtape:"24.2",description:"Supply Chain Management",pourcentage:0,prixUnitaireFerme:35e4,prixFermeTotal:35e4,facture:!1},{id:127,numeroEtape:"24.3",description:"Supply Chain Management",pourcentage:0,prixUnitaireFerme:14e5,prixFermeTotal:14e5,facture:!1},{id:128,numeroEtape:"24.4",description:"Supply Chain Management",pourcentage:0,prixUnitaireFerme:14e5,prixFermeTotal:14e5,facture:!1},{id:129,numeroEtape:"25.1",description:"Risk Management and Mitigation",pourcentage:0,prixUnitaireFerme:25e4,prixFermeTotal:25e4,facture:!1},{id:130,numeroEtape:"25.2",description:"Risk Management and Mitigation",pourcentage:0,prixUnitaireFerme:25e4,prixFermeTotal:25e4,facture:!1},{id:131,numeroEtape:"25.3",description:"Risk Management and Mitigation",pourcentage:0,prixUnitaireFerme:1e6,prixFermeTotal:1e6,facture:!1},{id:132,numeroEtape:"25.4",description:"Risk Management and Mitigation",pourcentage:0,prixUnitaireFerme:1e6,prixFermeTotal:1e6,facture:!1},{id:133,numeroEtape:"26.1",description:"Environmental Compliance",pourcentage:0,prixUnitaireFerme:15e4,prixFermeTotal:15e4,facture:!1},{id:134,numeroEtape:"26.2",description:"Environmental Compliance",pourcentage:0,prixUnitaireFerme:15e4,prixFermeTotal:15e4,facture:!1},{id:135,numeroEtape:"26.3",description:"Environmental Compliance",pourcentage:0,prixUnitaireFerme:6e5,prixFermeTotal:6e5,facture:!1},{id:136,numeroEtape:"26.4",description:"Environmental Compliance",pourcentage:0,prixUnitaireFerme:6e5,prixFermeTotal:6e5,facture:!1}],g=e=>e.map(e=>{let t=u(e.id),a=o({prixFermeTotal:e.prixFermeTotal,prixUnitaireFerme:e.prixUnitaireFerme});return{id:e.id,c228:"c228"===t?a:0,c229:"c229"===t?a:0,c230:"c230"===t?a:0,c231:"c231"===t?a:0}}),b=e=>e.map(e=>{let t=u(e.id),a=d[t]||d.default,r=o({prixFermeTotal:e.prixFermeTotal,prixUnitaireFerme:e.prixUnitaireFerme})*(1+a);return{id:e.id,c228:"c228"===t?r:0,c229:"c229"===t?r:0,c230:"c230"===t?r:0,c231:"c231"===t?r:0}}),h=g(x),C=b(x);function N(){let{updateMilestonePrice:e,toggleMilestoneFacture:t,calculateTTC:a}=(0,s.S)(),[i,c]=(0,n.useState)(x),[o,d]=(0,n.useState)(h),[p,N]=(0,n.useState)(C),[y,j]=(0,n.useState)("details"),[f,T]=(0,n.useState)([]),D=(e,t)=>{T(a=>[{id:Date.now().toString(),timestamp:new Date().toLocaleTimeString("fr-FR"),action:e,details:t},...a.slice(0,4)])},R=(e,a,r)=>{c(n=>{let i=n.map(n=>{if(n.id===e){let e={...n,[a]:r};if("prixUnitaireFerme"===a||"prixFermeTotal"===a){let t=u(n.id),i="number"==typeof r?r:parseFloat(r)||0;m.syncPriceChange(n.id,i,"milestone",t,{updateRegisters:(e,t,a,r,n)=>{D("\uD83D\uDCCA Registre","Registre ".concat(e.toUpperCase(),": ").concat(l(r)," → ").concat(l(n)))},updateForms:(e,t,a)=>{D("\uD83D\uDCDD Formulaires","Formulaires ".concat(e.toUpperCase(),": ").concat(l(t)," → ").concat(l(a)))},onSync:e=>{D("\uD83D\uDD04 Synchronisation","Milestone ".concat(e.itemId," - ").concat(e.projectId.toUpperCase(),": ").concat(l(e.montantHT)," (Taux: ").concat((100*e.taxRate).toFixed(2),"%)"))}}),"prixUnitaireFerme"===a&&(e.prixFermeTotal=i)}if("facture"===a){let e=u(n.id);t(e,n.id),console.log("\uD83D\uDCB0 Facturation ".concat(r?"activ\xe9e":"d\xe9sactiv\xe9e"," pour milestone ").concat(n.id," (").concat(e.toUpperCase(),")"))}return e}return n});return("prixFermeTotal"===a||"prixUnitaireFerme"===a)&&setTimeout(()=>{d(g(i)),N(b(i))},0),i})},F=e=>{let t=i.filter(t=>t.id!==e);c(t),d(g(t)),N(b(t))},v=e=>new Intl.NumberFormat("fr-CA",{style:"currency",currency:"CAD"}).format(e),w=i.reduce((e,t)=>e+t.prixFermeTotal,0),A=i.reduce((e,t)=>e+t.pourcentage,0),E=i.filter(e=>e.facture).reduce((e,t)=>e+t.prixFermeTotal,0),M=w-E,S="billing-before"===y?o:p;return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-800 text-white p-6 rounded-lg",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"\uD83D\uDCCB D\xe9tails des Milestones - Projet Ocean Factory"}),(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsx)("button",{onClick:()=>j("details"),className:"px-4 py-2 rounded transition-colors ".concat("details"===y?"bg-white text-blue-600":"bg-blue-500 hover:bg-blue-400"),children:"\uD83D\uDCCA Vue D\xe9taill\xe9e"}),(0,r.jsx)("button",{onClick:()=>j("billing-before"),className:"px-4 py-2 rounded transition-colors ".concat("billing-before"===y?"bg-white text-blue-600":"bg-blue-500 hover:bg-blue-400"),children:"\uD83D\uDCB0 Facturation HT"}),(0,r.jsx)("button",{onClick:()=>j("billing-with"),className:"px-4 py-2 rounded transition-colors ".concat("billing-with"===y?"bg-white text-blue-600":"bg-blue-500 hover:bg-blue-400"),children:"\uD83E\uDDFE Facturation TTC"})]})]}),f.length>0&&(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow border-l-4 border-purple-500 p-4",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-2",children:"\uD83D\uDD04 Synchronisations r\xe9centes"}),(0,r.jsx)("div",{className:"space-y-1",children:f.map(e=>(0,r.jsxs)("div",{className:"flex items-center text-xs text-gray-600",children:[(0,r.jsx)("span",{className:"text-gray-400 mr-2",children:e.timestamp}),(0,r.jsx)("span",{className:"font-medium mr-2",children:e.action}),(0,r.jsx)("span",{className:"text-gray-700",children:e.details})]},e.id))})]}),"details"===y&&(0,r.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-4 gap-4",children:[(0,r.jsx)("div",{className:"xl:col-span-3",children:(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-blue-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),(0,r.jsx)("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\xc9tape"}),(0,r.jsx)("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,r.jsx)("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"%"}),(0,r.jsx)("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Prix Unitaire"}),(0,r.jsx)("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Prix Total"}),(0,r.jsx)("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Factur\xe9"}),(0,r.jsx)("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(e=>(0,r.jsxs)("tr",{className:e.facture?"bg-purple-50":"",children:[(0,r.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-900",children:e.id}),(0,r.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,r.jsx)("input",{type:"text",value:e.numeroEtape,onChange:t=>R(e.id,"numeroEtape",t.target.value),className:"w-20 text-sm border border-gray-300 rounded px-2 py-1"})}),(0,r.jsx)("td",{className:"px-3 py-2",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("input",{type:"text",value:e.description,onChange:t=>R(e.id,"description",t.target.value),className:"w-full text-sm border border-gray-300 rounded px-2 py-1",style:{minWidth:"250px"}}),(()=>{let t=u(e.id);return["c228","c229","c230","c231"].includes(t)?(0,r.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full ".concat({c228:"bg-blue-100 text-blue-800",c229:"bg-green-100 text-green-800",c230:"bg-yellow-100 text-yellow-800",c231:"bg-red-100 text-red-800"}[t]),children:t.toUpperCase()}):null})()]})}),(0,r.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,r.jsx)("input",{type:"number",value:e.pourcentage,onChange:t=>R(e.id,"pourcentage",parseFloat(t.target.value)||0),className:"w-16 text-sm border border-gray-300 rounded px-2 py-1",min:"0",max:"100"})}),(0,r.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,r.jsx)("input",{type:"number",value:e.prixUnitaireFerme,onChange:t=>R(e.id,"prixUnitaireFerme",parseFloat(t.target.value)||0),className:"w-28 text-sm border border-gray-300 rounded px-2 py-1",step:"0.01"})}),(0,r.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,r.jsx)("input",{type:"number",value:e.prixFermeTotal,onChange:t=>R(e.id,"prixFermeTotal",parseFloat(t.target.value)||0),className:"w-28 text-sm border border-gray-300 rounded px-2 py-1",step:"0.01"})}),(0,r.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-center",children:(0,r.jsx)("input",{type:"checkbox",checked:e.facture,onChange:t=>R(e.id,"facture",t.target.checked),className:"h-4 w-4 text-blue-600 border-gray-300 rounded"})}),(0,r.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-center",children:(0,r.jsx)("button",{onClick:()=>F(e.id),className:"inline-flex items-center px-2 py-1 text-xs font-medium text-red-600 bg-red-100 rounded hover:bg-red-200 transition-colors",title:"Supprimer cette ligne",children:"❌"})})]},e.id))}),(0,r.jsx)("tfoot",{className:"bg-blue-100",children:(0,r.jsxs)("tr",{className:"font-bold",children:[(0,r.jsx)("td",{colSpan:4,className:"px-3 py-3 text-sm text-blue-900",children:"TOTAL"}),(0,r.jsx)("td",{className:"px-3 py-3 text-sm text-blue-900",children:v(w)}),(0,r.jsx)("td",{className:"px-3 py-3 text-sm text-blue-900",children:v(w)}),(0,r.jsx)("td",{className:"px-3 py-3 text-sm text-blue-900",children:i.filter(e=>e.facture).length}),(0,r.jsx)("td",{className:"px-3 py-3 text-center",children:(0,r.jsx)("button",{onClick:()=>{let e=Math.max(...i.map(e=>e.id))+1,t=[...i,{id:e,numeroEtape:"",description:"",pourcentage:0,prixUnitaireFerme:0,prixFermeTotal:0,facture:!1}];c(t),d(g(t)),N(b(t))},className:"inline-flex items-center px-3 py-1 text-xs font-medium text-green-600 bg-green-100 rounded hover:bg-green-200 transition-colors",title:"Ajouter une nouvelle ligne",children:"➕ Ajouter"})})]})})]})})})}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-br from-green-500 to-green-700 rounded-lg p-6 text-white",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\uD83D\uDCB0 R\xe9sum\xe9 Financier"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-green-100",children:"Total Milestones"}),(0,r.jsx)("p",{className:"text-xl font-bold",children:v(w)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-green-100",children:"Factur\xe9"}),(0,r.jsx)("p",{className:"text-xl font-bold",children:v(E)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-green-100",children:"En Attente"}),(0,r.jsx)("p",{className:"text-xl font-bold",children:v(M)})]})]})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-blue-500 to-blue-700 rounded-lg p-6 text-white",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\uD83D\uDCCA Statistiques"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-blue-100",children:"Total Milestones"}),(0,r.jsx)("p",{className:"text-xl font-bold",children:i.length})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-blue-100",children:"Factur\xe9s"}),(0,r.jsx)("p",{className:"text-xl font-bold",children:i.filter(e=>e.facture).length})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-blue-100",children:"% Total"}),(0,r.jsxs)("p",{className:"text-xl font-bold",children:[A.toFixed(1),"%"]})]})]})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-purple-500 to-purple-700 rounded-lg p-6 text-white",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\uD83C\uDFAF Progression"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-purple-100",children:"Taux de Facturation"}),(0,r.jsxs)("p",{className:"text-xl font-bold",children:[w>0?(E/w*100).toFixed(1):0,"%"]})]}),(0,r.jsx)("div",{className:"w-full bg-purple-300 rounded-full h-2",children:(0,r.jsx)("div",{className:"bg-white h-2 rounded-full transition-all duration-300",style:{width:"".concat(w>0?E/w*100:0,"%")}})})]})]})]})]}),("billing-before"===y||"billing-with"===y)&&(0,r.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-4 gap-4",children:[(0,r.jsx)("div",{className:"xl:col-span-3",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-r from-orange-600 to-orange-800 text-white p-4",children:[(0,r.jsx)("h2",{className:"text-xl font-bold",children:"billing-before"===y?"\uD83D\uDCB0 Facturation Hors Taxes":"\uD83E\uDDFE Facturation TTC"}),"billing-before"===y&&(0,r.jsx)("p",{className:"text-orange-100 text-sm mt-1",children:"⚡ Calcul automatique : Prix ferme total \xf7 4 projets pour chaque navire"}),"billing-with"===y&&(0,r.jsx)("p",{className:"text-orange-100 text-sm mt-1",children:"⚡ Calcul automatique : Prix HT + TPS (5%) + TVQ (9.975%) = Total TTC \xf7 4 projets"})]}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-orange-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),(0,r.jsx)("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,r.jsx)("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"C228"}),(0,r.jsx)("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"C229"}),(0,r.jsx)("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"C230"}),(0,r.jsx)("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"C231"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:S.map((e,t)=>{var a;return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-900",children:e.id}),(0,r.jsx)("td",{className:"px-3 py-2 text-sm text-gray-900",children:(null===(a=i[t])||void 0===a?void 0:a.description)||"N/A"}),"billing-before"===y?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium text-green-600",children:v(e.c228)}),(0,r.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium text-green-600",children:v(e.c229)}),(0,r.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium text-green-600",children:v(e.c230)}),(0,r.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium text-green-600",children:v(e.c231)})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium text-purple-600",children:v(e.c228)}),(0,r.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium text-purple-600",children:v(e.c229)}),(0,r.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium text-purple-600",children:v(e.c230)}),(0,r.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium text-purple-600",children:v(e.c231)})]})]},e.id)})}),(0,r.jsx)("tfoot",{className:"bg-orange-100",children:(0,r.jsxs)("tr",{className:"font-bold",children:[(0,r.jsx)("td",{colSpan:2,className:"px-3 py-3 text-sm text-orange-900",children:"TOTAL"}),(0,r.jsx)("td",{className:"px-3 py-3 text-sm text-orange-900",children:v(S.reduce((e,t)=>e+t.c228,0))}),(0,r.jsx)("td",{className:"px-3 py-3 text-sm text-orange-900",children:v(S.reduce((e,t)=>e+t.c229,0))}),(0,r.jsx)("td",{className:"px-3 py-3 text-sm text-orange-900",children:v(S.reduce((e,t)=>e+t.c230,0))}),(0,r.jsx)("td",{className:"px-3 py-3 text-sm text-orange-900",children:v(S.reduce((e,t)=>e+t.c231,0))})]})})]})})]})}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-br from-orange-500 to-orange-700 rounded-lg p-6 text-white",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\uD83D\uDCCA Totaux par Navire"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-orange-100",children:"C228 NLT1"}),(0,r.jsx)("p",{className:"text-xl font-bold",children:v(S.reduce((e,t)=>e+t.c228,0))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-orange-100",children:"C229 NLT2"}),(0,r.jsx)("p",{className:"text-xl font-bold",children:v(S.reduce((e,t)=>e+t.c229,0))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-orange-100",children:"C230 NLT3"}),(0,r.jsx)("p",{className:"text-xl font-bold",children:v(S.reduce((e,t)=>e+t.c230,0))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-orange-100",children:"C231 NLT4"}),(0,r.jsx)("p",{className:"text-xl font-bold",children:v(S.reduce((e,t)=>e+t.c231,0))})]})]})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-green-500 to-green-700 rounded-lg p-6 text-white",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"\uD83D\uDCB0 Total G\xe9n\xe9ral"}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("p",{className:"text-green-100",children:"Total Facturation"}),(0,r.jsx)("p",{className:"text-2xl font-bold",children:v(S.reduce((e,t)=>e+t.c228+t.c229+t.c230+t.c231,0))})]})]})]})]})]})}let y=Array.from({length:10},(e,t)=>({id:t+1,numeroEtape:"DCR-".concat(String(t+1).padStart(3,"0")),description:"DCR ".concat(t+1," description"),pourcentage:0,prixUnitaireFerme:0,prixFermeTotal:0,facture:!1})),j=Array.from({length:10},(e,t)=>({id:t+1,c228:0,c229:0,c230:0,c231:0})),f=Array.from({length:10},(e,t)=>({id:t+1,c228:0,c229:0,c230:0,c231:0}));function T(){let[e,t]=(0,n.useState)(y),[a,i]=(0,n.useState)(j),[c,s]=(0,n.useState)(f),o=e=>new Intl.NumberFormat("fr-CA",{style:"currency",currency:"CAD",minimumFractionDigits:2}).format(e),l=e.reduce((e,t)=>e+t.prixFermeTotal,0),d=.09975*l,m=l+d,p=e.reduce((e,t)=>e+t.pourcentage,0),u=e.filter(e=>e.facture).reduce((e,t)=>e+t.prixFermeTotal,0),x=1.09975*u,g=(e,a,r)=>{t(t=>t.map(t=>t.id===e?{...t,[a]:r}:t))},b=e=>{t(t=>t.filter(t=>t.id!==e)),i(t=>t.filter(t=>t.id!==e)),s(t=>t.filter(t=>t.id!==e))};return(0,r.jsxs)("div",{className:"w-full space-y-8",children:[(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-blue-800 mb-2",children:"L\xe9gende"}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 bg-purple-100 border border-purple-200 rounded"}),(0,r.jsx)("span",{className:"text-gray-700",children:"DCR factur\xe9 (marqu\xe9 en mauve)"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 bg-white border border-gray-200 rounded"}),(0,r.jsx)("span",{className:"text-gray-700",children:"DCR non factur\xe9"})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-4 gap-4",children:[(0,r.jsx)("div",{className:"xl:col-span-3",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[(0,r.jsx)("div",{className:"bg-orange-600 text-white p-4",children:(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"1. Tableaux de DCR Detail"})}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"N\xb0 \xc9tape"}),(0,r.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,r.jsx)("th",{className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-16",children:"%"}),(0,r.jsx)("th",{className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-32",children:"Prix unitaire ($)"}),(0,r.jsx)("th",{className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-32",children:"Prix total ($)"}),(0,r.jsx)("th",{className:"px-2 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-16",children:"Factur\xe9"}),(0,r.jsx)("th",{className:"px-1 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-12"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50 ".concat(e.facture?"bg-purple-100 hover:bg-purple-200":""),children:[(0,r.jsx)("td",{className:"px-2 py-2 whitespace-nowrap",children:(0,r.jsx)("input",{type:"text",value:e.numeroEtape,onChange:t=>g(e.id,"numeroEtape",t.target.value),className:"w-full px-1 py-1 text-sm border border-gray-300 rounded focus:ring-orange-500 focus:border-orange-500","aria-label":"Num\xe9ro d'\xe9tape ".concat(e.numeroEtape)})}),(0,r.jsx)("td",{className:"px-3 py-2",children:(0,r.jsx)("input",{type:"text",value:e.description,onChange:t=>g(e.id,"description",t.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-orange-500 focus:border-orange-500",placeholder:"Description du DCR","aria-label":"Description du DCR"})}),(0,r.jsx)("td",{className:"px-2 py-2 whitespace-nowrap",children:(0,r.jsx)("input",{type:"number",value:e.pourcentage,onChange:t=>g(e.id,"pourcentage",parseFloat(t.target.value)||0),className:"w-full px-1 py-1 text-sm border border-gray-300 rounded focus:ring-orange-500 focus:border-orange-500",min:"0",max:"100",step:"0.01","aria-label":"Pourcentage"})}),(0,r.jsx)("td",{className:"px-2 py-2 whitespace-nowrap",children:(0,r.jsx)("input",{type:"number",value:e.prixUnitaireFerme,onChange:t=>g(e.id,"prixUnitaireFerme",parseFloat(t.target.value)||0),className:"w-full px-1 py-1 text-sm border border-gray-300 rounded focus:ring-orange-500 focus:border-orange-500",min:"0",step:"0.01","aria-label":"Prix unitaire ferme"})}),(0,r.jsx)("td",{className:"px-2 py-2 whitespace-nowrap",children:(0,r.jsx)("input",{type:"number",value:e.prixFermeTotal,onChange:t=>g(e.id,"prixFermeTotal",parseFloat(t.target.value)||0),className:"w-full px-1 py-1 text-sm border border-gray-300 rounded focus:ring-orange-500 focus:border-orange-500",min:"0",step:"0.01","aria-label":"Prix ferme total"})}),(0,r.jsx)("td",{className:"px-2 py-2 text-center",children:(0,r.jsx)("input",{type:"checkbox",checked:e.facture,onChange:t=>g(e.id,"facture",t.target.checked),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded","aria-label":"Marquer comme factur\xe9"})}),(0,r.jsx)("td",{className:"px-1 py-2 text-center",children:(0,r.jsx)("button",{onClick:()=>b(e.id),className:"text-red-600 hover:text-red-800 p-1 rounded hover:bg-red-50 transition-colors",title:"Supprimer cette ligne",children:"\uD83D\uDDD1️"})})]},e.id))})]})}),(0,r.jsx)("div",{className:"p-4 bg-gray-50",children:(0,r.jsx)("button",{onClick:()=>{let a=Math.max(...e.map(e=>e.id))+1,r={id:a,numeroEtape:"DCR-".concat(String(a).padStart(3,"0")),description:"",pourcentage:0,prixUnitaireFerme:0,prixFermeTotal:0,facture:!1},n={id:a,c228:0,c229:0,c230:0,c231:0};t(e=>[...e,r]),i(e=>[...e,n]),s(e=>[...e,n])},className:"bg-orange-600 text-white px-4 py-2 rounded hover:bg-orange-700 transition-colors",children:"Ajouter une ligne"})})]})}),(0,r.jsx)("div",{className:"xl:col-span-1",children:(0,r.jsxs)("div",{className:"bg-gradient-to-br from-orange-600 to-orange-800 rounded-lg shadow-lg p-6 text-white sticky top-6",children:[(0,r.jsx)("h3",{className:"text-lg font-bold mb-4 flex items-center",children:"\uD83D\uDCCA R\xe9sum\xe9 DCR"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:[(0,r.jsx)("p",{className:"text-sm mb-1",children:"Total Contrat (Avant Taxes)"}),(0,r.jsx)("p",{className:"text-xl font-bold",children:o(l)})]}),(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:[(0,r.jsx)("p",{className:"text-sm mb-1",children:"Taxes (9.975%)"}),(0,r.jsx)("p",{className:"text-xl font-bold",children:o(d)})]}),(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:[(0,r.jsx)("p",{className:"text-sm mb-1",children:"Total Avec Taxes"}),(0,r.jsx)("p",{className:"text-2xl font-bold",children:o(m)})]}),(0,r.jsxs)("div",{className:"border-t border-white/20 pt-4",children:[(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4 mb-4",children:[(0,r.jsx)("p",{className:"text-sm mb-1",children:"Statut Facturation"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-white/70",children:"Factur\xe9"}),(0,r.jsx)("p",{className:"font-bold",children:o(u)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-white/70",children:"Non factur\xe9"}),(0,r.jsx)("p",{className:"font-bold",children:o(l-u)})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-white/70",children:"DCRs"}),(0,r.jsx)("p",{className:"font-bold",children:e.length})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-white/70",children:"% Total"}),(0,r.jsxs)("p",{className:"font-bold",children:[p.toFixed(1),"%"]})]})]})]})]})]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-4 gap-4",children:[(0,r.jsx)("div",{className:"xl:col-span-3",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[(0,r.jsx)("div",{className:"bg-blue-600 text-white p-4",children:(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"2. Tableau de facturation par projet avant taxes"})}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"N\xb0 \xc9tape"}),(0,r.jsx)("th",{className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-32",children:"C228 NLT1"}),(0,r.jsx)("th",{className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-32",children:"C229 NLT2"}),(0,r.jsx)("th",{className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-32",children:"C230 NLT3"}),(0,r.jsx)("th",{className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-32",children:"C231 NLT4"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>{let t=e.prixFermeTotal/4;return(0,r.jsxs)("tr",{className:"hover:bg-gray-50 ".concat(e.facture?"bg-purple-100 hover:bg-purple-200":""),children:[(0,r.jsx)("td",{className:"px-2 py-2 whitespace-nowrap font-medium text-sm",children:e.numeroEtape}),(0,r.jsx)("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900",children:o(t)}),(0,r.jsx)("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900",children:o(t)}),(0,r.jsx)("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900",children:o(t)}),(0,r.jsx)("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900",children:o(t)})]},e.id)})})]})})]})}),(0,r.jsx)("div",{className:"xl:col-span-1",children:(0,r.jsxs)("div",{className:"bg-gradient-to-br from-blue-600 to-blue-800 rounded-lg shadow-lg p-6 text-white sticky top-6",children:[(0,r.jsx)("h3",{className:"text-lg font-bold mb-4 flex items-center",children:"\uD83D\uDCB0 R\xe9sum\xe9 par Projet"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:[(0,r.jsx)("p",{className:"text-sm mb-1",children:"C228 NLT1 (Avant Taxes)"}),(0,r.jsx)("p",{className:"text-xl font-bold",children:o(e.reduce((e,t)=>e+t.prixFermeTotal/4,0))})]}),(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:[(0,r.jsx)("p",{className:"text-sm mb-1",children:"C229 NLT2 (Avant Taxes)"}),(0,r.jsx)("p",{className:"text-xl font-bold",children:o(e.reduce((e,t)=>e+t.prixFermeTotal/4,0))})]}),(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:[(0,r.jsx)("p",{className:"text-sm mb-1",children:"C230 NLT3 (Avant Taxes)"}),(0,r.jsx)("p",{className:"text-xl font-bold",children:o(e.reduce((e,t)=>e+t.prixFermeTotal/4,0))})]}),(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:[(0,r.jsx)("p",{className:"text-sm mb-1",children:"C231 NLT4 (Avant Taxes)"}),(0,r.jsx)("p",{className:"text-xl font-bold",children:o(e.reduce((e,t)=>e+t.prixFermeTotal/4,0))})]}),(0,r.jsxs)("div",{className:"border-t border-white/20 pt-4",children:[(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4 mb-4",children:[(0,r.jsx)("p",{className:"text-sm mb-1",children:"Facturation par Projet"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-white/70",children:"Factur\xe9"}),(0,r.jsx)("p",{className:"font-bold",children:o(u/4)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-white/70",children:"Non factur\xe9"}),(0,r.jsx)("p",{className:"font-bold",children:o((l-u)/4)})]})]})]}),(0,r.jsxs)("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg p-4",children:[(0,r.jsx)("p",{className:"text-sm mb-1",children:"Total Projets (Avant Taxes)"}),(0,r.jsx)("p",{className:"text-2xl font-bold",children:o(l)})]})]})]})]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-4 gap-4",children:[(0,r.jsx)("div",{className:"xl:col-span-3",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[(0,r.jsx)("div",{className:"bg-green-600 text-white p-4",children:(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"3. Tableau de facturation avec taxes"})}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-20",children:"N\xb0 \xc9tape"}),(0,r.jsx)("th",{className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-32",children:"C228 NLT1"}),(0,r.jsx)("th",{className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-32",children:"C229 NLT2"}),(0,r.jsx)("th",{className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-32",children:"C230 NLT3"}),(0,r.jsx)("th",{className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-32",children:"C231 NLT4"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>{let t=1.09975*e.prixFermeTotal/4;return(0,r.jsxs)("tr",{className:"hover:bg-gray-50 ".concat(e.facture?"bg-purple-100 hover:bg-purple-200":""),children:[(0,r.jsx)("td",{className:"px-2 py-2 whitespace-nowrap font-medium text-sm",children:e.numeroEtape}),(0,r.jsx)("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900",children:o(t)}),(0,r.jsx)("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900",children:o(t)}),(0,r.jsx)("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900",children:o(t)}),(0,r.jsx)("td",{className:"px-2 py-2 whitespace-nowrap text-sm text-gray-900",children:o(t)})]},e.id)})})]})})]})}),(0,r.jsx)("div",{className:"xl:col-span-1",children:(0,r.jsxs)("div",{className:"bg-gradient-to-br from-green-600 to-green-800 rounded-lg shadow-lg p-6 text-white sticky top-6",children:[(0,r.jsx)("h3",{className:"text-lg font-bold mb-4 flex items-center",children:"\uD83D\uDCB0 R\xe9sum\xe9 avec Taxes"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:[(0,r.jsx)("p",{className:"text-sm mb-1",children:"C228 NLT1 (Avec Taxes)"}),(0,r.jsx)("p",{className:"text-xl font-bold",children:o(e.reduce((e,t)=>e+1.09975*t.prixFermeTotal/4,0))})]}),(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:[(0,r.jsx)("p",{className:"text-sm mb-1",children:"C229 NLT2 (Avec Taxes)"}),(0,r.jsx)("p",{className:"text-xl font-bold",children:o(e.reduce((e,t)=>e+1.09975*t.prixFermeTotal/4,0))})]}),(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:[(0,r.jsx)("p",{className:"text-sm mb-1",children:"C230 NLT3 (Avec Taxes)"}),(0,r.jsx)("p",{className:"text-xl font-bold",children:o(e.reduce((e,t)=>e+1.09975*t.prixFermeTotal/4,0))})]}),(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4",children:[(0,r.jsx)("p",{className:"text-sm mb-1",children:"C231 NLT4 (Avec Taxes)"}),(0,r.jsx)("p",{className:"text-xl font-bold",children:o(e.reduce((e,t)=>e+1.09975*t.prixFermeTotal/4,0))})]}),(0,r.jsxs)("div",{className:"border-t border-white/20 pt-4",children:[(0,r.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4 mb-4",children:[(0,r.jsx)("p",{className:"text-sm mb-1",children:"Facturation avec Taxes par Projet"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-white/70",children:"Factur\xe9"}),(0,r.jsx)("p",{className:"font-bold",children:o(x/4)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-white/70",children:"Non factur\xe9"}),(0,r.jsx)("p",{className:"font-bold",children:o((m-x)/4)})]})]})]}),(0,r.jsxs)("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg p-4",children:[(0,r.jsx)("p",{className:"text-sm mb-1",children:"Total Projets (Avec Taxes)"}),(0,r.jsx)("p",{className:"text-2xl font-bold",children:o(m)})]})]})]})]})})]})]})}var D=a(2985),R=a(409);function F(){let{milestones:e,dcrs:t,setMilestones:a,setDcrs:i,getDocumentsForItem:c}=(0,R.b)(),[s,o]=(0,n.useState)("milestones"),[l,d]=(0,n.useState)([{id:1,numeroEtape:"#1",noJalon:"J001",dateFacture:"26-12-2019",description:"Milestone #1 PDR - C228",taxe:5,montantFacture:43836215,noFacture:"90067777",pspcClaimNumber:"",montantTTC:46128026,c228:43836215,c229:0,c230:0,c231:0},{id:2,numeroEtape:"#1",noJalon:"J002",dateFacture:"26-12-2019",description:"Milestone #1 PDR - C229",taxe:5,montantFacture:43836215,noFacture:"90067791",pspcClaimNumber:"",montantTTC:46128026,c228:0,c229:43836215,c230:0,c231:0},{id:3,numeroEtape:"#1",noJalon:"J003",dateFacture:"26-12-2019",description:"Milestone #1 PDR - C230",taxe:15,montantFacture:43836215,noFacture:"90067784",pspcClaimNumber:"",montantTTC:50411447,c228:0,c229:0,c230:43836215,c231:0},{id:4,numeroEtape:"#1",noJalon:"J004",dateFacture:"26-12-2019",description:"Milestone #1 PDR - C231",taxe:15,montantFacture:43836215,noFacture:"90067785",pspcClaimNumber:"",montantTTC:50411447,c228:0,c229:0,c230:0,c231:43836215},{id:5,numeroEtape:"#2",noJalon:"J005",dateFacture:"29-05-2020",description:"Milestone #2 CDR - C228",taxe:5,montantFacture:87572721,noFacture:"90060158",pspcClaimNumber:"",montantTTC:91951357,c228:87572721,c229:0,c230:0,c231:0},{id:6,numeroEtape:"#2",noJalon:"J006",dateFacture:"03-06-2020",description:"Milestone #2 CDR - C229",taxe:5,montantFacture:87572721,noFacture:"90060158",pspcClaimNumber:"",montantTTC:91951357,c228:0,c229:87572721,c230:0,c231:0},{id:7,numeroEtape:"#2",noJalon:"J007",dateFacture:"03-06-2020",description:"Milestone #2 CDR - C230",taxe:15,montantFacture:87572721,noFacture:"90060404",pspcClaimNumber:"",montantTTC:100708629,c228:0,c229:0,c230:87572721,c231:0},{id:8,numeroEtape:"#2",noJalon:"J008",dateFacture:"03-06-2020",description:"Milestone #2 CDR - C231",taxe:15,montantFacture:87572721,noFacture:"90060404",pspcClaimNumber:"",montantTTC:100708629,c228:0,c229:0,c230:0,c231:87572721},{id:9,numeroEtape:"#3",noJalon:"J009",dateFacture:"04-06-2019",description:"Milestone #3 Contract financial security - C228",taxe:5,montantFacture:13165625,noFacture:"90041739",pspcClaimNumber:"",montantTTC:13823906,c228:13165625,c229:0,c230:0,c231:0},{id:10,numeroEtape:"#3",noJalon:"J010",dateFacture:"04-06-2019",description:"Milestone #3 Contract financial security - C229",taxe:5,montantFacture:13165625,noFacture:"90041740",pspcClaimNumber:"",montantTTC:13823906,c228:0,c229:13165625,c230:0,c231:0},{id:11,numeroEtape:"#3",noJalon:"J011",dateFacture:"04-06-2019",description:"Milestone #3 Contract financial security - C230",taxe:15,montantFacture:13165625,noFacture:"90071741",pspcClaimNumber:"",montantTTC:15140469,c228:0,c229:0,c230:13165625,c231:0},{id:12,numeroEtape:"#3",noJalon:"J012",dateFacture:"04-06-2019",description:"Milestone #3 Contract financial security - C231",taxe:15,montantFacture:13165625,noFacture:"90071742",pspcClaimNumber:"",montantTTC:15140469,c228:0,c229:0,c230:0,c231:13165625},{id:13,numeroEtape:"#4-a",noJalon:"J013",dateFacture:"04-06-2020",description:"Milestone #4-PO Material - 228",taxe:5,montantFacture:3612512,noFacture:"90060479",pspcClaimNumber:"",montantTTC:3793138,c228:3612512,c229:0,c230:0,c231:0},{id:14,numeroEtape:"#4-a",noJalon:"J014",dateFacture:"04-06-2020",description:"Milestone #4-PO Material - 229",taxe:5,montantFacture:3612512,noFacture:"90060479",pspcClaimNumber:"",montantTTC:3793138,c228:0,c229:3612512,c230:0,c231:0},{id:15,numeroEtape:"#4-a",noJalon:"J015",dateFacture:"04-06-2020",description:"Milestone #4-PO Material - 230",taxe:15,montantFacture:3612512,noFacture:"90060480",pspcClaimNumber:"",montantTTC:4154389,c228:0,c229:0,c230:3612512,c231:0},{id:16,numeroEtape:"#4-a",noJalon:"J016",dateFacture:"04-06-2020",description:"Milestone #4-PO Material - 231",taxe:15,montantFacture:3612512,noFacture:"90060481",pspcClaimNumber:"",montantTTC:4154389,c228:0,c229:0,c230:0,c231:3612512},{id:17,numeroEtape:"#5-a",noJalon:"J017",dateFacture:"04-06-2020",description:"Milestone #5-PO Propulsion - 228",taxe:5,montantFacture:20600987,noFacture:"90060483",pspcClaimNumber:"",montantTTC:21631036,c228:20600987,c229:0,c230:0,c231:0},{id:18,numeroEtape:"#5-a",noJalon:"J018",dateFacture:"04-06-2020",description:"Milestone #5-PO Propulsion - 229",taxe:5,montantFacture:20600987,noFacture:"90060486",pspcClaimNumber:"",montantTTC:21631036,c228:0,c229:20600987,c230:0,c231:0},{id:19,numeroEtape:"#5-a",noJalon:"J019",dateFacture:"04-06-2020",description:"Milestone #5-PO Propulsion - 230",taxe:15,montantFacture:20600987,noFacture:"90060487",pspcClaimNumber:"",montantTTC:23691135,c228:0,c229:0,c230:20600987,c231:0},{id:20,numeroEtape:"#5-a",noJalon:"J020",dateFacture:"04-06-2020",description:"Milestone #5-PO Propulsion - 231",taxe:15,montantFacture:20600987,noFacture:"90060488",pspcClaimNumber:"",montantTTC:23691135,c228:0,c229:0,c230:0,c231:20600987},{id:21,numeroEtape:"#6-a",noJalon:"J021",dateFacture:"04-06-2020",description:"Milestone #6-PO Electrical - 228",taxe:5,montantFacture:44208425,noFacture:"90060489",pspcClaimNumber:"",montantTTC:46418846,c228:44208425,c229:0,c230:0,c231:0},{id:22,numeroEtape:"#6-a",noJalon:"J022",dateFacture:"04-06-2020",description:"Milestone #6-PO Electrical - 229",taxe:5,montantFacture:44208425,noFacture:"90060489",pspcClaimNumber:"",montantTTC:46418846,c228:0,c229:44208425,c230:0,c231:0},{id:23,numeroEtape:"#6-a",noJalon:"J023",dateFacture:"04-06-2020",description:"Milestone #6-PO Electrical - 230",taxe:15,montantFacture:44208425,noFacture:"90060499",pspcClaimNumber:"",montantTTC:50839689,c228:0,c229:0,c230:44208425,c231:0},{id:24,numeroEtape:"#6-a",noJalon:"J024",dateFacture:"04-06-2020",description:"Milestone #6-PO Electrical - 231",taxe:15,montantFacture:44208425,noFacture:"90060500",pspcClaimNumber:"",montantTTC:50839689,c228:0,c229:0,c230:0,c231:44208425},{id:25,numeroEtape:"#12-a",noJalon:"J025",dateFacture:"04-06-2020",description:"Milestone #12-PO Steel - 228",taxe:5,montantFacture:8759e3,noFacture:"90060512",pspcClaimNumber:"",montantTTC:9196950,c228:8759e3,c229:0,c230:0,c231:0},{id:26,numeroEtape:"#12-a",noJalon:"J026",dateFacture:"04-06-2020",description:"Milestone #12-PO Steel - 229",taxe:5,montantFacture:8759e3,noFacture:"90060513",pspcClaimNumber:"",montantTTC:9196950,c228:0,c229:8759e3,c230:0,c231:0},{id:27,numeroEtape:"#12-a",noJalon:"J027",dateFacture:"04-06-2020",description:"Milestone #12-PO Steel - 230",taxe:15,montantFacture:8759e3,noFacture:"90060516",pspcClaimNumber:"",montantTTC:10072850,c228:0,c229:0,c230:8759e3,c231:0},{id:28,numeroEtape:"#12-a",noJalon:"J028",dateFacture:"04-06-2020",description:"Milestone #12-PO Steel - 231",taxe:15,montantFacture:8759e3,noFacture:"90060517",pspcClaimNumber:"",montantTTC:10072850,c228:0,c229:0,c230:0,c231:8759e3},{id:29,numeroEtape:"#14-a",noJalon:"J029",dateFacture:"04-06-2020",description:"Milestone #14-PO Training - 228",taxe:5,montantFacture:342500,noFacture:"90060521",pspcClaimNumber:"",montantTTC:359625,c228:342500,c229:0,c230:0,c231:0},{id:30,numeroEtape:"#14-a",noJalon:"J030",dateFacture:"04-06-2020",description:"Milestone #14-PO Training - 229",taxe:5,montantFacture:342500,noFacture:"90060529",pspcClaimNumber:"",montantTTC:359625,c228:0,c229:342500,c230:0,c231:0},{id:31,numeroEtape:"#14-a",noJalon:"J031",dateFacture:"04-06-2020",description:"Milestone #14-PO Training - 230",taxe:15,montantFacture:342500,noFacture:"90060527",pspcClaimNumber:"",montantTTC:393875,c228:0,c229:0,c230:342500,c231:0},{id:32,numeroEtape:"#14-a",noJalon:"J032",dateFacture:"04-06-2020",description:"Milestone #14-PO Training - 231",taxe:15,montantFacture:342500,noFacture:"90060531",pspcClaimNumber:"",montantTTC:393875,c228:0,c229:0,c230:0,c231:342500},{id:33,numeroEtape:"#15",noJalon:"J033",dateFacture:"27-08-2020",description:"Milestone #15 Delivery of Mat1 - 228",taxe:5,montantFacture:260505050,noFacture:"90064414",pspcClaimNumber:"",montantTTC:273530303,c228:260505050,c229:0,c230:0,c231:0},{id:34,numeroEtape:"#15",noJalon:"J034",dateFacture:"27-08-2020",description:"Milestone #15 Delivery of Mat1 - 229",taxe:5,montantFacture:260505050,noFacture:"90064422",pspcClaimNumber:"",montantTTC:273530303,c228:0,c229:260505050,c230:0,c231:0},{id:35,numeroEtape:"#15",noJalon:"J035",dateFacture:"27-08-2020",description:"Milestone #15 Delivery of Mat1 - 230",taxe:15,montantFacture:260505050,noFacture:"90064424",pspcClaimNumber:"",montantTTC:299580808,c228:0,c229:0,c230:260505050,c231:0},{id:36,numeroEtape:"#15",noJalon:"J036",dateFacture:"27-08-2020",description:"Milestone #15 Delivery of Mat1 - 231",taxe:15,montantFacture:260505050,noFacture:"90064429",pspcClaimNumber:"",montantTTC:299580808,c228:0,c229:0,c230:0,c231:260505050},{id:37,numeroEtape:"#6-b",noJalon:"J037",dateFacture:"2021-05-15",description:"Milestone #6-b Delivery of electrical equipment electronique 228",taxe:5,montantFacture:87720657,noFacture:"90083266",pspcClaimNumber:"",montantTTC:92106690,c228:87720657,c229:0,c230:0,c231:0},{id:38,numeroEtape:"#7",noJalon:"J038",dateFacture:"2021-11-24",description:"Milestone #7 Hull, deck and superstructure enclosed and accepted",taxe:5,montantFacture:219931803,noFacture:"90087901",pspcClaimNumber:"",montantTTC:230928393,c228:219931803,c229:0,c230:0,c231:0},{id:39,numeroEtape:"#6-b",noJalon:"J039",dateFacture:"2022-05-05",description:"Milestone #6-b Delivery of electrical equipment electronique C229",taxe:5,montantFacture:87572721,noFacture:"90090292",pspcClaimNumber:"",montantTTC:91951357,c228:0,c229:87572721,c230:0,c231:0},{id:40,numeroEtape:"#6-b",noJalon:"J040",dateFacture:"2022-05-05",description:"Milestone #6-b Prime Moves installed and accepted by Canada C230",taxe:5,montantFacture:87572721,noFacture:"90090421",pspcClaimNumber:"",montantTTC:91951357,c228:0,c229:0,c230:87572721,c231:0},{id:41,numeroEtape:"#6-b",noJalon:"J041",dateFacture:"2022-05-05",description:"Milestone #6-b Prime Moves installed and accepted by Canada C231",taxe:5,montantFacture:87572721,noFacture:"90090532",pspcClaimNumber:"",montantTTC:91951357,c228:0,c229:0,c230:0,c231:87572721},{id:42,numeroEtape:"#7",noJalon:"J042",dateFacture:"2022-05-05",description:"Milestone #7 Hull, deck and superstructure enclosed and accepted C229",taxe:5,montantFacture:219931803,noFacture:"90090530",pspcClaimNumber:"",montantTTC:230928393,c228:0,c229:219931803,c230:0,c231:0},{id:43,numeroEtape:"#7-b",noJalon:"J043",dateFacture:"2022-05-31",description:"Milestone #7 Prime Moves Alignment",taxe:5,montantFacture:11115e3,noFacture:"90101546",pspcClaimNumber:"",montantTTC:11670750,c228:11115e3,c229:0,c230:0,c231:0},{id:44,numeroEtape:"#8-a",noJalon:"J044",dateFacture:"2022-05-31",description:"Milestone #8 Delivery of Propulsion Machinery test results",taxe:5,montantFacture:10896500,noFacture:"90102558",pspcClaimNumber:"",montantTTC:11441325,c228:10896500,c229:0,c230:0,c231:0},{id:45,numeroEtape:"#8-a",noJalon:"J045",dateFacture:"2022-05-31",description:"Milestone #8-C229",taxe:15,montantFacture:10896500,noFacture:"90102558",pspcClaimNumber:"",montantTTC:12530975,c228:0,c229:10896500,c230:0,c231:0},{id:46,numeroEtape:"#8-a",noJalon:"J046",dateFacture:"2022-10-24",description:"Milestone #8 Delivery of Propulsion Machinery",taxe:15,montantFacture:12514445,noFacture:"90102590",pspcClaimNumber:"",montantTTC:14391612,c228:0,c229:0,c230:12514445,c231:0},{id:47,numeroEtape:"#8-a",noJalon:"J047",dateFacture:"2022-11-04",description:"Milestone #8 Delivery of Electrical Equipment",taxe:15,montantFacture:12514445,noFacture:"90102591",pspcClaimNumber:"",montantTTC:14391612,c228:0,c229:0,c230:0,c231:12514445},{id:48,numeroEtape:"#4-b",noJalon:"J048",dateFacture:"2023-04-27",description:"Milestone #4-b Delivery of propulsion machinery",taxe:15,montantFacture:12614485,noFacture:"90111652",pspcClaimNumber:"",montantTTC:14506658,c228:0,c229:0,c230:12614485,c231:0},{id:49,numeroEtape:"#4-b",noJalon:"J049",dateFacture:"2023-05-02",description:"Milestone #4-b Delivery of Electrical Equipment Software",taxe:15,montantFacture:10031964,noFacture:"90112041",pspcClaimNumber:"",montantTTC:11536759,c228:0,c229:0,c230:0,c231:10031964},{id:50,numeroEtape:"#16-a",noJalon:"J050",dateFacture:"2023-06-17",description:"Milestone #16-C228",taxe:5,montantFacture:10896500,noFacture:"90114217",pspcClaimNumber:"",montantTTC:11441325,c228:10896500,c229:0,c230:0,c231:0},{id:51,numeroEtape:"#16-a",noJalon:"J051",dateFacture:"2023-06-17",description:"Milestone #16-C229",taxe:15,montantFacture:10896500,noFacture:"90114218",pspcClaimNumber:"",montantTTC:12530975,c228:0,c229:10896500,c230:0,c231:0},{id:52,numeroEtape:"#16-a",noJalon:"J052",dateFacture:"2023-06-17",description:"Milestone #16-C230",taxe:15,montantFacture:10896500,noFacture:"90114219",pspcClaimNumber:"",montantTTC:12530975,c228:0,c229:0,c230:10896500,c231:0},{id:53,numeroEtape:"#14-b1",noJalon:"J053",dateFacture:"2024-08-15",description:"Milestone #14-b1 Training Plan including course garments complete",taxe:5,montantFacture:18690952,noFacture:"90142012",pspcClaimNumber:"",montantTTC:19625500,c228:18690952,c229:0,c230:0,c231:0},{id:54,numeroEtape:"#14-b1",noJalon:"J054",dateFacture:"2024-08-15",description:"Milestone #14-b1 Training Plan including course garments complete",taxe:15,montantFacture:18690952,noFacture:"90142018",pspcClaimNumber:"",montantTTC:21494595,c228:0,c229:18690952,c230:0,c231:0},{id:55,numeroEtape:"#14-b1",noJalon:"J055",dateFacture:"2024-08-15",description:"Milestone #14-b1 Training Plan including course garments complete",taxe:15,montantFacture:18690952,noFacture:"90142018",pspcClaimNumber:"",montantTTC:21494595,c228:0,c229:0,c230:18690952,c231:0},{id:56,numeroEtape:"#12-b2",noJalon:"J056",dateFacture:"2024-08-16",description:"Milestone #12-b2 Spares verified by Canada at shipyard before shipment",taxe:5,montantFacture:14074944,noFacture:"90142117",pspcClaimNumber:"",montantTTC:14778691,c228:14074944,c229:0,c230:0,c231:0},{id:57,numeroEtape:"#12-b2",noJalon:"J057",dateFacture:"2024-08-16",description:"Milestone #12-b2 Spares verified by Canada at shipyard before shipment",taxe:5,montantFacture:14074944,noFacture:"90142117",pspcClaimNumber:"",montantTTC:14778691,c228:0,c229:14074944,c230:0,c231:0},{id:58,numeroEtape:"#10-b2",noJalon:"J058",dateFacture:"2024-09-22",description:"Milestone #10-b2 Delivery of ILS Products & Documents",taxe:5,montantFacture:46434563,noFacture:"90142069",pspcClaimNumber:"",montantTTC:48756291,c228:46434563,c229:0,c230:0,c231:0},{id:59,numeroEtape:"#14-b2",noJalon:"J059",dateFacture:"2024-09-25",description:"Milestone #14-b2 Training Complete and accepted by Canada",taxe:5,montantFacture:46234942,noFacture:"90142013",pspcClaimNumber:"",montantTTC:48546689,c228:46234942,c229:0,c230:0,c231:0},{id:60,numeroEtape:"#14-b2",noJalon:"J060",dateFacture:"2024-09-25",description:"Milestone #14-b2 Training Complete and accepted by Canada",taxe:5,montantFacture:46234942,noFacture:"90142013",pspcClaimNumber:"",montantTTC:48546689,c228:0,c229:46234942,c230:0,c231:0},{id:61,numeroEtape:"#2-a",noJalon:"J061",dateFacture:"2024-09-30",description:"Milestone #2-a Trials Complete and accepted by Canada",taxe:5,montantFacture:58750641,noFacture:"90142016",pspcClaimNumber:"",montantTTC:61688173,c228:0,c229:0,c230:58750641,c231:0},{id:62,numeroEtape:"#2-a",noJalon:"J062",dateFacture:"2024-09-30",description:"Milestone #2-a Trials Complete and accepted by Canada",taxe:5,montantFacture:58750641,noFacture:"90142016",pspcClaimNumber:"",montantTTC:61688173,c228:0,c229:0,c230:0,c231:58750641},{id:63,numeroEtape:"#11",noJalon:"J063",dateFacture:"2024-09-30",description:"Milestone #11 Delivery & Delivery & Acceptance",taxe:5,montantFacture:319490250,noFacture:"90144139",pspcClaimNumber:"",montantTTC:335464763,c228:319490250,c229:0,c230:0,c231:0},{id:64,numeroEtape:"#11-2",noJalon:"J064",dateFacture:"2024-09-20",description:"Milestone #11-2 Livraison et acceptation des navires \xe0 leur BFC respective CFR",taxe:5,montantFacture:314800051,noFacture:"90144139",pspcClaimNumber:"",montantTTC:330540054,c228:0,c229:0,c230:314800051,c231:0},{id:65,numeroEtape:"#17",noJalon:"J065",dateFacture:"2024-09-20",description:"Milestone #17 EDA Adjustment",taxe:5,montantFacture:2e8,noFacture:"90144924",pspcClaimNumber:"",montantTTC:21e7,c228:0,c229:2e8,c230:0,c231:0},{id:66,numeroEtape:"#5-1b",noJalon:"J066",dateFacture:"2024-09-20",description:"Milestone #5-1b All Technical Data Package elements delivered and accepted by Canada",taxe:5,montantFacture:59381637,noFacture:"90144183",pspcClaimNumber:"",montantTTC:62350719,c228:0,c229:0,c230:59381637,c231:0},{id:67,numeroEtape:"#5-2b",noJalon:"J067",dateFacture:"2024-09-20",description:"Milestone #5-2b All Technical Data Package elements delivered and accepted by Canada",taxe:5,montantFacture:59381637,noFacture:"90144183",pspcClaimNumber:"",montantTTC:62350719,c228:0,c229:0,c230:0,c231:59381637},{id:68,numeroEtape:"#19-a",noJalon:"J068",dateFacture:"2024-11-13",description:"Milestone #19-a Final delivery to destination of NLT-1 and all correction deliverables completed and accepted by Canada",taxe:5,montantFacture:3e8,noFacture:"90147494",pspcClaimNumber:"",montantTTC:315e6,c228:3e8,c229:0,c230:0,c231:0},{id:69,numeroEtape:"#19-b",noJalon:"J069",dateFacture:"2024-11-13",description:"Milestone #19-b Final delivery to destination of NLT-2 and all correction deliverables completed and accepted by Canada",taxe:5,montantFacture:3e8,noFacture:"90147494",pspcClaimNumber:"",montantTTC:315e6,c228:0,c229:3e8,c230:0,c231:0},{id:70,numeroEtape:"#5-1b",noJalon:"J070",dateFacture:"2024-11-13",description:"Milestone #5-1b Pre-Requisites Complete and accepted by Canada",taxe:5,montantFacture:32958770,noFacture:"90147497",pspcClaimNumber:"",montantTTC:34606709,c228:0,c229:0,c230:32958770,c231:0},{id:71,numeroEtape:"#5-2b",noJalon:"J071",dateFacture:"2024-11-13",description:"Milestone #5-2b Pre-Requisites Complete and accepted by Canada",taxe:5,montantFacture:32958770,noFacture:"90147497",pspcClaimNumber:"",montantTTC:34606709,c228:0,c229:0,c230:0,c231:32958770},{id:72,numeroEtape:"#7-3a",noJalon:"J072",dateFacture:"2024-11-18",description:"Milestone #7-3a Deckhouse Complete and accepted by Canada",taxe:15,montantFacture:0,noFacture:"90149684",pspcClaimNumber:"",montantTTC:0,c228:0,c229:0,c230:0,c231:0},{id:73,numeroEtape:"#7-3a",noJalon:"J073",dateFacture:"2025-01-15",description:"Milestone #7-3a Deckhouse Complete and accepted by Canada",taxe:15,montantFacture:32958771,noFacture:"90151423",pspcClaimNumber:"",montantTTC:37902587,c228:0,c229:0,c230:32958771,c231:0},{id:74,numeroEtape:"#8-3a",noJalon:"J074",dateFacture:"2025-04-04",description:"Milestone #8-3a Propulsion systems installed and accepted by Canada",taxe:14,montantFacture:0,noFacture:"90156947",pspcClaimNumber:"",montantTTC:0,c228:0,c229:0,c230:0,c231:0},{id:75,numeroEtape:"#7-3b",noJalon:"J075",dateFacture:"2025-04-10",description:"Milestone #7-3b Hull enclosed and accepted by Canada",taxe:14,montantFacture:0,noFacture:"90162650",pspcClaimNumber:"",montantTTC:0,c228:0,c229:0,c230:0,c231:0},{id:76,numeroEtape:"#8-3a",noJalon:"J076",dateFacture:"2025-05-05",description:"Milestone #8-3a Prime movers installed and accepted by Canada",taxe:14,montantFacture:87972721,noFacture:"90157565",pspcClaimNumber:"",montantTTC:100268702,c228:0,c229:0,c230:0,c231:87972721},{id:77,numeroEtape:"#7-3b",noJalon:"J077",dateFacture:"2025-05-05",description:"Milestone #7-3b Hull enclosed and accepted by Canada",taxe:14,montantFacture:98999311,noFacture:"90159401",pspcClaimNumber:"",montantTTC:112839175,c228:0,c229:0,c230:0,c231:98999311},{id:78,numeroEtape:"#7-3c",noJalon:"J078",dateFacture:"2025-05-05",description:"Milestone #7-3c Deckhouse and hull assembly complete and accepted by Canada",taxe:14,montantFacture:87972721,noFacture:"90159401",pspcClaimNumber:"",montantTTC:100268702,c228:0,c229:0,c230:0,c231:87972721},{id:79,numeroEtape:"#15b",noJalon:"J079",dateFacture:"2025-06-05",description:"Milestone #15b Loop final delivery to destination of NLT-3 and all commercial deliverables complete and accepted by Canada",taxe:14,montantFacture:14e7,noFacture:"90159401",pspcClaimNumber:"",montantTTC:1596e5,c228:0,c229:0,c230:0,c231:14e7},{id:80,numeroEtape:"#11-1",noJalon:"J080",dateFacture:"2025-06-23",description:"Milestone #11-1 Delivery and Final Acceptance of vessels complete at respective CFR bases Holdback",taxe:5,montantFacture:10395412,noFacture:"90158973",pspcClaimNumber:"",montantTTC:10915183,c228:10395412,c229:0,c230:0,c231:0},{id:81,numeroEtape:"#11-2",noJalon:"J081",dateFacture:"2025-06-23",description:"Milestone #11-2 Delivery and Final Acceptance of vessels complete at respective CFR bases Holdback",taxe:5,montantFacture:15079613,noFacture:"90158978",pspcClaimNumber:"",montantTTC:15833594,c228:0,c229:15079613,c230:0,c231:0}]),[m,p]=(0,n.useState)([{id:1,numeroEtape:"DCR 1",noJalon:"001",dateFacture:"14-01-2021",description:"R\xe9ception pi\xe8ces r\xe9cup\xe9ration C-001 - ENG",dateDCR:"03/12/2019",taxe:5,montant:265e4,noFacture:"FactOF001498",pspcClaimNumber:"38",montantTTC:2799300,ligneSAP:"Err 520",c228:265e4,c229:0,c230:0,c231:0},{id:2,numeroEtape:"DCR 1",noJalon:"002",dateFacture:"05-06-2023",description:"DCR 001-229-R01 (planned 06/2023)",dateDCR:"03/12/2019",taxe:5,montant:1611930,noFacture:"90120496",pspcClaimNumber:"82",montantTTC:1697126,ligneSAP:"Err 520",c228:0,c229:1617730,c230:0,c231:0},{id:3,numeroEtape:"DCR 1",noJalon:"003",dateFacture:"15-11-2023",description:"DCR 001-230-R01 (planned 06/2023)",dateDCR:"03/12/2019",taxe:5,montant:1597365,noFacture:"90127876",pspcClaimNumber:"95",montantTTC:1677170,ligneSAP:"Err 520",c228:0,c229:0,c230:1597365,c231:0},{id:4,numeroEtape:"DCR 1",noJalon:"004",dateFacture:"14-08-2025",description:"DCR 001-230-R01",dateDCR:"03/12/2019",taxe:14,montant:1604125,noFacture:"90183876",pspcClaimNumber:"",montantTTC:1828703,ligneSAP:"",c228:0,c229:0,c230:1604125,c231:0},{id:5,numeroEtape:"DCR 1",noJalon:"005",dateFacture:"",description:"DCR 001-231-R01",dateDCR:"03/12/2019",taxe:14,montant:1604730,noFacture:"",pspcClaimNumber:"",montantTTC:1829392,ligneSAP:"",c228:0,c229:0,c230:0,c231:1604730},{id:6,numeroEtape:"DCR 2",noJalon:"001",dateFacture:"",description:"Emplacement topside et cathodic DCR 002 - ENG Identification \xe9lectrical DCR 002 - ENG",dateDCR:"08/11/2019",taxe:5,montant:0,noFacture:"",pspcClaimNumber:"",montantTTC:0,ligneSAP:"",c228:0,c229:0,c230:0,c231:0},{id:7,numeroEtape:"DCR 2",noJalon:"002",dateFacture:"",description:"DCR 002-229-R01",dateDCR:"08/11/2019",taxe:5,montant:0,noFacture:"",pspcClaimNumber:"",montantTTC:0,ligneSAP:"",c228:0,c229:0,c230:0,c231:0},{id:8,numeroEtape:"DCR 2",noJalon:"003",dateFacture:"",description:"DCR 002-230-R01",dateDCR:"08/11/2019",taxe:14,montant:0,noFacture:"",pspcClaimNumber:"",montantTTC:0,ligneSAP:"",c228:0,c229:0,c230:0,c231:0},{id:9,numeroEtape:"DCR 2",noJalon:"004",dateFacture:"",description:"DCR 002-231-R01",dateDCR:"08/11/2019",taxe:14,montant:0,noFacture:"",pspcClaimNumber:"",montantTTC:0,ligneSAP:"",c228:0,c229:0,c230:0,c231:0},{id:10,numeroEtape:"DCR 3",noJalon:"001",dateFacture:"",description:"DCR 003-228 Bilingual Label Plates",dateDCR:"02/04/2021",taxe:5,montant:0,noFacture:"",pspcClaimNumber:"",montantTTC:0,ligneSAP:"",c228:0,c229:0,c230:0,c231:0},{id:11,numeroEtape:"DCR 3",noJalon:"002",dateFacture:"",description:"DCR 003-229 Bilingual Label Plates",dateDCR:"02/04/2021",taxe:5,montant:0,noFacture:"",pspcClaimNumber:"",montantTTC:0,ligneSAP:"",c228:0,c229:0,c230:0,c231:0},{id:12,numeroEtape:"DCR 3",noJalon:"003",dateFacture:"",description:"DCR 003-230 Bilingual Label Plates",dateDCR:"02/04/2021",taxe:14,montant:0,noFacture:"",pspcClaimNumber:"",montantTTC:0,ligneSAP:"",c228:0,c229:0,c230:0,c231:0},{id:13,numeroEtape:"DCR 3",noJalon:"004",dateFacture:"",description:"DCR 003-231 Bilingual Label Plates",dateDCR:"02/04/2021",taxe:14,montant:0,noFacture:"",pspcClaimNumber:"",montantTTC:0,ligneSAP:"",c228:0,c229:0,c230:0,c231:0},{id:14,numeroEtape:"DCR 4",noJalon:"001",dateFacture:"30-06-2021",description:"D\xe9fense suppl\xe9mentaire sur DCR 004 - ENG Placed suppl\xe9mentDCR 004 - ENG",dateDCR:"17/04/2020",taxe:5,montant:2214e3,noFacture:"90084735",pspcClaimNumber:"40",montantTTC:2324700,ligneSAP:"Err 520",c228:2214e3,c229:0,c230:0,c231:0},{id:15,numeroEtape:"DCR 004",noJalon:"002",dateFacture:"13-06-2023",description:"DCR 004-229-R01 (planned 06/2023)",dateDCR:"17/04/2020",taxe:5,montant:1415700,noFacture:"90096473",pspcClaimNumber:"62",montantTTC:1486485,ligneSAP:"Err 520",c228:0,c229:1415700,c230:0,c231:0},{id:16,numeroEtape:"DCR 004",noJalon:"003",dateFacture:"13-06-2023",description:"DCR 004-230-R01 (planned 06/2023)",dateDCR:"17/04/2020",taxe:5,montant:1372800,noFacture:"90096473",pspcClaimNumber:"62",montantTTC:1441440,ligneSAP:"Err 520",c228:0,c229:0,c230:1372800,c231:0},{id:17,numeroEtape:"DCR 004",noJalon:"004",dateFacture:"",description:"DCR 004-230-R01",dateDCR:"17/04/2020",taxe:14,montant:1378e3,noFacture:"",pspcClaimNumber:"",montantTTC:1570920,ligneSAP:"",c228:0,c229:0,c230:1378e3,c231:0},{id:18,numeroEtape:"DCR 004",noJalon:"005",dateFacture:"",description:"DCR 004-231-R01",dateDCR:"17/04/2020",taxe:14,montant:1378e3,noFacture:"",pspcClaimNumber:"",montantTTC:1570920,ligneSAP:"",c228:0,c229:0,c230:0,c231:1378e3},{id:19,numeroEtape:"DCR 005",noJalon:"001",dateFacture:"",description:"Heated windsDCR 005 - ENG Heated windsDCR 005 - ENG",dateDCR:"31/01/2020",taxe:5,montant:0,noFacture:"",pspcClaimNumber:"",montantTTC:0,ligneSAP:"",c228:0,c229:0,c230:0,c231:0},{id:20,numeroEtape:"DCR 005",noJalon:"002",dateFacture:"",description:"DCR 005-229-R01",dateDCR:"31/01/2020",taxe:5,montant:0,noFacture:"",pspcClaimNumber:"",montantTTC:0,ligneSAP:"",c228:0,c229:0,c230:0,c231:0},{id:21,numeroEtape:"DCR 005",noJalon:"003",dateFacture:"",description:"DCR 005-230-R01",dateDCR:"31/01/2020",taxe:15,montant:0,noFacture:"",pspcClaimNumber:"",montantTTC:0,ligneSAP:"",c228:0,c229:0,c230:0,c231:0},{id:22,numeroEtape:"DCR 005",noJalon:"004",dateFacture:"",description:"DCR 005-231-R01",dateDCR:"31/01/2020",taxe:15,montant:0,noFacture:"",pspcClaimNumber:"",montantTTC:0,ligneSAP:"",c228:0,c229:0,c230:0,c231:0},{id:23,numeroEtape:"DCR 006",noJalon:"001",dateFacture:"01-07-2021",description:"Tie-down DCR 006-ENG-R01 Tie-down DCR 006-ENG-R01",dateDCR:"18/11/2019",taxe:5,montant:91e4,noFacture:"90077717",pspcClaimNumber:"41",montantTTC:955500,ligneSAP:"Err 520",c228:91e4,c229:0,c230:0,c231:0},{id:24,numeroEtape:"DCR 006",noJalon:"002",dateFacture:"26-05-2022",description:"DCR 006-229-R01 (planned 10/2021)",dateDCR:"01/06/2020",taxe:5,montant:5497e3,noFacture:"90095522",pspcClaimNumber:"55",montantTTC:5771850,ligneSAP:"Err 520",c228:0,c229:5497e3,c230:0,c231:0},{id:25,numeroEtape:"DCR 006",noJalon:"003",dateFacture:"26-05-2022",description:"DCR 006-230-R01 (planned 02/2022)",dateDCR:"01/06/2020",taxe:5,montant:4977300,noFacture:"90095522",pspcClaimNumber:"55",montantTTC:5226165,ligneSAP:"Err 520",c228:0,c229:0,c230:4977300,c231:0},{id:26,numeroEtape:"DCR 006",noJalon:"004",dateFacture:"14-08-2025",description:"DCR 006-230-R01",dateDCR:"01/06/2020",taxe:14,montant:4877300,noFacture:"90183886",pspcClaimNumber:"",montantTTC:5580122,ligneSAP:"Err 520",c228:0,c229:0,c230:4877300,c231:0},{id:27,numeroEtape:"DCR 006",noJalon:"005",dateFacture:"",description:"DCR 006-231-R01",dateDCR:"01/06/2020",taxe:14,montant:4877300,noFacture:"",pspcClaimNumber:"",montantTTC:5560122,ligneSAP:"",c228:0,c229:0,c230:0,c231:4877300},{id:28,numeroEtape:"DCR 007",noJalon:"001",dateFacture:"06-10-2021",description:"NBFT isolationDCR 007-ENG-R01 NBFT isolationDCR 007-ENG-R01",dateDCR:"08/04/2020",taxe:5,montant:154e4,noFacture:"90084185",pspcClaimNumber:"48",montantTTC:1617e3,ligneSAP:"Err 520",c228:154e4,c229:0,c230:0,c231:0},{id:29,numeroEtape:"DCR 007",noJalon:"002",dateFacture:"01-12-2023",description:"DCR 007-229-R01 (planned 04/2022)",dateDCR:"08/04/2020",taxe:5,montant:2707900,noFacture:"90128041",pspcClaimNumber:"93",montantTTC:2843295,ligneSAP:"Err 520",c228:0,c229:2707900,c230:0,c231:0},{id:30,numeroEtape:"DCR 007",noJalon:"003",dateFacture:"01-12-2023",description:"DCR 007-229-R01 (planned 06/2023)",dateDCR:"08/04/2020",taxe:5,montant:2278880,noFacture:"90128048",pspcClaimNumber:"94",montantTTC:2392824,ligneSAP:"Err 520",c228:0,c229:0,c230:2278880,c231:0},{id:31,numeroEtape:"DCR 007",noJalon:"004",dateFacture:"",description:"DCR 007-230-R01",dateDCR:"08/04/2020",taxe:14,montant:2278880,noFacture:"",pspcClaimNumber:"",montantTTC:2598037,ligneSAP:"",c228:0,c229:0,c230:2278880,c231:0},{id:32,numeroEtape:"DCR 007",noJalon:"005",dateFacture:"",description:"DCR 007-231-R01",dateDCR:"08/04/2020",taxe:14,montant:2278880,noFacture:"",pspcClaimNumber:"",montantTTC:2598037,ligneSAP:"",c228:0,c229:0,c230:0,c231:2278880},{id:33,numeroEtape:"DCR 008",noJalon:"001",dateFacture:"30-07-2021",description:"Emergency escape routes DCR 008-ENG Procedures pr\xe9determin\xe9es DCR 008-ENG",dateDCR:"09/04/2020",taxe:5,montant:156e4,noFacture:"90079313",pspcClaimNumber:"42",montantTTC:1638e3,ligneSAP:"Err 520",c228:156e4,c229:0,c230:0,c231:0},{id:34,numeroEtape:"DCR 008",noJalon:"002",dateFacture:"13-10-2023",description:"DCR 008-229-R01 (planned 04/2022)",dateDCR:"09/04/2020",taxe:5,montant:5756400,noFacture:"90124914",pspcClaimNumber:"87",montantTTC:6044220,ligneSAP:"Err 520",c228:0,c229:5756400,c230:0,c231:0},{id:35,numeroEtape:"DCR 008",noJalon:"003",dateFacture:"24-10-2023",description:"DCR 008-230-R01 (planned 06/2022)",dateDCR:"09/04/2020",taxe:5,montant:4637720,noFacture:"90125550",pspcClaimNumber:"90",montantTTC:4869606,ligneSAP:"Err 520",c228:0,c229:0,c230:4637720,c231:0},{id:36,numeroEtape:"DCR 008",noJalon:"004",dateFacture:"",description:"DCR 008-230-R01",dateDCR:"09/04/2020",taxe:14,montant:4637720,noFacture:"",pspcClaimNumber:"",montantTTC:5287001,ligneSAP:"",c228:0,c229:0,c230:4637720,c231:0},{id:37,numeroEtape:"DCR 008",noJalon:"005",dateFacture:"",description:"DCR 008-231-R01",dateDCR:"09/04/2020",taxe:14,montant:4637720,noFacture:"",pspcClaimNumber:"",montantTTC:5287001,ligneSAP:"",c228:0,c229:0,c230:0,c231:4637720},{id:38,numeroEtape:"DCR 009",noJalon:"001",dateFacture:"14-06-2022",description:"Space heatersDCR 009-ENG-R01",dateDCR:"09/04/2020",taxe:5,montant:2785320,noFacture:"90096585",pspcClaimNumber:"64",montantTTC:2924586,ligneSAP:"Err 520",c228:2785320,c229:0,c230:0,c231:0},{id:39,numeroEtape:"DCR 009",noJalon:"002",dateFacture:"14-06-2022",description:"DCR 009-229-R01",dateDCR:"09/04/2020",taxe:5,montant:9762760,noFacture:"90096585",pspcClaimNumber:"64",montantTTC:10250898,ligneSAP:"Err 520",c228:0,c229:9762760,c230:0,c231:0},{id:40,numeroEtape:"DCR 009",noJalon:"003",dateFacture:"06-11-2023",description:"DCR 009-230-R01",dateDCR:"09/04/2020",taxe:5,montant:8921440,noFacture:"90126508",pspcClaimNumber:"92",montantTTC:9367512,ligneSAP:"Err 520",c228:0,c229:0,c230:8921440,c231:0},{id:41,numeroEtape:"DCR 009",noJalon:"004",dateFacture:"",description:"DCR 009-230-R01",dateDCR:"09/04/2020",taxe:14,montant:8970540,noFacture:"",pspcClaimNumber:"",montantTTC:10226416,ligneSAP:"",c228:0,c229:0,c230:8970540,c231:0},{id:42,numeroEtape:"DCR 009",noJalon:"005",dateFacture:"",description:"DCR 009-231-R01",dateDCR:"09/04/2020",taxe:14,montant:8970540,noFacture:"",pspcClaimNumber:"",montantTTC:10226416,ligneSAP:"",c228:0,c229:0,c230:0,c231:8970540},{id:43,numeroEtape:"DCR 010",noJalon:"001",dateFacture:"",description:"Switchboard equipment install DCR 010-228-R01 Switchboard equipment install DCR 010-228-R01",dateDCR:"03/12/2019",taxe:5,montant:0,noFacture:"",pspcClaimNumber:"",montantTTC:0,ligneSAP:"",c228:0,c229:0,c230:0,c231:0},{id:44,numeroEtape:"DCR 010",noJalon:"002",dateFacture:"",description:"DCR 010-229-R01",dateDCR:"03/12/2019",taxe:5,montant:0,noFacture:"",pspcClaimNumber:"",montantTTC:0,ligneSAP:"",c228:0,c229:0,c230:0,c231:0},{id:45,numeroEtape:"DCR 010",noJalon:"003",dateFacture:"",description:"DCR 010-230-R01",dateDCR:"03/12/2019",taxe:15,montant:0,noFacture:"",pspcClaimNumber:"",montantTTC:0,ligneSAP:"",c228:0,c229:0,c230:0,c231:0},{id:46,numeroEtape:"DCR 010",noJalon:"004",dateFacture:"",description:"DCR 010-231-R01",dateDCR:"03/12/2019",taxe:15,montant:0,noFacture:"",pspcClaimNumber:"",montantTTC:0,ligneSAP:"",c228:0,c229:0,c230:0,c231:0},{id:47,numeroEtape:"DCR 011",noJalon:"001",dateFacture:"30-07-2021",description:"DCR 011-ENG-A4G connexions in steel power",dateDCR:"09/04/2020",taxe:5,montant:273e4,noFacture:"90080573",pspcClaimNumber:"43",montantTTC:2866500,ligneSAP:"Err 520",c228:273e4,c229:0,c230:0,c231:0},{id:48,numeroEtape:"DCR 011",noJalon:"002",dateFacture:"13-06-2023",description:"DCR 011-229-R01 (planned 04/2022)",dateDCR:"09/04/2020",taxe:5,montant:1677830,noFacture:"90124915",pspcClaimNumber:"88",montantTTC:1761722,ligneSAP:"Err 520",c228:0,c229:1677830,c230:0,c231:0},{id:49,numeroEtape:"DCR 011",noJalon:"003",dateFacture:"13-06-2023",description:"DCR 011-230-R01 (planned 06/2022)",dateDCR:"09/04/2020",taxe:5,montant:1365820,noFacture:"90124915",pspcClaimNumber:"89",montantTTC:1434111,ligneSAP:"Err 520",c228:0,c229:0,c230:1365820,c231:0},{id:50,numeroEtape:"DCR 011",noJalon:"004",dateFacture:"",description:"DCR 011-230-R01",dateDCR:"09/04/2020",taxe:14,montant:1392810,noFacture:"",pspcClaimNumber:"",montantTTC:1587803,ligneSAP:"",c228:0,c229:0,c230:1392810,c231:0},{id:51,numeroEtape:"DCR 011",noJalon:"005",dateFacture:"",description:"DCR 011-231-R01",dateDCR:"09/04/2020",taxe:14,montant:1392810,noFacture:"",pspcClaimNumber:"",montantTTC:1587803,ligneSAP:"",c228:0,c229:0,c230:0,c231:1392810},{id:52,numeroEtape:"DCR 012",noJalon:"001",dateFacture:"",description:"Master equipment listDCR 012-0115-R02 Master equipment listDCR 012-0915-R02",dateDCR:"",taxe:0,montant:0,noFacture:"",pspcClaimNumber:"",montantTTC:0,ligneSAP:"",c228:0,c229:0,c230:0,c231:0},{id:53,numeroEtape:"DCR 012",noJalon:"002",dateFacture:"21-07-2021",description:"Review comment in French comDCR 013-ENG Review comment in Z-drive geaDCR 013-ENG",dateDCR:"27/11/2019",taxe:5,montant:7e5,noFacture:"90080383",pspcClaimNumber:"44",montantTTC:735e3,ligneSAP:"Err 520",c228:7e5,c229:0,c230:0,c231:0},{id:54,numeroEtape:"DCR 013",noJalon:"001",dateFacture:"05-11-2023",description:"DCR 013-229-R02 (planned 06/2022)",dateDCR:"27/11/2019",taxe:5,montant:883550,noFacture:"90126231",pspcClaimNumber:"91",montantTTC:927728,ligneSAP:"Err 520",c228:0,c229:883550,c230:0,c231:0},{id:55,numeroEtape:"DCR 013",noJalon:"002",dateFacture:"30-11-2023",description:"DCR 013-230-R02 (planned 06/2022)",dateDCR:"27/11/2019",taxe:5,montant:804200,noFacture:"90127389",pspcClaimNumber:"96",montantTTC:844410,ligneSAP:"Err 520",c228:0,c229:0,c230:804200,c231:0},{id:56,numeroEtape:"DCR 013",noJalon:"003",dateFacture:"",description:"DCR 013-230-R02",dateDCR:"27/11/2019",taxe:14,montant:804200,noFacture:"",pspcClaimNumber:"",montantTTC:916788,ligneSAP:"",c228:0,c229:0,c230:804200,c231:0},{id:57,numeroEtape:"DCR 013",noJalon:"004",dateFacture:"",description:"DCR 013-231-R02",dateDCR:"27/11/2019",taxe:14,montant:804200,noFacture:"",pspcClaimNumber:"",montantTTC:916788,ligneSAP:"",c228:0,c229:0,c230:0,c231:804200},{id:58,numeroEtape:"DCR 014",noJalon:"001",dateFacture:"21-07-2021",description:"Laundry equipment DCR 014-ENG Laundry equipment DCR 014-ENG",dateDCR:"26/11/2019",taxe:5,montant:518e3,noFacture:"90080386",pspcClaimNumber:"45",montantTTC:543900,ligneSAP:"Err 520",c228:518e3,c229:0,c230:0,c231:0},{id:59,numeroEtape:"DCR 014",noJalon:"002",dateFacture:"27-07-2023",description:"DCR 014-229-R03 (planned 06/2022)",dateDCR:"26/11/2019",taxe:5,montant:1876730,noFacture:"90120494",pspcClaimNumber:"83",montantTTC:1970567,ligneSAP:"Err 520",c228:0,c229:1876730,c230:0,c231:0},{id:60,numeroEtape:"DCR 014",noJalon:"003",dateFacture:"18-12-2023",description:"DCR 014-230-R03 (planned 06/2022)",dateDCR:"26/11/2019",taxe:5,montant:1684130,noFacture:"90128561",pspcClaimNumber:"98",montantTTC:1768337,ligneSAP:"Err 520",c228:0,c229:0,c230:1684130,c231:0},{id:61,numeroEtape:"DCR 014",noJalon:"004",dateFacture:"",description:"DCR 014-230-R03",dateDCR:"26/11/2019",taxe:14,montant:1684130,noFacture:"",pspcClaimNumber:"",montantTTC:1919928,ligneSAP:"",c228:0,c229:0,c230:1684130,c231:0},{id:62,numeroEtape:"DCR 014",noJalon:"005",dateFacture:"",description:"DCR 014-231-R03",dateDCR:"26/11/2019",taxe:14,montant:1684130,noFacture:"",pspcClaimNumber:"",montantTTC:1919928,ligneSAP:"",c228:0,c229:0,c230:0,c231:1684130},{id:63,numeroEtape:"DCR 015",noJalon:"001",dateFacture:"01-07-2021",description:"External light maintenance DCR 015-ENG External light maintenance DCR 015-ENG",dateDCR:"26/11/2019",taxe:5,montant:394e3,noFacture:"90080418",pspcClaimNumber:"46",montantTTC:413700,ligneSAP:"Err 520",c228:394e3,c229:0,c230:0,c231:0},{id:64,numeroEtape:"DCR 015",noJalon:"002",dateFacture:"15-06-2022",description:"DCR 015-229-R04 (planned 06/2022)",dateDCR:"26/11/2019",taxe:5,montant:1231e3,noFacture:"90120637",pspcClaimNumber:"84",montantTTC:1292550,ligneSAP:"Err 520",c228:0,c229:1231e3,c230:0,c231:0},{id:65,numeroEtape:"DCR 015",noJalon:"003",dateFacture:"30-11-2023",description:"DCR 015-230-R04 (planned 06/2022)",dateDCR:"26/11/2019",taxe:5,montant:1120200,noFacture:"90127935",pspcClaimNumber:"97",montantTTC:1176210,ligneSAP:"Err 520",c228:0,c229:0,c230:1120200,c231:0},{id:66,numeroEtape:"DCR 015",noJalon:"004",dateFacture:"",description:"DCR 015-230-R04",dateDCR:"26/11/2019",taxe:14,montant:1092200,noFacture:"",pspcClaimNumber:"",montantTTC:1245108,ligneSAP:"",c228:0,c229:0,c230:1092200,c231:0},{id:67,numeroEtape:"DCR 015",noJalon:"005",dateFacture:"",description:"DCR 015-231-R04",dateDCR:"26/11/2019",taxe:14,montant:1092200,noFacture:"",pspcClaimNumber:"",montantTTC:1245108,ligneSAP:"",c228:0,c229:0,c230:0,c231:1092200},{id:68,numeroEtape:"DCR 016",noJalon:"001",dateFacture:"01-01-2021",description:"Deck crane upgrade - Engineering cost DCR 016-ENG Deck crane upgrade - Engineering cost DCR 016-ENG",dateDCR:"26/11/2019",taxe:5,montant:189e4,noFacture:"Fact90071498",pspcClaimNumber:"38",montantTTC:1984500,ligneSAP:"Err 520",c228:189e4,c229:0,c230:0,c231:0},{id:69,numeroEtape:"DCR 016",noJalon:"002",dateFacture:"",description:"DCR 016-229 (planned 06/2022)",dateDCR:"26/11/2019",taxe:5,montant:2823032,noFacture:"90120540",pspcClaimNumber:"85",montantTTC:2964184,ligneSAP:"Err 520",c228:0,c229:2823032,c230:0,c231:0},{id:70,numeroEtape:"DCR 016",noJalon:"003",dateFacture:"18-12-2023",description:"DCR 016-230 (planned 06/2022)",dateDCR:"26/11/2019",taxe:5,montant:2679112,noFacture:"90128568",pspcClaimNumber:"99",montantTTC:2813068,ligneSAP:"Err 520",c228:0,c229:0,c230:2679112,c231:0},{id:71,numeroEtape:"DCR 016",noJalon:"004",dateFacture:"",description:"DCR 016-230",dateDCR:"26/11/2019",taxe:14,montant:2679112,noFacture:"",pspcClaimNumber:"",montantTTC:3054188,ligneSAP:"",c228:0,c229:0,c230:2679112,c231:0},{id:72,numeroEtape:"DCR 016",noJalon:"005",dateFacture:"",description:"DCR 016-231",dateDCR:"26/11/2019",taxe:14,montant:2679112,noFacture:"",pspcClaimNumber:"",montantTTC:3054188,ligneSAP:"",c228:0,c229:0,c230:0,c231:2679112},{id:73,numeroEtape:"DCR 017",noJalon:"001",dateFacture:"26-05-2021",description:"DCR 017-ENG EARLY ORDER OF MATERIAL ASSESSMENT DCR 017-ENG EARLY ORDER OF MATERIAL ASSESSMENT",dateDCR:"15/06/2020",taxe:5,montant:6818e3,noFacture:"90071521",pspcClaimNumber:"39",montantTTC:7158900,ligneSAP:"Err 520",c228:6818e3,c229:0,c230:0,c231:0},{id:74,numeroEtape:"DCR 017",noJalon:"002",dateFacture:"24-05-2022",description:"DCR 017-229",dateDCR:"01/06/2020",taxe:5,montant:13433365,noFacture:"90095405",pspcClaimNumber:"54",montantTTC:14105034,ligneSAP:"Err 520",c228:0,c229:13433365,c230:0,c231:0},{id:75,numeroEtape:"DCR 017",noJalon:"003",dateFacture:"24-05-2022",description:"DCR 017-230",dateDCR:"01/06/2020",taxe:5,montant:14995842,noFacture:"90095405",pspcClaimNumber:"54",montantTTC:15745634,ligneSAP:"Err 520",c228:0,c229:0,c230:14995842,c231:0},{id:76,numeroEtape:"DCR 018",noJalon:"001",dateFacture:"",description:"COVID - 229, 230 - montant insuffisant fin period mai 2022",dateDCR:"2020-11-16",taxe:0,montant:0,noFacture:"",pspcClaimNumber:"",montantTTC:0,ligneSAP:"",c228:0,c229:0,c230:0,c231:0},{id:77,numeroEtape:"DCR 018",noJalon:"002",dateFacture:"17-03-2022",description:"P\xe9riode du 16 novembre au 31 mars 2021",dateDCR:"2021-12-17",taxe:5,montant:12550066,noFacture:"90092124",pspcClaimNumber:"51",montantTTC:13177569,ligneSAP:"Err 520",c228:0,c229:12550066,c230:0,c231:0},{id:78,numeroEtape:"DCR 018",noJalon:"003",dateFacture:"17-03-2022",description:"P\xe9riode du 1 avril au 28 f\xe9vrier 2022",dateDCR:"2022-03-17",taxe:5,montant:40007711,noFacture:"90092124",pspcClaimNumber:"51",montantTTC:42008097,ligneSAP:"Err 520",c228:0,c229:0,c230:40007711,c231:0},{id:79,numeroEtape:"DCR 018",noJalon:"004",dateFacture:"13-04-2022",description:"P\xe9riode mars 2022",dateDCR:"2022-04-13",taxe:5,montant:6128717,noFacture:"90093414",pspcClaimNumber:"52",montantTTC:6435153,ligneSAP:"Err 520",c228:0,c229:0,c230:6128717,c231:0},{id:80,numeroEtape:"DCR 018",noJalon:"005",dateFacture:"19-05-2022",description:"P\xe9riode avril 2022",dateDCR:"2022-05-19",taxe:5,montant:7465220,noFacture:"90095278",pspcClaimNumber:"53",montantTTC:7838481,ligneSAP:"Err 520",c228:0,c229:0,c230:7465220,c231:0},{id:81,numeroEtape:"DCR 018",noJalon:"006",dateFacture:"26-05-2022",description:"P\xe9riode mai 2022",dateDCR:"2022-05-26",taxe:5,montant:5733065,noFacture:"90095535",pspcClaimNumber:"56",montantTTC:6019718,ligneSAP:"Err 520",c228:0,c229:0,c230:5733065,c231:0},{id:82,numeroEtape:"DCR 020",noJalon:"001",dateFacture:"",description:"DCR 020 COVID-19 Subcontractor Cost Assistance 336233.75 Jusqua 1 M$",dateDCR:"2022-01-20",taxe:5,montant:0,noFacture:"",pspcClaimNumber:"",montantTTC:0,ligneSAP:"",c228:0,c229:0,c230:0,c231:0},{id:83,numeroEtape:"DCR 020",noJalon:"002",dateFacture:"23-08-2022",description:"Janvier \xe0 mars",dateDCR:"2022-01-20",taxe:5,montant:97727216,noFacture:"90098775",pspcClaimNumber:"67",montantTTC:102613577,ligneSAP:"Err 520",c228:0,c229:0,c230:97727216,c231:0},{id:84,numeroEtape:"DCR 020",noJalon:"003",dateFacture:"27-10-2022",description:"Avril \xe0 juillet",dateDCR:"2022-01-20",taxe:5,montant:149278645,noFacture:"90104432",pspcClaimNumber:"73",montantTTC:156742577,ligneSAP:"Err 520",c228:0,c229:0,c230:149278645,c231:0},{id:85,numeroEtape:"DCR 020",noJalon:"004",dateFacture:"10-11-2022",description:"Juillet",dateDCR:"2022-01-20",taxe:5,montant:48530591,noFacture:"90105532",pspcClaimNumber:"75",montantTTC:50957121,ligneSAP:"Err 520",c228:0,c229:0,c230:48530591,c231:0},{id:86,numeroEtape:"DCR 020",noJalon:"005",dateFacture:"15-12-2022",description:"Ao\xfbt",dateDCR:"2022-01-20",taxe:5,montant:56034125,noFacture:"90107784",pspcClaimNumber:"76",montantTTC:58835831,ligneSAP:"Err 520",c228:0,c229:0,c230:56034125,c231:0},{id:87,numeroEtape:"DCR-221",noJalon:"001",dateFacture:"",description:"Early Delivery NLT3 and NLT4",dateDCR:"2023-04-11",taxe:0,montant:0,noFacture:"",pspcClaimNumber:"",montantTTC:0,ligneSAP:"",c228:0,c229:0,c230:0,c231:0},{id:88,numeroEtape:"DCR-21",noJalon:"4528",dateFacture:"17-01-2025",description:"Transportation to Equipment C-228",dateDCR:"05-06-2023",taxe:5,montant:53497777,noFacture:"90131504",pspcClaimNumber:"127",montantTTC:56172666,ligneSAP:"Err 520",c228:53497777,c229:0,c230:0,c231:0},{id:89,numeroEtape:"DCR-21",noJalon:"4529",dateFacture:"17-01-2025",description:"Transportation to Equipment C-229",dateDCR:"05-06-2023",taxe:5,montant:53497777,noFacture:"90131504",pspcClaimNumber:"127",montantTTC:56172666,ligneSAP:"Err 520",c228:0,c229:53497777,c230:0,c231:0},{id:90,numeroEtape:"DCR-22",noJalon:"3504",dateFacture:"",description:"Technical Data Partitioning according CSP-01",dateDCR:"22-07-2022",taxe:5,montant:462e3,noFacture:"90130356",pspcClaimNumber:"103",montantTTC:485100,ligneSAP:"",c228:0,c229:0,c230:0,c231:462e3},{id:91,numeroEtape:"DCR-23",noJalon:"",dateFacture:"14-01-2021",description:"Cooler training to subcontractor DCR 025-ENG-R01 Cooler training to subcontractor DCR 025-ENG-R01",dateDCR:"18/11/2019",taxe:5,montant:184e4,noFacture:"Fact90071498",pspcClaimNumber:"38",montantTTC:1932e3,ligneSAP:"Err 520",c228:184e4,c229:0,c230:0,c231:0},{id:92,numeroEtape:"DCR-23",noJalon:"",dateFacture:"02-06-2023",description:"DCR-025-229 (planned 10/2021)",dateDCR:"01/06/2020",taxe:5,montant:10350166,noFacture:"90096665",pspcClaimNumber:"58",montantTTC:10867674,ligneSAP:"Err 520",c228:0,c229:10350166,c230:0,c231:0},{id:93,numeroEtape:"DCR-23",noJalon:"",dateFacture:"02-06-2022",description:"DCR-025-230 (planned 02/2022)",dateDCR:"01/06/2020",taxe:5,montant:9599834,noFacture:"90096665",pspcClaimNumber:"58",montantTTC:10079826,ligneSAP:"Err 520",c228:0,c229:0,c230:9599834,c231:0},{id:94,numeroEtape:"DCR-23",noJalon:"",dateFacture:"",description:"DCR-025-230",dateDCR:"01/06/2020",taxe:14,montant:8959834,noFacture:"",pspcClaimNumber:"",montantTTC:10214111,ligneSAP:"",c228:0,c229:0,c230:8959834,c231:0},{id:95,numeroEtape:"DCR-23",noJalon:"",dateFacture:"",description:"DCR-025-231",dateDCR:"01/06/2020",taxe:14,montant:10350166,noFacture:"",pspcClaimNumber:"",montantTTC:11799189,ligneSAP:"",c228:0,c229:0,c230:0,c231:10350166},{id:96,numeroEtape:"DCR-24",noJalon:"",dateFacture:"",description:"DCR-026 Relocation and sizing of bollards",dateDCR:"",taxe:0,montant:0,noFacture:"",pspcClaimNumber:"",montantTTC:0,ligneSAP:"",c228:0,c229:0,c230:0,c231:0},{id:97,numeroEtape:"DCR-25",noJalon:"",dateFacture:"26-05-2021",description:"DCR 027-ENG Gear waste treatment capabilities DCR 027-ENG Gear waste treatment capabilities",dateDCR:"09/12/2019",taxe:5,montant:1477e3,noFacture:"Fact90071498",pspcClaimNumber:"38",montantTTC:1550850,ligneSAP:"Err 520",c228:1477e3,c229:0,c230:0,c231:0},{id:98,numeroEtape:"DCR-25",noJalon:"",dateFacture:"20-07-2022",description:"DCR-027-229",dateDCR:"09/12/2019",taxe:5,montant:4497618,noFacture:"90098706",pspcClaimNumber:"66",montantTTC:4722499,ligneSAP:"Err 520",c228:0,c229:4497618,c230:0,c231:0},{id:99,numeroEtape:"DCR-25",noJalon:"",dateFacture:"07-12-2023",description:"DCR-027-230",dateDCR:"09/12/2019",taxe:5,montant:4036013,noFacture:"90128412",pspcClaimNumber:"100",montantTTC:4237814,ligneSAP:"Err 520",c228:0,c229:0,c230:4036013,c231:0},{id:100,numeroEtape:"DCR-25",noJalon:"",dateFacture:"",description:"DCR-027-230",dateDCR:"09/12/2019",taxe:14,montant:4036013,noFacture:"",pspcClaimNumber:"",montantTTC:4601055,ligneSAP:"",c228:0,c229:0,c230:4036013,c231:0},{id:101,numeroEtape:"DCR-25",noJalon:"",dateFacture:"",description:"DCR-027-231",dateDCR:"09/12/2019",taxe:14,montant:4036013,noFacture:"",pspcClaimNumber:"",montantTTC:4601055,ligneSAP:"",c228:0,c229:0,c230:0,c231:4036013},{id:102,numeroEtape:"DCR-26",noJalon:"",dateFacture:"17-01-2025",description:"DCR-028 Winches Upgrade C-228",dateDCR:"19-06-2023",taxe:5,montant:50586134,noFacture:"90131572",pspcClaimNumber:"128",montantTTC:53115441,ligneSAP:"Err 520",c228:50586134,c229:0,c230:0,c231:0},{id:103,numeroEtape:"DCR-26",noJalon:"",dateFacture:"17-01-2025",description:"DCR-028 Winches Upgrade C-229",dateDCR:"19-06-2023",taxe:5,montant:45717948,noFacture:"90131573",pspcClaimNumber:"129",montantTTC:48003845,ligneSAP:"Err 520",c228:0,c229:45717948,c230:0,c231:0},{id:104,numeroEtape:"DCR-26",noJalon:"",dateFacture:"",description:"DCR-028 Winches Upgrade C-230",dateDCR:"19-06-2023",taxe:14,montant:89607110,noFacture:"",pspcClaimNumber:"",montantTTC:102152105,ligneSAP:"",c228:0,c229:0,c230:89607110,c231:0},{id:105,numeroEtape:"DCR-26",noJalon:"",dateFacture:"",description:"DCR-028 Winches Upgrade C-231",dateDCR:"19-06-2023",taxe:14,montant:97381339,noFacture:"",pspcClaimNumber:"",montantTTC:110994726,ligneSAP:"",c228:0,c229:0,c230:0,c231:97381339},{id:106,numeroEtape:"DCR-27",noJalon:"",dateFacture:"",description:"DCR-029 Z-Drive Maintenance C-228",dateDCR:"",taxe:5,montant:0,noFacture:"",pspcClaimNumber:"",montantTTC:0,ligneSAP:"",c228:0,c229:0,c230:0,c231:0},{id:107,numeroEtape:"DCR-27",noJalon:"",dateFacture:"",description:"DCR-029 Z-Drive Maintenance C-229",dateDCR:"",taxe:5,montant:0,noFacture:"",pspcClaimNumber:"",montantTTC:0,ligneSAP:"",c228:0,c229:0,c230:0,c231:0},{id:108,numeroEtape:"DCR-28",noJalon:"",dateFacture:"",description:"DCR-030 Subcontractor cost",dateDCR:"",taxe:5,montant:0,noFacture:"",pspcClaimNumber:"",montantTTC:0,ligneSAP:"",c228:0,c229:0,c230:0,c231:0},{id:109,numeroEtape:"DCR-29",noJalon:"",dateFacture:"",description:"DCR-031 NLT Extension",dateDCR:"",taxe:5,montant:0,noFacture:"",pspcClaimNumber:"",montantTTC:0,ligneSAP:"",c228:0,c229:0,c230:0,c231:0},{id:110,numeroEtape:"DCR-30",noJalon:"",dateFacture:"",description:"DCR-032 Modification of Chart Table C-230",dateDCR:"",taxe:14,montant:1055840,noFacture:"",pspcClaimNumber:"",montantTTC:1203658,ligneSAP:"",c228:0,c229:0,c230:1055840,c231:0},{id:111,numeroEtape:"DCR-30",noJalon:"",dateFacture:"",description:"DCR-032 Modification of Chart Table C-231",dateDCR:"",taxe:14,montant:711327,noFacture:"",pspcClaimNumber:"",montantTTC:810472,ligneSAP:"",c228:0,c229:0,c230:0,c231:711327},{id:112,numeroEtape:"DCR-31",noJalon:"",dateFacture:"",description:"DCR-033 Bilge Wells in UT C-230",dateDCR:"",taxe:14,montant:1431630,noFacture:"",pspcClaimNumber:"",montantTTC:1632058,ligneSAP:"",c228:0,c229:0,c230:1431630,c231:0},{id:113,numeroEtape:"DCR-31",noJalon:"",dateFacture:"",description:"DCR-033 Bilge Wells in UT C-231",dateDCR:"",taxe:14,montant:1317820,noFacture:"",pspcClaimNumber:"",montantTTC:1502115,ligneSAP:"",c228:0,c229:0,c230:0,c231:1317820},{id:114,numeroEtape:"DCR-32",noJalon:"",dateFacture:"03-12-2024",description:"DCR-034 Change Hatch in UT C-230",dateDCR:"",taxe:14,montant:3293091,noFacture:"",pspcClaimNumber:"",montantTTC:3754124,ligneSAP:"",c228:0,c229:0,c230:3293091,c231:0},{id:115,numeroEtape:"DCR-32",noJalon:"",dateFacture:"03-12-2024",description:"DCR-034 Change Hatch in UT C-231",dateDCR:"",taxe:14,montant:1482024,noFacture:"",pspcClaimNumber:"",montantTTC:1689507,ligneSAP:"",c228:0,c229:0,c230:0,c231:1482024},{id:116,numeroEtape:"DCR-33",noJalon:"",dateFacture:"",description:"DCR-035 Magnetic compass sonde C-230",dateDCR:"",taxe:14,montant:719459,noFacture:"",pspcClaimNumber:"",montantTTC:820183,ligneSAP:"",c228:0,c229:0,c230:719459,c231:0},{id:117,numeroEtape:"DCR-33",noJalon:"",dateFacture:"",description:"DCR-035 Magnetic compass sonde C-231",dateDCR:"",taxe:14,montant:719459,noFacture:"",pspcClaimNumber:"",montantTTC:820183,ligneSAP:"",c228:0,c229:0,c230:0,c231:719459},{id:118,numeroEtape:"DCR-34",noJalon:"",dateFacture:"",description:"DCR-036 ECDIS Battery backup C-230",dateDCR:"",taxe:14,montant:1533067,noFacture:"",pspcClaimNumber:"",montantTTC:1747696,ligneSAP:"",c228:0,c229:0,c230:1533067,c231:0},{id:119,numeroEtape:"DCR-34",noJalon:"",dateFacture:"",description:"DCR-036 ECDIS Battery backup C-231",dateDCR:"",taxe:14,montant:856264,noFacture:"",pspcClaimNumber:"",montantTTC:976141,ligneSAP:"",c228:0,c229:0,c230:0,c231:856264},{id:120,numeroEtape:"DCR-35",noJalon:"",dateFacture:"",description:"DCR-037 Fender modification C-230",dateDCR:"",taxe:14,montant:0,noFacture:"90157543",pspcClaimNumber:"132",montantTTC:0,ligneSAP:"",c228:0,c229:0,c230:0,c231:0},{id:121,numeroEtape:"DCR-35",noJalon:"4696",dateFacture:"06-05-2025",description:"DCR-037 Fender modification C-230",dateDCR:"",taxe:14,montant:790300,noFacture:"90157382",pspcClaimNumber:"135",montantTTC:900542,ligneSAP:"Err 520",c228:0,c229:0,c230:790300,c231:0},{id:122,numeroEtape:"DCR-35",noJalon:"",dateFacture:"",description:"DCR-037 Fender modification C-231",dateDCR:"",taxe:14,montant:296500,noFacture:"",pspcClaimNumber:"",montantTTC:338010,ligneSAP:"",c228:0,c229:0,c230:0,c231:296500},{id:123,numeroEtape:"DCR-36",noJalon:"",dateFacture:"",description:"DCR-38 Change of Shelves C-230",dateDCR:"",taxe:14,montant:815300,noFacture:"",pspcClaimNumber:"",montantTTC:929670,ligneSAP:"",c228:0,c229:0,c230:815300,c231:0},{id:124,numeroEtape:"DCR-37",noJalon:"",dateFacture:"",description:"DCR-38 Change of Shelves C-231",dateDCR:"",taxe:14,montant:744400,noFacture:"",pspcClaimNumber:"",montantTTC:848616,ligneSAP:"",c228:0,c229:0,c230:0,c231:744400},{id:125,numeroEtape:"DCR-38",noJalon:"",dateFacture:"09-05-2025",description:"DCR-39 Additional charge C-230",dateDCR:"",taxe:14,montant:1591562,noFacture:"",pspcClaimNumber:"",montantTTC:1814381,ligneSAP:"",c228:0,c229:0,c230:1591562,c231:0},{id:126,numeroEtape:"DCR-39",noJalon:"",dateFacture:"09-05-2025",description:"DCR-39 Additional charge C-231",dateDCR:"",taxe:14,montant:2444069,noFacture:"",pspcClaimNumber:"",montantTTC:2786239,ligneSAP:"",c228:0,c229:0,c230:0,c231:2444069},{id:127,numeroEtape:"DCR-40",noJalon:"",dateFacture:"23-06-2025",description:"DCR-40 Laptop for remote service C-230",dateDCR:"",taxe:14,montant:1383600,noFacture:"",pspcClaimNumber:"",montantTTC:1577304,ligneSAP:"",c228:0,c229:0,c230:1383600,c231:0},{id:128,numeroEtape:"DCR-41",noJalon:"",dateFacture:"23-06-2025",description:"DCR-40 Laptop for remote service C-231",dateDCR:"",taxe:14,montant:1116200,noFacture:"",pspcClaimNumber:"",montantTTC:1272668,ligneSAP:"",c228:0,c229:0,c230:0,c231:1116200},{id:129,numeroEtape:"DCR-42",noJalon:"",dateFacture:"09-08-2025",description:"DCR-43 New breathing air compressor C-230",dateDCR:"",taxe:14,montant:4391085,noFacture:"",pspcClaimNumber:"",montantTTC:5005837,ligneSAP:"",c228:0,c229:0,c230:4391085,c231:0},{id:130,numeroEtape:"DCR-42",noJalon:"",dateFacture:"09-08-2025",description:"DCR-43 New breathing air compressor C-231",dateDCR:"",taxe:14,montant:3283026,noFacture:"",pspcClaimNumber:"",montantTTC:3742650,ligneSAP:"",c228:0,c229:0,c230:0,c231:3283026},{id:131,numeroEtape:"DCR-43",noJalon:"",dateFacture:"19-08-2025",description:"DCR-44 New TV Satellite antenna C-230",dateDCR:"",taxe:14,montant:2923821,noFacture:"",pspcClaimNumber:"",montantTTC:3333156,ligneSAP:"",c228:0,c229:0,c230:2923821,c231:0},{id:132,numeroEtape:"DCR-44",noJalon:"",dateFacture:"19-08-2025",description:"DCR-44 New TV Satellite antenna C-231",dateDCR:"",taxe:14,montant:1573609,noFacture:"",pspcClaimNumber:"",montantTTC:1793914,ligneSAP:"",c228:0,c229:0,c230:0,c231:1573609}]);(0,n.useEffect)(()=>{let e=l.map(e=>({id:e.id.toString(),numeroEtape:e.numeroEtape,description:e.description,montant:e.montantFacture,dateEcheance:new Date,statut:e.noFacture?"Factur\xe9":"En attente",numeroFacture:e.noFacture,dateFacturation:e.dateFacture?new Date(e.dateFacture):void 0})),t=m.map(e=>({id:e.id.toString(),numeroEtape:e.numeroEtape,description:e.description,montant:e.montant,dateEcheance:new Date,statut:e.noFacture?"Factur\xe9":"En attente",numeroFacture:e.noFacture,dateFacturation:e.dateFacture?new Date(e.dateFacture):void 0}));a(e),i(t)},[l,m,a,i]);let u=e=>new Intl.NumberFormat("fr-CA",{style:"currency",currency:"CAD",minimumFractionDigits:2}).format(e),x=e=>e&&""!==e.trim(),g=e=>{let t=e.description&&""!==e.description.trim(),a=e.dateFacture&&""!==e.dateFacture.trim(),r=!("montant"in e)||null!==e.montant&&void 0!==e.montant,n=!("taxe"in e)||null!==e.taxe&&void 0!==e.taxe;return x(e.noFacture)?t&&a&&r&&n:t&&r&&n},b=e=>{let t="border-b border-gray-200 hover:bg-gray-50",a=x(e.noFacture),r=g(e);return a?"".concat(t," bg-purple-100 hover:bg-purple-150"):r?t:"".concat(t," bg-yellow-100 hover:bg-yellow-150 border-yellow-300")},h=(e,t,a)=>{d(r=>r.map(r=>{if(r.id===e){let e={...r,[t]:a};return("montantFacture"===t||"taxe"===t)&&(e.montantTTC=e.montantFacture*(1+e.taxe/100)),e}return r}))},C=e=>{d(t=>t.filter(t=>t.id!==e))},N=(e,t,a)=>{p(r=>r.map(r=>{if(r.id===e){let e={...r,[t]:a};return("montant"===t||"taxe"===t)&&(e.montantTTC=e.montant*(1+e.taxe/100)),e}return r}))},y=e=>{p(t=>t.filter(t=>t.id!==e))},j=()=>{let e=l.reduce((e,t)=>e+t.montantFacture,0),t=l.reduce((e,t)=>e+t.montantTTC,0),a=l.reduce((e,t)=>e+t.c228,0);return{montantFacture:e,montantTTC:t,c228:a,c229:l.reduce((e,t)=>e+t.c229,0),c230:l.reduce((e,t)=>e+t.c230,0),c231:l.reduce((e,t)=>e+t.c231,0)}},f=()=>{let e=m.reduce((e,t)=>e+t.montant,0),t=m.reduce((e,t)=>e+t.montantTTC,0),a=m.reduce((e,t)=>e+t.c228,0);return{montantFacture:e,montantTTC:t,c228:a,c229:m.reduce((e,t)=>e+t.c229,0),c230:m.reduce((e,t)=>e+t.c230,0),c231:m.reduce((e,t)=>e+t.c231,0)}},T=l.reduce((e,t)=>e+t.montantFacture,0),F=m.reduce((e,t)=>e+t.montant,0),v=T+F,w=l.reduce((e,t)=>e+t.montantTTC,0)+m.reduce((e,t)=>e+t.montantTTC,0),A={c228:l.reduce((e,t)=>e+t.c228,0)+m.reduce((e,t)=>e+t.c228,0),c229:l.reduce((e,t)=>e+t.c229,0)+m.reduce((e,t)=>e+t.c229,0),c230:l.reduce((e,t)=>e+t.c230,0)+m.reduce((e,t)=>e+t.c230,0),c231:l.reduce((e,t)=>e+t.c231,0)+m.reduce((e,t)=>e+t.c231,0)};return(0,r.jsxs)("div",{className:"w-full space-y-6",children:[(0,r.jsx)("div",{className:"border-b border-gray-200",children:(0,r.jsx)("nav",{className:"-mb-px flex space-x-8",children:[{id:"milestones",label:"Registre Milestones",icon:"\uD83D\uDCCB"},{id:"dcr",label:"Registre DCR",icon:"\uD83D\uDCCA"},{id:"bilan",label:"Bilan de Facturation",icon:"\uD83D\uDCB0"},{id:"kpi",label:"Indicateurs Cl\xe9s",icon:"\uD83D\uDCC8"}].map(e=>(0,r.jsx)("button",{onClick:()=>o(e.id),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat(s===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:(0,r.jsxs)("span",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{children:e.icon}),e.label]})},e.id))})}),"milestones"===s&&(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-800 text-white p-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold flex items-center",children:"\uD83D\uDCCB Registre des Milestones"}),(0,r.jsx)("p",{className:"mt-2 text-blue-100",children:"Gestion des facturations par jalons de projets"})]}),(0,r.jsxs)("div",{className:"bg-gray-50 p-4 border-b",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"L\xe9gende:"}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-4 text-xs",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-4 h-4 bg-purple-100 border border-purple-200 mr-2 rounded"}),(0,r.jsx)("span",{className:"text-gray-600",children:"Factur\xe9 (avec n\xb0 de facture)"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-4 h-4 bg-white border border-gray-200 mr-2 rounded"}),(0,r.jsx)("span",{className:"text-gray-600",children:"Non factur\xe9"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-4 h-4 bg-yellow-100 border border-yellow-300 mr-2 rounded"}),(0,r.jsx)("span",{className:"text-gray-600",children:"⚠️ Donn\xe9es incompl\xe8tes"})]})]})]}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"# de l'\xe9tape"}),(0,r.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"No Jalon"}),(0,r.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date Facture"}),(0,r.jsx)("th",{className:"px-6 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider min-w-[500px]",children:"Description"}),(0,r.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Taxe"}),(0,r.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider min-w-[140px]",children:"Montant Factur\xe9"}),(0,r.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"No. Facture"}),(0,r.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"PSPC Claim #"}),(0,r.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider min-w-[120px]",children:"Montant TTC"}),(0,r.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider min-w-[100px]",children:"C-228"}),(0,r.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider min-w-[100px]",children:"C-229"}),(0,r.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider min-w-[100px]",children:"C-230"}),(0,r.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider min-w-[100px]",children:"C-231"}),(0,r.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Documents"}),(0,r.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(e=>(0,r.jsxs)("tr",{className:b(e),children:[(0,r.jsx)("td",{className:"px-2 py-2 whitespace-nowrap",children:(0,r.jsx)("input",{type:"text",value:e.numeroEtape,onChange:t=>h(e.id,"numeroEtape",t.target.value),className:"w-16 text-xs border border-gray-300 rounded px-2 py-1",placeholder:"001"})}),(0,r.jsx)("td",{className:"px-2 py-2 whitespace-nowrap",children:(0,r.jsx)("input",{type:"text",value:e.noJalon,onChange:t=>h(e.id,"noJalon",t.target.value),className:"w-20 text-xs border border-gray-300 rounded px-2 py-1",placeholder:"J###"})}),(0,r.jsx)("td",{className:"px-2 py-2 whitespace-nowrap",children:(0,r.jsx)("input",{type:"text",value:e.dateFacture,onChange:t=>h(e.id,"dateFacture",t.target.value),className:"w-24 text-xs border border-gray-300 rounded px-2 py-1",placeholder:"YYYY-MM-DD"})}),(0,r.jsx)("td",{className:"px-4 py-2",children:(0,r.jsx)("input",{type:"text",value:e.description,onChange:t=>h(e.id,"description",t.target.value),className:"w-full text-sm border border-gray-300 rounded px-3 py-1",placeholder:"Description d\xe9taill\xe9e du jalon..."})}),(0,r.jsx)("td",{className:"px-2 py-2 whitespace-nowrap",children:(0,r.jsx)("input",{type:"number",value:e.taxe,onChange:t=>h(e.id,"taxe",parseFloat(t.target.value)||0),className:"w-16 text-xs border border-gray-300 rounded px-2 py-1",min:"0",max:"100",placeholder:"5"})}),(0,r.jsx)("td",{className:"px-2 py-2 whitespace-nowrap",children:(0,r.jsx)("input",{type:"number",value:e.montantFacture,onChange:t=>h(e.id,"montantFacture",parseFloat(t.target.value)||0),className:"w-32 text-xs border border-gray-300 rounded px-2 py-1",step:"0.01",placeholder:"0.00"})}),(0,r.jsx)("td",{className:"px-2 py-2 whitespace-nowrap",children:(0,r.jsx)("input",{type:"text",value:e.noFacture,onChange:t=>h(e.id,"noFacture",t.target.value),className:"w-24 text-xs border border-gray-300 rounded px-2 py-1",placeholder:"OF-###"})}),(0,r.jsx)("td",{className:"px-2 py-2 whitespace-nowrap",children:(0,r.jsx)("input",{type:"text",value:e.pspcClaimNumber,onChange:t=>h(e.id,"pspcClaimNumber",t.target.value),className:"w-24 text-xs border border-gray-300 rounded px-2 py-1",placeholder:"PSPC-###"})}),(0,r.jsx)("td",{className:"px-2 py-2 whitespace-nowrap",children:(0,r.jsx)("span",{className:"text-sm font-medium text-green-600",children:u(e.montantTTC)})}),(0,r.jsx)("td",{className:"px-2 py-2 whitespace-nowrap",children:(0,r.jsx)("input",{type:"number",value:e.c228,onChange:t=>h(e.id,"c228",parseFloat(t.target.value)||0),className:"w-24 text-xs border border-gray-300 rounded px-2 py-1",step:"0.01",placeholder:"0.00"})}),(0,r.jsx)("td",{className:"px-2 py-2 whitespace-nowrap",children:(0,r.jsx)("input",{type:"number",value:e.c229,onChange:t=>h(e.id,"c229",parseFloat(t.target.value)||0),className:"w-24 text-xs border border-gray-300 rounded px-2 py-1",step:"0.01",placeholder:"0.00"})}),(0,r.jsx)("td",{className:"px-2 py-2 whitespace-nowrap",children:(0,r.jsx)("input",{type:"number",value:e.c230,onChange:t=>h(e.id,"c230",parseFloat(t.target.value)||0),className:"w-24 text-xs border border-gray-300 rounded px-2 py-1",step:"0.01",placeholder:"0.00"})}),(0,r.jsx)("td",{className:"px-2 py-2 whitespace-nowrap",children:(0,r.jsx)("input",{type:"number",value:e.c231,onChange:t=>h(e.id,"c231",parseFloat(t.target.value)||0),className:"w-24 text-xs border border-gray-300 rounded px-2 py-1",step:"0.01",placeholder:"0.00"})}),(0,r.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,r.jsxs)("button",{onClick:()=>{let t=new CustomEvent("openDocumentFolder",{detail:{type:"milestone",id:e.id,name:"".concat(e.numeroEtape," - ").concat(e.description)}});window.dispatchEvent(t)},className:"flex items-center text-blue-600 hover:text-blue-900 text-sm bg-blue-50 hover:bg-blue-100 px-2 py-1 rounded",title:"Voir les documents",children:[(0,r.jsx)(D.Z,{className:"w-4 h-4 mr-1"}),(0,r.jsx)("span",{className:"text-xs",children:"Docs"}),(0,r.jsx)("span",{className:"ml-1 bg-blue-200 text-blue-800 text-xs rounded-full px-1",children:c("milestone",e.id.toString()).length})]})}),(0,r.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,r.jsx)("button",{onClick:()=>C(e.id),className:"text-red-600 hover:text-red-900 text-sm",children:"\uD83D\uDDD1️"})})]},e.id))})]})}),(0,r.jsx)("div",{className:"p-6 bg-gray-50 border-t",children:(0,r.jsx)("button",{onClick:()=>{let e={id:Math.max(...l.map(e=>e.id),0)+1,numeroEtape:"",noJalon:"",dateFacture:"",description:"",taxe:5,montantFacture:0,noFacture:"",pspcClaimNumber:"",montantTTC:0,c228:0,c229:0,c230:0,c231:0};d(t=>[...t,e])},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium flex items-center gap-2",children:"➕ Ajouter un Milestone"})}),(0,r.jsxs)("div",{className:"bg-blue-50 border-t-2 border-blue-200 p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-blue-800 mb-4 flex items-center",children:"\uD83D\uDCCA Totaux du Registre Milestones"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-blue-200",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"Montant Factur\xe9"}),(0,r.jsx)("p",{className:"text-lg font-bold text-blue-600",children:u(j().montantFacture)})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-blue-200",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"Montant TTC"}),(0,r.jsx)("p",{className:"text-lg font-bold text-green-600",children:u(j().montantTTC)})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-blue-200",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"Total C-228"}),(0,r.jsx)("p",{className:"text-lg font-bold text-blue-700",children:u(j().c228)})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-blue-200",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"Total C-229"}),(0,r.jsx)("p",{className:"text-lg font-bold text-purple-600",children:u(j().c229)})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-blue-200",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"Total C-230"}),(0,r.jsx)("p",{className:"text-lg font-bold text-green-700",children:u(j().c230)})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-blue-200",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"Total C-231"}),(0,r.jsx)("p",{className:"text-lg font-bold text-orange-600",children:u(j().c231)})]})]})]})]}),"dcr"===s&&(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-r from-orange-600 to-orange-800 text-white p-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold flex items-center",children:"\uD83D\uDCCA Registre des DCR"}),(0,r.jsx)("p",{className:"mt-2 text-orange-100",children:"Gestion des Demandes de Changement et R\xe9clamations"})]}),(0,r.jsxs)("div",{className:"bg-gray-50 p-4 border-b",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"L\xe9gende:"}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-4 text-xs",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-4 h-4 bg-purple-100 border border-purple-200 mr-2 rounded"}),(0,r.jsx)("span",{className:"text-gray-600",children:"Factur\xe9 (avec n\xb0 de facture)"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-4 h-4 bg-white border border-gray-200 mr-2 rounded"}),(0,r.jsx)("span",{className:"text-gray-600",children:"Non factur\xe9"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-4 h-4 bg-yellow-100 border border-yellow-300 mr-2 rounded"}),(0,r.jsx)("span",{className:"text-gray-600",children:"⚠️ Donn\xe9es incompl\xe8tes"})]})]})]}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"# de l'\xe9tape"}),(0,r.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"No Jalon"}),(0,r.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date Facture"}),(0,r.jsx)("th",{className:"px-6 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider min-w-[500px]",children:"Description"}),(0,r.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date DCR"}),(0,r.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Taxe"}),(0,r.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider min-w-[140px]",children:"Montant"}),(0,r.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"No. Facture"}),(0,r.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"PSPC Enrg #"}),(0,r.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider min-w-[120px]",children:"Montant TTC"}),(0,r.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ligne SAP"}),(0,r.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider min-w-[100px]",children:"C-228"}),(0,r.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider min-w-[100px]",children:"C-229"}),(0,r.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider min-w-[100px]",children:"C-230"}),(0,r.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider min-w-[100px]",children:"C-231"}),(0,r.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Documents"}),(0,r.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map(e=>(0,r.jsxs)("tr",{className:b(e),children:[(0,r.jsx)("td",{className:"px-2 py-2 whitespace-nowrap",children:(0,r.jsx)("input",{type:"text",value:e.numeroEtape,onChange:t=>N(e.id,"numeroEtape",t.target.value),className:"w-16 text-xs border border-gray-300 rounded px-2 py-1",placeholder:"001"})}),(0,r.jsx)("td",{className:"px-2 py-2 whitespace-nowrap",children:(0,r.jsx)("input",{type:"text",value:e.noJalon,onChange:t=>N(e.id,"noJalon",t.target.value),className:"w-20 text-xs border border-gray-300 rounded px-2 py-1",placeholder:"J###"})}),(0,r.jsx)("td",{className:"px-2 py-2 whitespace-nowrap",children:(0,r.jsx)("input",{type:"text",value:e.dateFacture,onChange:t=>N(e.id,"dateFacture",t.target.value),className:"w-24 text-xs border border-gray-300 rounded px-2 py-1",placeholder:"YYYY-MM-DD"})}),(0,r.jsx)("td",{className:"px-4 py-2",children:(0,r.jsx)("input",{type:"text",value:e.description,onChange:t=>N(e.id,"description",t.target.value),className:"w-full text-sm border border-gray-300 rounded px-3 py-1",placeholder:"Description d\xe9taill\xe9e du DCR..."})}),(0,r.jsx)("td",{className:"px-2 py-2 whitespace-nowrap",children:(0,r.jsx)("input",{type:"text",value:e.dateDCR,onChange:t=>N(e.id,"dateDCR",t.target.value),className:"w-24 text-xs border border-gray-300 rounded px-2 py-1",placeholder:"DD/MM/YYYY"})}),(0,r.jsx)("td",{className:"px-2 py-2 whitespace-nowrap",children:(0,r.jsx)("input",{type:"number",value:e.taxe,onChange:t=>N(e.id,"taxe",parseFloat(t.target.value)||0),className:"w-16 text-xs border border-gray-300 rounded px-2 py-1",min:"0",max:"100",placeholder:"5"})}),(0,r.jsx)("td",{className:"px-2 py-2 whitespace-nowrap",children:(0,r.jsx)("input",{type:"number",value:e.montant,onChange:t=>N(e.id,"montant",parseFloat(t.target.value)||0),className:"w-32 text-xs border border-gray-300 rounded px-2 py-1",step:"0.01",placeholder:"0.00"})}),(0,r.jsx)("td",{className:"px-2 py-2 whitespace-nowrap",children:(0,r.jsx)("input",{type:"text",value:e.noFacture,onChange:t=>N(e.id,"noFacture",t.target.value),className:"w-24 text-xs border border-gray-300 rounded px-2 py-1",placeholder:"OF-###"})}),(0,r.jsx)("td",{className:"px-2 py-2 whitespace-nowrap",children:(0,r.jsx)("input",{type:"text",value:e.pspcClaimNumber,onChange:t=>N(e.id,"pspcClaimNumber",t.target.value),className:"w-24 text-xs border border-gray-300 rounded px-2 py-1",placeholder:"PSPC-###"})}),(0,r.jsx)("td",{className:"px-2 py-2 whitespace-nowrap",children:(0,r.jsx)("span",{className:"text-sm font-medium text-green-600",children:u(e.montantTTC)})}),(0,r.jsx)("td",{className:"px-2 py-2 whitespace-nowrap",children:(0,r.jsx)("input",{type:"text",value:e.ligneSAP,onChange:t=>N(e.id,"ligneSAP",t.target.value),className:"w-20 text-xs border border-gray-300 rounded px-2 py-1",placeholder:"SAP-###"})}),(0,r.jsx)("td",{className:"px-2 py-2 whitespace-nowrap",children:(0,r.jsx)("input",{type:"number",value:e.c228,onChange:t=>N(e.id,"c228",parseFloat(t.target.value)||0),className:"w-24 text-xs border border-gray-300 rounded px-2 py-1",step:"0.01",placeholder:"0.00"})}),(0,r.jsx)("td",{className:"px-2 py-2 whitespace-nowrap",children:(0,r.jsx)("input",{type:"number",value:e.c229,onChange:t=>N(e.id,"c229",parseFloat(t.target.value)||0),className:"w-24 text-xs border border-gray-300 rounded px-2 py-1",step:"0.01",placeholder:"0.00"})}),(0,r.jsx)("td",{className:"px-2 py-2 whitespace-nowrap",children:(0,r.jsx)("input",{type:"number",value:e.c230,onChange:t=>N(e.id,"c230",parseFloat(t.target.value)||0),className:"w-24 text-xs border border-gray-300 rounded px-2 py-1",step:"0.01",placeholder:"0.00"})}),(0,r.jsx)("td",{className:"px-2 py-2 whitespace-nowrap",children:(0,r.jsx)("input",{type:"number",value:e.c231,onChange:t=>N(e.id,"c231",parseFloat(t.target.value)||0),className:"w-24 text-xs border border-gray-300 rounded px-2 py-1",step:"0.01",placeholder:"0.00"})}),(0,r.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,r.jsxs)("button",{onClick:()=>{let t=new CustomEvent("openDocumentFolder",{detail:{type:"dcr",id:e.id,name:"".concat(e.numeroEtape," - ").concat(e.description)}});window.dispatchEvent(t)},className:"flex items-center text-orange-600 hover:text-orange-900 text-sm bg-orange-50 hover:bg-orange-100 px-2 py-1 rounded",title:"Voir les documents",children:[(0,r.jsx)(D.Z,{className:"w-4 h-4 mr-1"}),(0,r.jsx)("span",{className:"text-xs",children:"Docs"}),(0,r.jsx)("span",{className:"ml-1 bg-orange-200 text-orange-800 text-xs rounded-full px-1",children:c("dcr",e.id.toString()).length})]})}),(0,r.jsx)("td",{className:"px-3 py-2 whitespace-nowrap",children:(0,r.jsx)("button",{onClick:()=>y(e.id),className:"text-red-600 hover:text-red-900 text-sm",children:"\uD83D\uDDD1️"})})]},e.id))})]})}),(0,r.jsx)("div",{className:"p-6 bg-gray-50 border-t",children:(0,r.jsx)("button",{onClick:()=>{let e={id:Math.max(...m.map(e=>e.id),0)+1,numeroEtape:"",noJalon:"",dateFacture:"",description:"",dateDCR:"",taxe:5,montant:0,noFacture:"",pspcClaimNumber:"",montantTTC:0,ligneSAP:"",c228:0,c229:0,c230:0,c231:0};p(t=>[...t,e])},className:"bg-orange-600 hover:bg-orange-700 text-white px-4 py-2 rounded-md text-sm font-medium flex items-center gap-2",children:"➕ Ajouter un DCR"})}),(0,r.jsxs)("div",{className:"bg-orange-50 border-t-2 border-orange-200 p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-orange-800 mb-4 flex items-center",children:"\uD83D\uDCCA Totaux du Registre DCR"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-orange-200",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"Montant Factur\xe9"}),(0,r.jsx)("p",{className:"text-lg font-bold text-orange-600",children:u(f().montantFacture)})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-orange-200",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"Montant TTC"}),(0,r.jsx)("p",{className:"text-lg font-bold text-green-600",children:u(f().montantTTC)})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-orange-200",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"Total C-228"}),(0,r.jsx)("p",{className:"text-lg font-bold text-blue-700",children:u(f().c228)})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-orange-200",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"Total C-229"}),(0,r.jsx)("p",{className:"text-lg font-bold text-purple-600",children:u(f().c229)})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-orange-200",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"Total C-230"}),(0,r.jsx)("p",{className:"text-lg font-bold text-green-700",children:u(f().c230)})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-orange-200",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"Total C-231"}),(0,r.jsx)("p",{className:"text-lg font-bold text-orange-700",children:u(f().c231)})]})]})]})]}),"bilan"===s&&(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-r from-green-600 to-green-800 text-white p-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold flex items-center",children:"\uD83D\uDCB0 Bilan de Facturation"}),(0,r.jsx)("p",{className:"mt-2 text-green-100",children:"Synth\xe8se financi\xe8re des projets Ocean Factory"})]}),(0,r.jsxs)("div",{className:"p-6 space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-blue-800",children:"Total Milestones"}),(0,r.jsx)("p",{className:"text-xl font-bold text-blue-900",children:u(T)})]}),(0,r.jsxs)("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-orange-800",children:"Total DCR"}),(0,r.jsx)("p",{className:"text-xl font-bold text-orange-900",children:u(F)})]}),(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-800",children:"Total HT"}),(0,r.jsx)("p",{className:"text-xl font-bold text-gray-900",children:u(v)})]}),(0,r.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-green-800",children:"Total TTC"}),(0,r.jsx)("p",{className:"text-xl font-bold text-green-900",children:u(w)})]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"R\xe9partition par Projet"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"C-228 NLT1"}),(0,r.jsx)("p",{className:"text-lg font-bold text-blue-600",children:u(A.c228)})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"C-229 NLT2"}),(0,r.jsx)("p",{className:"text-lg font-bold text-purple-600",children:u(A.c229)})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"C-230 NLT3"}),(0,r.jsx)("p",{className:"text-lg font-bold text-green-600",children:u(A.c230)})]}),(0,r.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-700",children:"C-231 NLT4"}),(0,r.jsx)("p",{className:"text-lg font-bold text-orange-600",children:u(A.c231)})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-r from-indigo-600 to-indigo-800 text-white p-4",children:[(0,r.jsx)("h3",{className:"text-lg font-bold",children:"\uD83D\uDCCA Tableau de R\xe9sultats D\xe9taill\xe9s"}),(0,r.jsx)("p",{className:"text-indigo-100 text-sm mt-1",children:"Analyse financi\xe8re compl\xe8te par projet"})]}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 text-xs",children:[(0,r.jsx)("thead",{className:"bg-blue-600 text-white",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-2 py-2 text-left font-medium",children:"Date de lecture"}),(0,r.jsx)("th",{className:"px-2 py-2 text-left font-medium min-w-[300px]",children:"Description"}),(0,r.jsx)("th",{className:"px-2 py-2 text-left font-medium",children:"Date Facture"}),(0,r.jsx)("th",{className:"px-2 py-2 text-left font-medium",children:"Taxe"}),(0,r.jsx)("th",{className:"px-2 py-2 text-left font-medium min-w-[120px]",children:"Montant factur\xe9"}),(0,r.jsx)("th",{className:"px-2 py-2 text-left font-medium",children:"No. Facture"}),(0,r.jsx)("th",{className:"px-2 py-2 text-left font-medium",children:"PSPC Enrg #"}),(0,r.jsx)("th",{className:"px-2 py-2 text-left font-medium min-w-[120px]",children:"Montant TTC"}),(0,r.jsx)("th",{className:"px-2 py-2 text-left font-medium",children:"Montant en extra"}),(0,r.jsx)("th",{className:"px-2 py-2 text-left font-medium",children:"Ligne SAP"}),(0,r.jsx)("th",{className:"px-2 py-2 text-left font-medium min-w-[100px]",children:"C-228"}),(0,r.jsx)("th",{className:"px-2 py-2 text-left font-medium min-w-[100px]",children:"C-229"}),(0,r.jsx)("th",{className:"px-2 py-2 text-left font-medium min-w-[100px]",children:"C-230"}),(0,r.jsx)("th",{className:"px-2 py-2 text-left font-medium min-w-[100px]",children:"C-231"})]})}),(0,r.jsxs)("tbody",{className:"bg-white divide-y divide-gray-200",children:[(0,r.jsxs)("tr",{className:"bg-red-50 border-t-2 border-red-300",children:[(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1 font-bold text-red-800",children:"TOTAL des extras"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1 font-bold text-right",children:"10 378 749.11 $"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1 font-bold text-right",children:"11 230 555.91 $"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1 font-bold text-right",children:"6 160 688.07 $"}),(0,r.jsx)("td",{className:"px-2 py-1 font-bold text-right",children:"1 602 894.41 $"}),(0,r.jsx)("td",{className:"px-2 py-1 font-bold text-right",children:"3 377.25 $"}),(0,r.jsx)("td",{className:"px-2 py-1 font-bold text-right",children:"-"})]}),(0,r.jsxs)("tr",{className:"bg-gray-100",children:[(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1 font-medium",children:"Sous-total"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1",children:"7 771 405.18 $"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1",children:"TTC"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1 font-medium text-right",children:"8 160 781.53 $"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1"})]}),(0,r.jsxs)("tr",{className:"bg-red-50 border-t-2 border-red-300",children:[(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1 font-bold text-red-800",children:"TOTAL CONTRAT + EXTRAS"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1 font-bold text-right",children:"118 378 055.30 $"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1 font-bold text-right",children:"89 591 948.74 $"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1 font-bold text-right",children:"32 161 851.82 $"}),(0,r.jsx)("td",{className:"px-2 py-1 font-bold text-right",children:"28 048 535.91 $"}),(0,r.jsx)("td",{className:"px-2 py-1 font-bold text-right",children:"12 241 493.72 $"}),(0,r.jsx)("td",{className:"px-2 py-1 font-bold text-right",children:"5 018 628.94 $"})]}),(0,r.jsxs)("tr",{className:"bg-red-50 border-t-2 border-red-300",children:[(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1 font-bold text-red-800",children:"TOTAL MILESTONES + EXTRAS FACTUR\xc9S"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1 font-bold text-right",children:"86 532 194.36 $"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1"})]}),(0,r.jsxs)("tr",{className:"bg-red-50 border-t-2 border-red-300",children:[(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1 font-bold text-red-800",children:"TOTAL JOB COST AP"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1 font-bold text-right",children:"92 368 901.03 $"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1 font-bold text-right",children:"5 597 704.36 $"}),(0,r.jsx)("td",{className:"px-2 py-1 font-bold text-right",children:"5 129 841.41 $"}),(0,r.jsx)("td",{className:"px-2 py-1 font-bold text-right",children:"5 129 841.41 $"}),(0,r.jsx)("td",{className:"px-2 py-1 font-bold text-right",children:"5 129 841.41 $"})]}),(0,r.jsxs)("tr",{className:"bg-red-50 border-t-2 border-red-300",children:[(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1 font-bold text-red-800",children:"\xc9CART ENTRE JOB COST ET FICHIER DE FACTURATION"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1 font-bold text-right",children:"26 563 347.46 $"}),(0,r.jsx)("td",{className:"px-2 py-1 font-bold text-right",children:"22 918 694.50 $"}),(0,r.jsx)("td",{className:"px-2 py-1 font-bold text-right",children:"7 111 651.31 $"}),(0,r.jsx)("td",{className:"px-2 py-1 font-bold text-right",children:"2 888 697.53 $"})]}),(0,r.jsxs)("tr",{className:"bg-blue-50 border-t-4 border-blue-400",children:[(0,r.jsx)("td",{className:"px-2 py-2"}),(0,r.jsx)("td",{className:"px-2 py-2 font-bold text-blue-800",children:"Revenue projet"}),(0,r.jsx)("td",{className:"px-2 py-2"}),(0,r.jsx)("td",{className:"px-2 py-2"}),(0,r.jsx)("td",{className:"px-2 py-2"}),(0,r.jsx)("td",{className:"px-2 py-2"}),(0,r.jsx)("td",{className:"px-2 py-2"}),(0,r.jsx)("td",{className:"px-2 py-2"}),(0,r.jsx)("td",{className:"px-2 py-2"}),(0,r.jsx)("td",{className:"px-2 py-2"}),(0,r.jsx)("td",{className:"px-2 py-2"}),(0,r.jsx)("td",{className:"px-2 py-2"}),(0,r.jsx)("td",{className:"px-2 py-2"}),(0,r.jsx)("td",{className:"px-2 py-2"})]}),(0,r.jsxs)("tr",{className:"bg-gray-50",children:[(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1",children:"Contrat de base"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1",children:"Avant taxes"}),(0,r.jsx)("td",{className:"px-2 py-1 text-right",children:"68 499 306.00 $"}),(0,r.jsx)("td",{className:"px-2 py-1",children:"Avec taxes"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1",children:"Marge"}),(0,r.jsx)("td",{className:"px-2 py-1",children:"Plus"}),(0,r.jsx)("td",{className:"px-2 py-1",children:"Note"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1"})]}),[1,2,3,4,5,6,7,8].map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsxs)("td",{className:"px-2 py-1",children:["Amendement 00",e]}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1 text-right",children:1===e?"68 499 306.00 $":2===e?"37 380 290.66 $":3===e?"30 798 906.66 $":4===e?"5 638 172.15 $":5===e?"100 431 862.12 $":6===e?"113 426 506.22 $":7===e?"104 422 506.62 $":"109 422 506.62 $"}),(0,r.jsx)("td",{className:"px-2 py-1 text-right",children:1===e?"101 776 247.00 $":2===e?"4 424 566.20 $":3===e?"1 316 274.87 $":4===e?"4 679 336.02 $":5===e?"6 893 336.05 $":6===e?"6 116 897.27 $":7===e?"11 464 192.73 $":""}),(0,r.jsx)("td",{className:"px-2 py-1 text-right",children:2===e||3===e?"1 729 552.28 $":""}),(0,r.jsx)("td",{className:"px-2 py-1",children:2===e?"Assurement taxes - calcul\xe9 \xe0 15% au lieu de 5% et 15%":3===e?"1 split Milestones no change la valeur":4===e?"0 DCR no split":5===e?"79 asta TTC 5% de tax":""}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1"})]},e)),(0,r.jsxs)("tr",{className:"bg-gray-200",children:[(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1 text-right",children:"131 996 612.36 $"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1"}),(0,r.jsx)("td",{className:"px-2 py-1"})]}),(0,r.jsxs)("tr",{className:"bg-yellow-50 border-t-2 border-yellow-400",children:[(0,r.jsx)("td",{className:"px-2 py-2 font-bold",children:"Note de v\xe9rification Fevrier 2024 avant du don"}),(0,r.jsx)("td",{className:"px-2 py-2"}),(0,r.jsx)("td",{className:"px-2 py-2"}),(0,r.jsx)("td",{className:"px-2 py-2"}),(0,r.jsx)("td",{className:"px-2 py-2"}),(0,r.jsx)("td",{className:"px-2 py-2"}),(0,r.jsx)("td",{className:"px-2 py-2"}),(0,r.jsx)("td",{className:"px-2 py-2"}),(0,r.jsx)("td",{className:"px-2 py-2"}),(0,r.jsx)("td",{className:"px-2 py-2"}),(0,r.jsx)("td",{className:"px-2 py-2"}),(0,r.jsx)("td",{className:"px-2 py-2"}),(0,r.jsx)("td",{className:"px-2 py-2"}),(0,r.jsx)("td",{className:"px-2 py-2"})]})]})]})})]})]})]}),"kpi"===s&&(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-r from-purple-600 to-purple-800 text-white p-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold flex items-center",children:"\uD83D\uDCC8 Indicateurs Cl\xe9s de Performance"}),(0,r.jsx)("p",{className:"mt-2 text-purple-100",children:"Dashboard des KPI financiers Ocean Factory"})]}),(0,r.jsxs)("div",{className:"p-6 space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white p-6 rounded-lg",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Taux de Facturation"}),(0,r.jsxs)("p",{className:"text-3xl font-bold mt-2",children:[l.length>0?Math.round(l.filter(e=>e.montantFacture>0).length/l.length*100):0,"%"]}),(0,r.jsx)("p",{className:"text-blue-100 text-sm mt-1",children:"Milestones factur\xe9s"})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-green-500 to-green-600 text-white p-6 rounded-lg",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Marge Moyenne"}),(0,r.jsxs)("p",{className:"text-3xl font-bold mt-2",children:[v>0?Math.round((w-v)/v*100):0,"%"]}),(0,r.jsx)("p",{className:"text-green-100 text-sm mt-1",children:"TTC vs HT"})]}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 text-white p-6 rounded-lg",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Revenus DCR"}),(0,r.jsxs)("p",{className:"text-3xl font-bold mt-2",children:[v>0?Math.round(F/v*100):0,"%"]}),(0,r.jsx)("p",{className:"text-orange-100 text-sm mt-1",children:"Part des DCR"})]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg",children:[(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"R\xe9partition des Revenus par Navire"}),(0,r.jsx)("div",{className:"space-y-3",children:Object.entries(A).map(e=>{let[t,a]=e,n=v>0?a/v*100:0;return(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"w-20 text-sm font-medium text-gray-700",children:t.toUpperCase()}),(0,r.jsx)("div",{className:"flex-1 mx-4",children:(0,r.jsx)("div",{className:"bg-gray-200 rounded-full h-6",children:(0,r.jsx)("div",{className:"h-6 rounded-full ".concat({c228:"bg-blue-500",c229:"bg-purple-500",c230:"bg-green-500",c231:"bg-orange-500"}[t]," flex items-center justify-end pr-2"),style:{width:"".concat(Math.max(n,2),"%")},children:(0,r.jsxs)("span",{className:"text-white text-xs font-medium",children:[n.toFixed(1),"%"]})})})}),(0,r.jsx)("div",{className:"w-32 text-right text-sm font-semibold",children:u(a)})]},t)})})]})]})]})]})}var v=a(6730),w=a(3152),A=a(4064),E=a(2560),M=a(6218),S=a(4573);function P(e){let{document:t,isOpen:a,onClose:i}=e,[c,s]=(0,n.useState)(null);if((0,n.useEffect)(()=>{t&&t.url?s(t.url):s(null)},[t]),!a||!t)return null;let o="application/pdf"===t.type,l=t.type.startsWith("image/"),d=t.type.startsWith("text/")||"application/json"===t.type,m=t.type.includes("officedocument")||t.type.includes("msword")||t.type.includes("excel")||t.type.includes("powerpoint"),p=()=>{if(c){let e=window.document.createElement("a");e.href=c,e.download=t.nom,e.click()}};return(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-75",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-[95vw] h-[95vh] max-w-7xl flex flex-col overflow-hidden",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 flex-shrink-0",children:[(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:t.nom}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 mt-1 text-sm text-gray-500",children:[(0,r.jsx)("span",{children:(e=>{if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]})(t.taille)}),(0,r.jsx)("span",{children:"•"}),(0,r.jsx)("span",{children:t.dateUpload.toLocaleDateString("fr-CA")}),(0,r.jsx)("span",{children:"•"}),(0,r.jsx)("span",{className:"capitalize",children:t.type})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[(0,r.jsxs)("button",{onClick:p,className:"flex items-center space-x-1 px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",title:"T\xe9l\xe9charger le document",children:[(0,r.jsx)(M.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{className:"text-sm",children:"T\xe9l\xe9charger"})]}),(0,r.jsx)("button",{onClick:i,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-md transition-colors",title:"Fermer l'aper\xe7u",children:(0,r.jsx)(S.Z,{className:"w-6 h-6"})})]})]}),(0,r.jsxs)("div",{className:"flex-1 overflow-hidden bg-gray-100",children:[o&&c&&(0,r.jsx)("div",{className:"w-full h-full relative",children:(0,r.jsxs)("div",{className:"absolute inset-0 flex flex-col",children:[(0,r.jsx)("div",{className:"bg-gray-200 px-4 py-2 text-sm text-gray-600 border-b",children:"\uD83D\uDCA1 Conseil : Utilisez Ctrl+molette pour zoomer, ou les contr\xf4les du PDF"}),(0,r.jsx)("div",{className:"flex-1 relative",children:(0,r.jsx)("iframe",{src:"".concat(c,"#view=FitH&toolbar=1&navpanes=0&scrollbar=1&zoom=page-width"),className:"absolute inset-0 w-full h-full border-0 bg-white",title:"Aper\xe7u de ".concat(t.nom)})})]})}),l&&c&&(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gray-50 p-4",children:(0,r.jsx)("img",{src:c,alt:t.nom,className:"max-w-full max-h-full object-contain rounded-lg shadow-lg"})}),d&&c&&(0,r.jsx)("iframe",{src:c,className:"w-full h-full border-0 bg-white",title:"Aper\xe7u de ".concat(t.nom)}),m&&(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gray-50 p-8",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})})}),(0,r.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Document Office"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"L'aper\xe7u de ce type de document n'est pas disponible dans le navigateur."}),(0,r.jsxs)("button",{onClick:p,className:"inline-flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[(0,r.jsx)(M.Z,{className:"w-5 h-5"}),(0,r.jsx)("span",{children:"T\xe9l\xe9charger pour ouvrir"})]})]})}),!o&&!l&&!d&&!m&&(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gray-50 p-8",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-gray-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})})}),(0,r.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aper\xe7u non disponible"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"Ce type de fichier ne peut pas \xeatre pr\xe9visualis\xe9 dans le navigateur."}),(0,r.jsxs)("button",{onClick:p,className:"inline-flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[(0,r.jsx)(M.Z,{className:"w-5 h-5"}),(0,r.jsx)("span",{children:"T\xe9l\xe9charger le fichier"})]})]})})]}),(0,r.jsx)("div",{className:"px-4 py-2 bg-gray-50 border-t border-gray-200",children:(0,r.jsx)("p",{className:"text-xs text-gray-500 text-center",children:"Appuyez sur \xc9chap ou cliquez sur le bouton X pour fermer l'aper\xe7u"})})]})})}let J=(0,n.forwardRef)((e,t)=>{let{selectedFolder:a,onFolderChange:i}=e,{folders:c,addDocumentToFolder:s,removeDocumentFromFolder:o,setFolders:l}=(0,R.b)(),[d,m]=(0,n.useState)(null),[p,u]=(0,n.useState)(""),[x,g]=(0,n.useState)("all"),[b,h]=(0,n.useState)(!1),[C,N]=(0,n.useState)(null),[y,j]=(0,n.useState)(!1),f="ocean-factory-documents";(0,n.useEffect)(()=>{let e=localStorage.getItem(f);if(e)try{let t=JSON.parse(e),a=c.map(e=>{let a=t.find(t=>t.id===e.id);return a&&a.documents?{...e,documents:a.documents.map(e=>({...e,dateUpload:new Date(e.dateUpload)}))}:e});l(a)}catch(e){console.error("Erreur lors du chargement des documents:",e)}},[l]),(0,n.useEffect)(()=>{if(c.length>0){let e=c.filter(e=>e.documents.length>0);localStorage.setItem(f,JSON.stringify(e))}},[c]),(0,n.useEffect)(()=>{if(a&&c.length>0){let e="".concat(a.type,"-").concat(a.id),t=c.find(t=>t.id===e);t&&m(t)}},[a,c]),(0,n.useImperativeHandle)(t,()=>({selectFolder:(e,t)=>{let a="".concat(e,"-").concat(t),r=c.find(e=>e.id===a);r&&m(r)}}));let T=c.filter(e=>{let t=e.nom.toLowerCase().includes(p.toLowerCase()),a="all"===x||e.type===x;return t&&a}),F=(e,t)=>{let a=e.target.files;a&&d&&(h(!0),Array.from(a).forEach(e=>{let a=URL.createObjectURL(e),r={id:"doc-".concat(Date.now(),"-").concat(Math.random()),nom:e.name,type:e.type,taille:e.size,dateUpload:new Date,folderId:t,url:a};s(t,r),m(e=>e?{...e,documents:[...e.documents,r]}:null)}),h(!1),e.target.value="")},M=e=>{N(e),j(!0)},S=()=>{j(!1),N(null)};(0,n.useEffect)(()=>{let e=e=>{"Escape"===e.key&&y&&S()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[y]);let J=e=>{d&&(o(d.id,e),m(t=>t?{...t,documents:t.documents.filter(t=>t.id!==e)}:null))},L=e=>{if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]};return(0,r.jsxs)("div",{className:"h-full",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Gestion des Archives"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Organisez et g\xe9rez les documents associ\xe9s \xe0 chaque milestone et DCR"})]}),(0,r.jsxs)("div",{className:"flex h-[800px] bg-white rounded-lg shadow-md overflow-hidden",children:[(0,r.jsxs)("div",{className:"w-1/3 border-r border-gray-200 flex flex-col",children:[(0,r.jsxs)("div",{className:"p-4 border-b border-gray-200",children:[(0,r.jsx)("input",{type:"text",placeholder:"Rechercher un dossier...",value:p,onChange:e=>u(e.target.value),className:"w-full mb-3 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-ocean-blue"}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{onClick:()=>g("all"),className:"px-3 py-1 text-xs rounded-full ".concat("all"===x?"bg-ocean-blue text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Tous"}),(0,r.jsx)("button",{onClick:()=>g("milestone"),className:"px-3 py-1 text-xs rounded-full ".concat("milestone"===x?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Milestones"}),(0,r.jsx)("button",{onClick:()=>g("dcr"),className:"px-3 py-1 text-xs rounded-full ".concat("dcr"===x?"bg-orange-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"DCR"})]})]}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto",children:T.map(e=>(0,r.jsx)("div",{onClick:()=>m(e),className:"p-4 border-b border-gray-100 cursor-pointer hover:bg-gray-50 ".concat((null==d?void 0:d.id)===e.id?"bg-blue-50 border-blue-200":""),children:(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)(v.Z,{className:"w-5 h-5 mt-0.5 ".concat("milestone"===e.type?"text-blue-500":"text-orange-500")}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.nom}),(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:[e.documents.length," document(s)"]}),(0,r.jsx)("span",{className:"inline-block mt-1 px-2 py-0.5 text-xs rounded-full ".concat("milestone"===e.type?"bg-blue-100 text-blue-800":"bg-orange-100 text-orange-800"),children:"milestone"===e.type?"Milestone":"DCR"})]})]})},e.id))})]}),(0,r.jsx)("div",{className:"flex-1 flex flex-col",children:d?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:d.nom}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[d.documents.length," document(s) dans ce dossier"]})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"file",multiple:!0,onChange:e=>F(e,d.id),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:b,title:"S\xe9lectionner des fichiers \xe0 uploader","aria-label":"S\xe9lectionner des fichiers \xe0 uploader"}),(0,r.jsxs)("button",{disabled:b,className:"flex items-center space-x-2 px-4 py-2 bg-ocean-blue text-white rounded-md hover:bg-ocean-dark disabled:opacity-50",children:[(0,r.jsx)(w.Z,{className:"w-5 h-5"}),(0,r.jsx)("span",{children:b?"Upload...":"Ajouter des fichiers"})]})]})]})}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:d.documents.length>0?(0,r.jsx)("div",{className:"grid gap-4",children:d.documents.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(A.Z,{className:"w-8 h-8 text-gray-500"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-gray-900",children:e.nom}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:[L(e.taille)," • ",e.dateUpload.toLocaleDateString()]})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("button",{onClick:()=>M(e),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-md",title:"Aper\xe7u du document",children:(0,r.jsx)(D.Z,{className:"w-5 h-5"})}),(0,r.jsx)("button",{onClick:()=>J(e.id),className:"p-2 text-red-600 hover:bg-red-100 rounded-md",title:"Supprimer le document",children:(0,r.jsx)(E.Z,{className:"w-5 h-5"})})]})]},e.id))}):(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)(A.Z,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,r.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Aucun document"}),(0,r.jsx)("p",{className:"text-gray-500 mb-4",children:"Ce dossier ne contient aucun document pour le moment."}),(0,r.jsxs)("div",{className:"relative inline-block",children:[(0,r.jsx)("input",{type:"file",multiple:!0,onChange:e=>F(e,d.id),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",title:"S\xe9lectionner le premier document \xe0 ajouter","aria-label":"S\xe9lectionner le premier document \xe0 ajouter"}),(0,r.jsx)("button",{className:"px-4 py-2 bg-ocean-blue text-white rounded-md hover:bg-ocean-dark",children:"Ajouter le premier document"})]})]})})]}):(0,r.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(v.Z,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),(0,r.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"S\xe9lectionnez un dossier"}),(0,r.jsx)("p",{className:"text-gray-500",children:"Choisissez un dossier dans la liste pour voir et g\xe9rer ses documents."})]})})})]}),(0,r.jsx)(P,{document:C,isOpen:y,onClose:S})]})});J.displayName="DocumentManager";var L=a(5130),k=a(1853),U=a(3722),O=a(1300),I=a(9012),B=a(6149),_=a(8357);let G=[{id:1,description:"Milestone 3 Payment #1 C-228",claimNumber:1,claimAmount:131656.25,taxRate5:!0,taxRate15:!1,taxAmount:6582.81,totalToDate:138239.06,group:"M3",groupLabel:"Milestone #3"},{id:2,description:"Milestone 3 Payment #2 C-229",claimNumber:2,claimAmount:131656.25,taxRate5:!0,taxRate15:!1,taxAmount:6582.81,totalToDate:138239.06,group:"M3",groupLabel:"Milestone #3"},{id:3,description:"Milestone 3 Payment #3 C-230",claimNumber:3,claimAmount:131656.25,taxRate5:!1,taxRate15:!0,taxAmount:19748.44,totalToDate:151404.69,group:"M3",groupLabel:"Milestone #3"},{id:4,description:"Milestone 3 Payment #4 C-231",claimNumber:4,claimAmount:131656.25,taxRate5:!1,taxRate15:!0,taxAmount:19748.44,totalToDate:151404.69,group:"M3",groupLabel:"Milestone #3"},{id:5,description:"Milestone 1 Claim 5 C-228",claimNumber:5,claimAmount:439863.61,taxRate5:!0,taxRate15:!1,taxAmount:21993.18,totalToDate:461856.79,group:"M1",groupLabel:"Milestone #1"},{id:6,description:"Milestone 1 Claim 6 C-229",claimNumber:6,claimAmount:439863.61,taxRate5:!0,taxRate15:!1,taxAmount:21993.18,totalToDate:461856.79,group:"M1",groupLabel:"Milestone #1"},{id:7,description:"Milestone 1 Claim 7 C-230",claimNumber:7,claimAmount:439863.6,taxRate5:!1,taxRate15:!0,taxAmount:65979.54,totalToDate:505843.14,group:"M1",groupLabel:"Milestone #1"},{id:8,description:"Milestone 1 Claim 8 C-231",claimNumber:8,claimAmount:439863.6,taxRate5:!1,taxRate15:!0,taxAmount:65979.54,totalToDate:505843.14,group:"M1",groupLabel:"Milestone #1"},{id:9,description:"Milestone 2 Claim 9  C-228",claimNumber:9,claimAmount:879727.21,taxRate5:!0,taxRate15:!1,taxAmount:43986.36,totalToDate:923713.57,group:"M2",groupLabel:"Milestone #2"},{id:10,description:"Milestone 2 Claim 10  C-229",claimNumber:10,claimAmount:879727.21,taxRate5:!0,taxRate15:!1,taxAmount:43986.36,totalToDate:923713.57,group:"M2",groupLabel:"Milestone #2"},{id:11,description:"Milestone 2 Claim 11  C-230",claimNumber:11,claimAmount:879727.21,taxRate5:!1,taxRate15:!0,taxAmount:131959.08,totalToDate:1011686.29,group:"M2",groupLabel:"Milestone #2"},{id:12,description:"Milestone 2 Claim 12  C-231",claimNumber:12,claimAmount:879727.21,taxRate5:!1,taxRate15:!0,taxAmount:131959.08,totalToDate:1011686.29,group:"M2",groupLabel:"Milestone #2"},{id:13,description:"Milestone 4.a Claim 13 C-228",claimNumber:13,claimAmount:36125.12,taxRate5:!0,taxRate15:!1,taxAmount:1806.26,totalToDate:37931.38,group:"M4A",groupLabel:"Milestone #4.a"},{id:14,description:"Milestone 4.a Claim 14 C-229",claimNumber:14,claimAmount:36125.12,taxRate5:!0,taxRate15:!1,taxAmount:1806.26,totalToDate:37931.38,group:"M4A",groupLabel:"Milestone #4.a"},{id:15,description:"Milestone 4.a Claim 15 C-230",claimNumber:15,claimAmount:36125.13,taxRate5:!1,taxRate15:!0,taxAmount:5418.77,totalToDate:41543.9,group:"M4A",groupLabel:"Milestone #4.a"},{id:16,description:"Milestone 4.a Claim 16 C-231",claimNumber:16,claimAmount:36125.13,taxRate5:!1,taxRate15:!0,taxAmount:5418.77,totalToDate:41543.9,group:"M4A",groupLabel:"Milestone #4.a"},{id:17,description:"Milestone 5.a Claim 17 C-228",claimNumber:17,claimAmount:506009.87,taxRate5:!0,taxRate15:!1,taxAmount:25300.49,totalToDate:531310.36,group:"M5A",groupLabel:"Milestone #5.a"},{id:18,description:"Milestone 5.a Claim 18 C-229",claimNumber:18,claimAmount:506009.87,taxRate5:!0,taxRate15:!1,taxAmount:25300.49,totalToDate:531310.36,group:"M5A",groupLabel:"Milestone #5.a"},{id:19,description:"Milestone 5.a Claim 19 C-230",claimNumber:19,claimAmount:506009.87,taxRate5:!1,taxRate15:!0,taxAmount:75901.48,totalToDate:581911.35,group:"M5A",groupLabel:"Milestone #5.a"},{id:20,description:"Milestone 5.a Claim 20 C-231",claimNumber:20,claimAmount:506009.87,taxRate5:!1,taxRate15:!0,taxAmount:75901.48,totalToDate:581911.35,group:"M5A",groupLabel:"Milestone #5.a"},{id:21,description:"Milestone 6.a Claim 21 C-228",claimNumber:21,claimAmount:442084.25,taxRate5:!0,taxRate15:!1,taxAmount:22104.21,totalToDate:464188.46,group:"M6A",groupLabel:"Milestone #6.a"},{id:22,description:"Milestone 6.a Claim 22 C-229",claimNumber:22,claimAmount:442084.25,taxRate5:!0,taxRate15:!1,taxAmount:22104.21,totalToDate:464188.46,group:"M6A",groupLabel:"Milestone #6.a"},{id:23,description:"Milestone 6.a Claim 23 C-230",claimNumber:23,claimAmount:442084.25,taxRate5:!1,taxRate15:!0,taxAmount:66312.64,totalToDate:508396.89,group:"M6A",groupLabel:"Milestone #6.a"},{id:24,description:"Milestone 6.a Claim 24 C-231",claimNumber:24,claimAmount:442084.25,taxRate5:!1,taxRate15:!0,taxAmount:66312.64,totalToDate:508396.89,group:"M6A",groupLabel:"Milestone #6.a"},{id:25,description:"Milestone 12.a Claim 25 C-228",claimNumber:25,claimAmount:87990,taxRate5:!0,taxRate15:!1,taxAmount:4399.5,totalToDate:92389.5,group:"M12A",groupLabel:"Milestone #12.a"},{id:26,description:"Milestone 12.a Claim 26 C-229",claimNumber:26,claimAmount:87990,taxRate5:!0,taxRate15:!1,taxAmount:4399.5,totalToDate:92389.5,group:"M12A",groupLabel:"Milestone #12.a"},{id:27,description:"Milestone 12.a Claim 27 C-230",claimNumber:27,claimAmount:87990,taxRate5:!1,taxRate15:!0,taxAmount:13198.5,totalToDate:101188.5,group:"M12A",groupLabel:"Milestone #12.a"},{id:28,description:"Milestone 12.a Claim 28 C-231",claimNumber:28,claimAmount:87990,taxRate5:!1,taxRate15:!0,taxAmount:13198.5,totalToDate:101188.5,group:"M12A",groupLabel:"Milestone #12.a"},{id:29,description:"Milestone 14.a Claim 29 C-228",claimNumber:29,claimAmount:3429,taxRate5:!0,taxRate15:!1,taxAmount:171.45,totalToDate:3600.45,group:"M14A",groupLabel:"Milestone #14.a"},{id:30,description:"Milestone 14.a Claim 30 C-229",claimNumber:30,claimAmount:3429,taxRate5:!0,taxRate15:!1,taxAmount:171.45,totalToDate:3600.45,group:"M14A",groupLabel:"Milestone #14.a"},{id:31,description:"Milestone 14.a Claim 31 C-230",claimNumber:31,claimAmount:3429,taxRate5:!1,taxRate15:!0,taxAmount:514.35,totalToDate:3943.35,group:"M14A",groupLabel:"Milestone #14.a"},{id:32,description:"Milestone 14.a Claim 32 C-231",claimNumber:32,claimAmount:3429,taxRate5:!1,taxRate15:!0,taxAmount:514.35,totalToDate:3943.35,group:"M14A",groupLabel:"Milestone #14.a"},{id:33,description:"Milestone 4.b Claim 33 C-228",claimNumber:33,claimAmount:2603056.5,taxRate5:!0,taxRate15:!1,taxAmount:130152.83,totalToDate:2733209.33,group:"M4B",groupLabel:"Milestone #4.b"},{id:34,description:"Milestone 4.b Claim 34 C-229",claimNumber:34,claimAmount:2603056.5,taxRate5:!0,taxRate15:!1,taxAmount:130152.83,totalToDate:2733209.33,group:"M4B",groupLabel:"Milestone #4.b"},{id:35,description:"Milestone 4.b Claim 35 C-230",claimNumber:35,claimAmount:2603056.5,taxRate5:!1,taxRate15:!0,taxAmount:390458.48,totalToDate:2993514.98,group:"M4B",groupLabel:"Milestone #4.b"},{id:36,description:"Milestone 4.b Claim 36 C-231",claimNumber:36,claimAmount:2603056.5,taxRate5:!1,taxRate15:!0,taxAmount:390458.48,totalToDate:2993514.98,group:"M4B",groupLabel:"Milestone #4.b"},{id:37,description:"Milestone 5.b Claim 37 C-228",claimNumber:37,claimAmount:1253444.55,taxRate5:!0,taxRate15:!1,taxAmount:62672.23,totalToDate:1316116.78,group:"M5B",groupLabel:"Milestone #5.b"},{id:38,description:"DCR-001-ENG - Exterior Watertight Power Receptacles",claimNumber:38,claimAmount:2660,taxRate5:!0,taxRate15:!1,taxAmount:133,totalToDate:2793,group:"DCR",groupLabel:"DCR Claims"},{id:39,description:"DCR-016-ENG - Deck Crane Upgrade",claimNumber:38,claimAmount:18900,taxRate5:!0,taxRate15:!1,taxAmount:945,totalToDate:19845,group:"DCR",groupLabel:"DCR Claims"},{id:40,description:"DCR-025-ENG - Power Lashing to Submarines",claimNumber:38,claimAmount:18400,taxRate5:!0,taxRate15:!1,taxAmount:920,totalToDate:19320,group:"DCR",groupLabel:"DCR Claims"},{id:41,description:"DCR-027-ENG - Grey Water Treatment Capability",claimNumber:38,claimAmount:14770,taxRate5:!0,taxRate15:!1,taxAmount:738.5,totalToDate:15508.5,group:"DCR",groupLabel:"DCR Claims"},{id:42,description:"DCR 017-ENG EARLY ORDER OF MATERIAL ASSESSMENT",claimNumber:39,claimAmount:68180,taxRate5:!0,taxRate15:!1,taxAmount:3409,totalToDate:71589,group:"DCR",groupLabel:"DCR Claims"},{id:43,description:"DCR-020-ENG - Upgrade of 5 skyport to heated skyport",claimNumber:40,claimAmount:22400,taxRate5:!0,taxRate15:!1,taxAmount:1120,totalToDate:23520,group:"DCR",groupLabel:"DCR Claims"},{id:44,description:"DCR-006-ENG Tie-Downs on Aft Deck",claimNumber:41,claimAmount:9100,taxRate5:!0,taxRate15:!1,taxAmount:455,totalToDate:9555,group:"DCR",groupLabel:"DCR Claims"},{id:45,description:"DCR-008-Pyrotechnics Locker",claimNumber:42,claimAmount:15600,taxRate5:!0,taxRate15:!1,taxAmount:780,totalToDate:16380,group:"DCR",groupLabel:"DCR Claims"},{id:46,description:"DCR-011-ENG - Connecting to Shore Power",claimNumber:43,claimAmount:27300,taxRate5:!0,taxRate15:!1,taxAmount:1365,totalToDate:28665,group:"DCR",groupLabel:"DCR Claims"},{id:47,description:"DCR-013-ENG - Connecting to Shore Power",claimNumber:44,claimAmount:7e3,taxRate5:!0,taxRate15:!1,taxAmount:350,totalToDate:7350,group:"DCR",groupLabel:"DCR Claims"},{id:48,description:"DCR-014-ENG - Storage Cabinets in Z Drive",claimNumber:45,claimAmount:5180,taxRate5:!0,taxRate15:!1,taxAmount:259,totalToDate:5439,group:"DCR",groupLabel:"DCR Claims"},{id:49,description:"DCR-015-ENG - Exterior Superstructure Light Fixtures",claimNumber:46,claimAmount:3640,taxRate5:!0,taxRate15:!1,taxAmount:182,totalToDate:3822,group:"DCR",groupLabel:"DCR Claims"},{id:50,description:"Milestone 6.b.1 Claim 47",claimNumber:47,claimAmount:877506.57,taxRate5:!0,taxRate15:!1,taxAmount:43875.33,totalToDate:921381.9,group:"M6B1",groupLabel:"Milestone 6.b.1"},{id:51,description:"DCR-007-ENG - Addition of storage locker for NERT",claimNumber:48,claimAmount:15400,taxRate5:!0,taxRate15:!1,taxAmount:770,totalToDate:16170,group:"DCR",groupLabel:"DCR Claims"},{id:52,description:"Milestone 5.b.1",claimNumber:49,claimAmount:1253444.55,taxRate5:!0,taxRate15:!1,taxAmount:62672.23,totalToDate:1316116.78,group:"M5B1",groupLabel:"Milestone 5.b.1"},{id:53,description:"Milestone 7.1",claimNumber:50,claimAmount:2199318.03,taxRate5:!0,taxRate15:!1,taxAmount:109965.9,totalToDate:2309283.93,group:"M7_1",groupLabel:"Milestone 7.1"},{id:54,description:"DCR-019 COVID-19 Health and Safety Measures Nov 2020-March 2021",claimNumber:51,claimAmount:125500.66,taxRate5:!0,taxRate15:!1,taxAmount:6275.03,totalToDate:131775.69,group:"COVID",groupLabel:"COVID Measures"},{id:55,description:"DCR-019 COVID-19 Health and Safety Measures April 2021-February 2022",claimNumber:51,claimAmount:400027.11,taxRate5:!0,taxRate15:!1,taxAmount:20001.36,totalToDate:420028.47,group:"COVID",groupLabel:"COVID Measures"},{id:56,description:"DCR-019 COVID-19 Health and Safety Measures Nov 2020 - February 2022",claimNumber:52,claimAmount:525527.77,taxRate5:!0,taxRate15:!1,taxAmount:26276.39,totalToDate:551804.16,group:"COVID",groupLabel:"COVID Measures"},{id:57,description:"DCR-019 COVID-19 Health and Safety Measures March 2022",claimNumber:52,claimAmount:61287.17,taxRate5:!0,taxRate15:!1,taxAmount:3064.36,totalToDate:64351.53,group:"COVID",groupLabel:"COVID Measures"},{id:58,description:"DCR-019 COVID-19 Health and Safety Measures April 2022",claimNumber:53,claimAmount:74652.2,taxRate5:!0,taxRate15:!1,taxAmount:3732.61,totalToDate:78384.81,group:"COVID",groupLabel:"COVID Measures"},{id:59,description:"DCR-017-228 Early order of Material",claimNumber:54,claimAmount:134333.66,taxRate5:!0,taxRate15:!1,taxAmount:6716.68,totalToDate:141050.34,group:"DCR017",groupLabel:"DCR-017 Early order of Material"},{id:60,description:"DCR-017-229 Early order of Material",claimNumber:54,claimAmount:149985.42,taxRate5:!0,taxRate15:!1,taxAmount:7499.27,totalToDate:157456.34,group:"DCR017",groupLabel:"DCR-017 Early order of Material"},{id:61,description:"DCR-006-228 Tie-down aft deck",claimNumber:55,claimAmount:54970,taxRate5:!0,taxRate15:!1,taxAmount:2748.5,totalToDate:57718.5,group:"DCR006",groupLabel:"DCR-006 Tie-down aft deck"},{id:62,description:"DCR-006-229 Tie-down aft deck",claimNumber:55,claimAmount:49773,taxRate5:!0,taxRate15:!1,taxAmount:2488.65,totalToDate:52261.65,group:"DCR006",groupLabel:"DCR-006 Tie-down aft deck"},{id:63,description:"DCR-019 COVID-19 Health and Safety Measures May 2022",claimNumber:56,claimAmount:57320.63,taxRate5:!0,taxRate15:!1,taxAmount:2866.03,totalToDate:60186.66,group:"COVID",groupLabel:"COVID Measures"},{id:64,description:"Milestone 6.2.b",claimNumber:57,claimAmount:877506.57,taxRate5:!0,taxRate15:!1,taxAmount:43875.33,totalToDate:921381.9,group:"M6_2B",groupLabel:"Milestone 6.2.b"},{id:65,description:"DCR-025-C-228 Power Lashing to Submarines",claimNumber:58,claimAmount:103501.66,taxRate5:!0,taxRate15:!1,taxAmount:5175.08,totalToDate:108676.74,group:"DCR025",groupLabel:"DCR-025 Power Lashing to Submarines"},{id:66,description:"DCR-025-C-229 Power Lashing to Submarines",claimNumber:58,claimAmount:95998.34,taxRate5:!0,taxRate15:!1,taxAmount:4799.92,totalToDate:100798.26,group:"DCR025",groupLabel:"DCR-025 Power Lashing to Submarines"},{id:67,description:"Milestone 8.2.a Prime Movers installed and accepted",claimNumber:59,claimAmount:879727.21,taxRate5:!0,taxRate15:!1,taxAmount:43986.36,totalToDate:923713.57,group:"M8_2A",groupLabel:"Milestone 8.2.a Prime Movers installed and accepted"},{id:68,description:"NOT ACCEPTED DCR-001 C-228 Watertight Power Receptacles",claimNumber:60,claimAmount:0,taxRate5:!0,taxRate15:!1,taxAmount:0,totalToDate:0,group:"DCR001",groupLabel:"DCR-001 Watertight Power Receptacles"},{id:69,description:"NOT ACCEPTED DCR-001 C-229 Watertight Power Receptacles",claimNumber:60,claimAmount:0,taxRate5:!0,taxRate15:!1,taxAmount:0,totalToDate:0,group:"DCR001",groupLabel:"DCR-001 Watertight Power Receptacles"},{id:70,description:"Milestone 8.1.a Prime Movers installed and accepted",claimNumber:61,claimAmount:879727.21,taxRate5:!0,taxRate15:!1,taxAmount:43986.36,totalToDate:923713.57,group:"M8_1A",groupLabel:"Milestone 8.1.a Prime Movers installed and accepted"},{id:71,description:"DCR-004 Heated Skyports - C-228",claimNumber:62,claimAmount:14157,taxRate5:!0,taxRate15:!1,taxAmount:707.85,totalToDate:14864.85,group:"DCR004",groupLabel:"DCR-004 Heated Skyports"},{id:72,description:"DCR-004 Heated Skyports - C-229",claimNumber:62,claimAmount:13728,taxRate5:!0,taxRate15:!1,taxAmount:686.4,totalToDate:14414.4,group:"DCR004",groupLabel:"DCR-004 Heated Skyports"},{id:73,description:"NOT ACCEPTED DCR-011 Connecting to Shore Power C-228",claimNumber:63,claimAmount:0,taxRate5:!0,taxRate15:!1,taxAmount:0,totalToDate:0,group:"DCR011",groupLabel:"DCR-011 Connecting to Shore Power"},{id:74,description:"NOT ACCEPTED DCR-011 Connecting to Shore Power C-229",claimNumber:63,claimAmount:0,taxRate5:!0,taxRate15:!1,taxAmount:0,totalToDate:0,group:"DCR011",groupLabel:"DCR-011 Connecting to Shore Power"},{id:75,description:"DCR-009 ENG",claimNumber:64,claimAmount:27853.2,taxRate5:!0,taxRate15:!1,taxAmount:1392.66,totalToDate:29245.86,group:"DCR009",groupLabel:"DCR-009 ENG and Space Heaters"},{id:76,description:"DCR-009 Space Heaters C-228",claimNumber:64,claimAmount:97627.6,taxRate5:!0,taxRate15:!1,taxAmount:4881.38,totalToDate:102508.98,group:"DCR009",groupLabel:"DCR-009 ENG and Space Heaters"},{id:77,description:"NOT ACCEPTED DCR-015 Exterior Superstructure Light Fixtures (1)",claimNumber:65,claimAmount:0,taxRate5:!0,taxRate15:!1,taxAmount:0,totalToDate:0,group:"DCR015",groupLabel:"DCR-015 Exterior Superstructure Light Fixtures"},{id:78,description:"NOT ACCEPTED DCR-015 Exterior Superstructure Light Fixtures (2)",claimNumber:65,claimAmount:0,taxRate5:!0,taxRate15:!1,taxAmount:0,totalToDate:0,group:"DCR015",groupLabel:"DCR-015 Exterior Superstructure Light Fixtures"},{id:79,description:"DCR-027 Grey Water Treatment C-228",claimNumber:66,claimAmount:44676.18,taxRate5:!0,taxRate15:!1,taxAmount:2233.81,totalToDate:46909.99,group:"DCR027",groupLabel:"DCR-027 Grey Water Treatment"},{id:80,description:"DCR-020 COVID-19 Subcontractor Cost Assistance Jan-Mar 2022",claimNumber:67,claimAmount:977272.16,taxRate5:!0,taxRate15:!1,taxAmount:48863.61,totalToDate:1026135.77,group:"DCR020",groupLabel:"DCR-020 COVID-19 Subcontractor Cost Assistance"},{id:81,description:"Milestone #7.2b Hull, deck and wheelhouse enclosed and accepted by Canada",claimNumber:68,claimAmount:2199318.03,taxRate5:!0,taxRate15:!1,taxAmount:109965.9,totalToDate:2309283.93,group:"M7_2B",groupLabel:"Milestone #7.2b"},{id:82,description:"NOT ACCEPTED DCR-020 Subcontractor Cost Assistance Apr-May-Jun 2022",claimNumber:69,claimAmount:0,taxRate5:!0,taxRate15:!1,taxAmount:0,totalToDate:0,group:"DCR020",groupLabel:"DCR-020 Subcontractor Cost Assistance"},{id:83,description:"DCR-020 Subcontractor Cost Assistance Apr-May-Jun 2022",claimNumber:73,claimAmount:1492798.45,taxRate5:!0,taxRate15:!1,taxAmount:74639.92,totalToDate:1567438.37,group:"DCR020",groupLabel:"DCR-020 Subcontractor Cost Assistance"},{id:84,description:"Milestone #8.1.b Prime Movers Alignment",claimNumber:70,claimAmount:1319590.82,taxRate5:!0,taxRate15:!1,taxAmount:65979.54,totalToDate:1385570.36,group:"M8_1B",groupLabel:"Milestone #8.1.b"},{id:85,description:"Milestone #16.a Completion Aboriginal Report C-228, C-229",claimNumber:71,claimAmount:219931.8,taxRate5:!0,taxRate15:!1,taxAmount:10996.59,totalToDate:230928.39,group:"M16A",groupLabel:"Milestone #16.a"},{id:86,description:"Milestone #16.a Completion Aboriginal Report C-230, C-231",claimNumber:71,claimAmount:219931.8,taxRate5:!1,taxRate15:!0,taxAmount:32989.77,totalToDate:252921.57,group:"M16A",groupLabel:"Milestone #16.a"},{id:87,description:"Milestone #5.3.b Delivery of Propulsion Machinery",claimNumber:72,claimAmount:1253444.55,taxRate5:!1,taxRate15:!0,taxAmount:188016.68,totalToDate:1441461.23,group:"M5_3B",groupLabel:"Milestone #5.3.b"},{id:88,description:"Milestone #6.3.b Delivery of Electrical Equipment",claimNumber:74,claimAmount:877506.57,taxRate5:!1,taxRate15:!0,taxAmount:131625.99,totalToDate:1009132.56,group:"M6_3B",groupLabel:"Milestone #6.3.b"},{id:89,description:"DCR-020 Subcontractor Cost Assistance July 2022",claimNumber:75,claimAmount:485299.91,taxRate5:!0,taxRate15:!1,taxAmount:24265,totalToDate:509564.91,group:"DCR020",groupLabel:"DCR-020 Subcontractor Cost Assistance"},{id:90,description:"DCR-020 Subcontractor Cost Assistance August 2022",claimNumber:76,claimAmount:550343.25,taxRate5:!0,taxRate15:!1,taxAmount:27517.16,totalToDate:577860.41,group:"DCR020",groupLabel:"DCR-020 Subcontractor Cost Assistance"},{id:91,description:"Milestone #5.4.b Delivery of Propulsion Machinery",claimNumber:77,claimAmount:1253444.55,taxRate5:!1,taxRate15:!0,taxAmount:188016.68,totalToDate:1441461.23,group:"M5_4B",groupLabel:"Milestone #5.4.b"},{id:92,description:"Milestone #6.4.b Delivery of Electrical Equipment Package",claimNumber:78,claimAmount:877506.57,taxRate5:!1,taxRate15:!0,taxAmount:131625.99,totalToDate:1009132.56,group:"M6_4B",groupLabel:"Milestone #6.4.b"},{id:93,description:"Milestone #16.b Completion Aboriginal Report C-228, C-229",claimNumber:79,claimAmount:219931.8,taxRate5:!0,taxRate15:!1,taxAmount:10996.59,totalToDate:230928.39,group:"M16B",groupLabel:"Milestone #16.b"},{id:94,description:"Milestone #16.b Completion Aboriginal Report C-230, C-231",claimNumber:79,claimAmount:219931.8,taxRate5:!1,taxRate15:!0,taxAmount:32989.77,totalToDate:252921.57,group:"M16B",groupLabel:"Milestone #16.b"},{id:95,description:"Milestone #10.1 C-228 CVM Template",claimNumber:80,claimAmount:109965.9,taxRate5:!0,taxRate15:!1,taxAmount:5498.3,totalToDate:115464.2,group:"M10_1",groupLabel:"Milestone #10.1"},{id:96,description:"Milestone #10.1 C-229 CVM Template",claimNumber:80,claimAmount:109965.9,taxRate5:!0,taxRate15:!1,taxAmount:5498.3,totalToDate:115464.2,group:"M10_1",groupLabel:"Milestone #10.1"},{id:97,description:"Milestone #10.1 C-230 CVM Template",claimNumber:80,claimAmount:109965.9,taxRate5:!1,taxRate15:!0,taxAmount:16494.89,totalToDate:126460.79,group:"M10_1",groupLabel:"Milestone #10.1"},{id:98,description:"Milestone #10.1 C-231 CVM Template",claimNumber:80,claimAmount:109965.9,taxRate5:!1,taxRate15:!0,taxAmount:16494.89,totalToDate:126460.79,group:"M10_1",groupLabel:"Milestone #10.1"},{id:99,description:"Milestone #13.1 ILS documents (Draft) received and accepted (NLT1 & NLT2)",claimNumber:81,claimAmount:131959.08,taxRate5:!0,taxRate15:!1,taxAmount:6597.95,totalToDate:138557.03,group:"M13_1",groupLabel:"Milestone #13.1"},{id:100,description:"Milestone #13.1 ILS documents (Draft) received and accepted (NLT3 & NLT4)",claimNumber:81,claimAmount:131959.08,taxRate5:!1,taxRate15:!0,taxAmount:19793.86,totalToDate:151752.94,group:"M13_1",groupLabel:"Milestone #13.1"},{id:101,description:"Claim 82 DCR-001 Exterior Watertight Power Receptacles NLT 1",claimNumber:82,claimAmount:16163.5,taxRate5:!0,taxRate15:!1,taxAmount:808.18,totalToDate:16971.68,group:"DCR001",groupLabel:"DCR-001 Watertight Power Receptacles"},{id:102,description:"Claim 101 Test and Trials Program Complete and Accepted by Canada C-228",claimNumber:101,claimAmount:164948.85,taxRate5:!0,taxRate15:!1,taxAmount:8247.44,totalToDate:173196.29,group:"TEST_TRIALS",groupLabel:"Test & Trials Program"},{id:103,description:"Claim 101 Test and Trials Program Complete and Accepted by Canada C-229",claimNumber:101,claimAmount:164948.85,taxRate5:!0,taxRate15:!1,taxAmount:8247.44,totalToDate:173196.29,group:"TEST_TRIALS",groupLabel:"Test & Trials Program"},{id:104,description:"Claim 102 Test and Trials Program Complete and Accepted by Canada C-230",claimNumber:102,claimAmount:164948.85,taxRate5:!1,taxRate15:!0,taxAmount:24742.33,totalToDate:189691.18,group:"TEST_TRIALS",groupLabel:"Test & Trials Program"},{id:105,description:"Claim 102 Test and Trials Program Complete and Accepted by Canada C-231",claimNumber:102,claimAmount:164948.85,taxRate5:!1,taxRate15:!0,taxAmount:24742.33,totalToDate:189691.18,group:"TEST_TRIALS",groupLabel:"Test & Trials Program"},{id:106,description:"Claim 103 DCR-023 TDP Partitioning",claimNumber:103,claimAmount:4620,taxRate5:!0,taxRate15:!1,taxAmount:231,totalToDate:4851,group:"DCR023",groupLabel:"DCR-023 TDP Partitioning"},{id:107,description:"Claim 104 Milestone 8.2b2 Final alignment complete and accepted by Canada",claimNumber:104,claimAmount:791754.49,taxRate5:!0,taxRate15:!1,taxAmount:39587.72,totalToDate:831342.21,group:"M8_2B2",groupLabel:"Milestone 8.2b2 Final alignment"},{id:108,description:"Claim 105 Milestone 12.1b1 RSPL complete and accepted by Canada",claimNumber:105,claimAmount:70374.73,taxRate5:!0,taxRate15:!1,taxAmount:3518.74,totalToDate:73893.47,group:"M12_1B1",groupLabel:"Milestone 12.1b1 RSPL"},{id:109,description:"Claim 106 Milestone 10.1b1 Upon Provisional Acceptance Certification signed by Canada",claimNumber:106,claimAmount:494846.55,taxRate5:!1,taxRate15:!0,taxAmount:24742.33,totalToDate:519588.88,group:"M10_1B1",groupLabel:"Milestone 10.1b1 Provisional Acceptance"},{id:110,description:"Claim 107 Milestone 9.1d Trials Reports Submitted and Accepted by Canada",claimNumber:107,claimAmount:659795.41,taxRate5:!1,taxRate15:!0,taxAmount:32989.77,totalToDate:692785.18,group:"M9_1D",groupLabel:"Milestone 9.1d Trials Reports"},{id:111,description:"Claim 108 Milestone 12.2b1 RSPL Complete and Accepted by Canada",claimNumber:108,claimAmount:70374.73,taxRate5:!0,taxRate15:!1,taxAmount:3518.74,totalToDate:73893.47,group:"M12_2B1",groupLabel:"Milestone 12.2b1 RSPL"},{id:112,description:"Claim 109 Milestone 10.2b1 Provisional Acceptance 50%",claimNumber:109,claimAmount:494846.56,taxRate5:!0,taxRate15:!1,taxAmount:24742.33,totalToDate:519588.89,group:"M10_2B1",groupLabel:"Milestone 10.2b1 Provisional Acceptance 50%"},{id:113,description:"Claim 110 Milestone 9.1c Trials Conduct Complete and Accepted by CAN",claimNumber:110,claimAmount:1484539.67,taxRate5:!0,taxRate15:!1,taxAmount:74226.98,totalToDate:1558766.65,group:"M9_1C",groupLabel:"Milestone 9.1c Trials Conduct Complete"},{id:114,description:"Claim 111 Milestone 9.2c Trials Conduct Complete and Accepted by CAN",claimNumber:111,claimAmount:1484539.67,taxRate5:!0,taxRate15:!1,taxAmount:74226.98,totalToDate:1558766.65,group:"M9_2C",groupLabel:"Milestone 9.2c Trials Conduct Complete"},{id:115,description:"Claim 112 Milestone 9.2d Trials Reports Submitted and Accepted by CAN",claimNumber:112,claimAmount:659795.41,taxRate5:!1,taxRate15:!0,taxAmount:32989.77,totalToDate:692785.18,group:"M9_2D",groupLabel:"Milestone 9.2d Trials Reports Submitted"},{id:116,description:"Claim 113 Milestone 14.b1 Training Plan including course manuals complete and accepted by CAN",claimNumber:113,claimAmount:196909.92,taxRate5:!0,taxRate15:!1,taxAmount:9845.5,totalToDate:206755.42,group:"M14_B1",groupLabel:"Milestone 14.b1 Training Plan"},{id:117,description:"Claim 114 Milestone 14.b3b1-14.b4b1 Training Plan including course manuals complete and accepted by CAN",claimNumber:114,claimAmount:196909.92,taxRate5:!1,taxRate15:!0,taxAmount:29536.49,totalToDate:226446.41,group:"M14_B3B1",groupLabel:"Milestone 14.b3b1-14.b4b1 Training Plan"},{id:118,description:"Claim 115 Milestone 12.1b2 12.2b2 Spares verified by Canada at shipyard before shipping",claimNumber:115,claimAmount:251498.88,taxRate5:!0,taxRate15:!1,taxAmount:12574.94,totalToDate:264073.82,group:"M12_SPARES",groupLabel:"Milestone 12 Spares Verification"},{id:119,description:"Claim 116 Milestone 10.1b2 Delivery of all ILS Products & Documents reviewed and accepted by Canada and completion of work listed in the schedules provided at Milestone 10.1b1",claimNumber:116,claimAmount:494846.56,taxRate5:!0,taxRate15:!1,taxAmount:24742.33,totalToDate:519588.89,group:"M10_1B2",groupLabel:"Milestone 10.1b2 Delivery of ILS Products"},{id:120,description:"Claim 117 Milestone 10.2b Provisional Acceptance NLT2 complete and accepted by Canada 2of2",claimNumber:117,claimAmount:494846.55,taxRate5:!0,taxRate15:!1,taxAmount:24742.33,totalToDate:519588.88,group:"M10_2B_NLT2",groupLabel:"Milestone 10.2b Provisional Acceptance NLT2"},{id:121,description:"Claim 118 Milestone 14.b2 Training Completed and accepted by Canada",claimNumber:118,claimAmount:459456.49,taxRate5:!0,taxRate15:!1,taxAmount:22972.82,totalToDate:482429.31,group:"M14_B2",groupLabel:"Milestone 14.b2 Training Completed"},{id:122,description:"Claim 119 Milestone 9.1e 9.2e Trials complete and accepted by Canada",claimNumber:119,claimAmount:659795.41,taxRate5:!1,taxRate15:!0,taxAmount:32989.77,totalToDate:692785.18,group:"M9_E",groupLabel:"Milestone 9.e Trials complete"},{id:123,description:"Claim 120 Milestone 11.1 Delivery and Final Acceptance of vessels complete at respective CFR bases (Holdback \xe0 facturer)",claimNumber:120,claimAmount:3194980.92,taxRate5:!0,taxRate15:!1,taxAmount:159749.05,totalToDate:3354729.97,group:"M11_1",groupLabel:"Milestone 11.1 Delivery & Final Acceptance"},{id:124,description:"Claim 120 Milestone 11.2 Delivery and Final Acceptance of vessels complete at respective CFR bases (Holdback \xe0 facturer)",claimNumber:120,claimAmount:3148800.91,taxRate5:!0,taxRate15:!1,taxAmount:157400.05,totalToDate:3305400.96,group:"M11_2",groupLabel:"Milestone 11.2 Delivery & Final Acceptance"},{id:125,description:"Claim 121 C-228 Milestone 17 EPA Ajustement",claimNumber:121,claimAmount:2e6,taxRate5:!0,taxRate15:!1,taxAmount:1e5,totalToDate:21e5,group:"M17_EPA",groupLabel:"Milestone 17 EPA Ajustement"},{id:126,description:"Claim 121 C-229 Milestone 17 EPA Ajustement",claimNumber:121,claimAmount:2e6,taxRate5:!0,taxRate15:!1,taxAmount:1e5,totalToDate:21e5,group:"M17_EPA",groupLabel:"Milestone 17 EPA Ajustement"},{id:127,description:"Claim 122 C-228 Milestone 13.2b All Technical Data Package elements delivered and accepted by Canada",claimNumber:122,claimAmount:593815.87,taxRate5:!0,taxRate15:!1,taxAmount:29690.79,totalToDate:623506.66,group:"M13_2B",groupLabel:"Milestone 13.2b Technical Data Package"},{id:128,description:"Claim 122 C-229 Milestone 13.2b All Technical Data Package elements delivered and accepted by Canada",claimNumber:122,claimAmount:593815.87,taxRate5:!0,taxRate15:!1,taxAmount:29690.79,totalToDate:623506.66,group:"M13_2B",groupLabel:"Milestone 13.2b Technical Data Package"},{id:129,description:"Claim 123 C-228 Milestone 19.a Final Delivery to Destination and all Contractual Deliverables Completed and Accepted",claimNumber:123,claimAmount:3e6,taxRate5:!0,taxRate15:!1,taxAmount:15e4,totalToDate:315e4,group:"M19A",groupLabel:"Milestone 19.a Final Delivery"},{id:130,description:"Claim 123 C-229 Milestone 19.a Final Delivery to Destination and all Contractual Deliverables Completed and Accepted",claimNumber:123,claimAmount:3e6,taxRate5:!0,taxRate15:!1,taxAmount:15e4,totalToDate:315e4,group:"M19A",groupLabel:"Milestone 19.a Final Delivery"},{id:131,description:"Claim 124 C-228 Milestone 9.1b Pre-Requisites Complete and accepted by Canada (Commissioning, Flushing, ITP)",claimNumber:124,claimAmount:329897.7,taxRate5:!0,taxRate15:!1,taxAmount:16494.89,totalToDate:346392.59,group:"M9_PREREQ",groupLabel:"Milestone 9.x Pre-Requisites"},{id:132,description:"Claim 124 C-229 Milestone 9.2b Pre-Requisites Complete and accepted by Canada (Commissioning, Flushing, ITP)",claimNumber:124,claimAmount:329897.7,taxRate5:!0,taxRate15:!1,taxAmount:16494.89,totalToDate:346392.59,group:"M9_PREREQ",groupLabel:"Milestone 9.x Pre-Requisites"},{id:133,description:"Cancelled Claim 125 C-230 Milestone 7.3a Deckhouse Complete and accepted by Canada",claimNumber:125,claimAmount:0,taxRate5:!1,taxRate15:!0,taxAmount:0,totalToDate:0,group:"M7_3A_DECKHOUSE",groupLabel:"Milestone 7.3a Deckhouse"},{id:134,description:"Claim 126 Milestone 7.3a Deckhouse Complete and accepted by Canada",claimNumber:126,claimAmount:329897.71,taxRate5:!1,taxRate15:!1,taxAmount:49484.66,totalToDate:379382.37,group:"M7_3A_DECKHOUSE",groupLabel:"Milestone 7.3a Deckhouse"},{id:135,description:"Claim 127 C-228 DCR-22 Transportation to Esquimalt",claimNumber:127,claimAmount:534977.77,taxRate5:!0,taxRate15:!1,taxAmount:26748.89,totalToDate:561726.66,group:"DCR22",groupLabel:"DCR-22 Transportation"},{id:136,description:"Claim 127 C-229 DCR-22 Transportation to Esquimalt",claimNumber:127,claimAmount:534977.77,taxRate5:!0,taxRate15:!1,taxAmount:26748.89,totalToDate:561726.66,group:"DCR22",groupLabel:"DCR-22 Transportation"},{id:137,description:"Claim 128 C-228 DCR-28 Winches Upgrade",claimNumber:128,claimAmount:505961.34,taxRate5:!0,taxRate15:!1,taxAmount:25298.07,totalToDate:531259.41,group:"DCR28",groupLabel:"DCR-28 Winches Upgrade"},{id:138,description:"Claim 129 C-229 DCR-28 Upgrade for the THR Winches by DMT",claimNumber:129,claimAmount:467179.48,taxRate5:!0,taxRate15:!1,taxAmount:23358.97,totalToDate:490538.45,group:"DCR28_THR",groupLabel:"DCR-28 THR Winches by DMT"},{id:139,description:"Cancelled Claim 130 C-230 Milestone 8.3a Prime Movers Installed and Accepted by Canada",claimNumber:130,claimAmount:0,taxRate5:!1,taxRate15:!0,taxAmount:0,totalToDate:0,group:"M8_3A",groupLabel:"Milestone 8.3a Prime Movers"},{id:140,description:"Cancelled Claim 131 C-230 Milestone 7.3b Hull enclosed and accepted by Canada",claimNumber:131,claimAmount:0,taxRate5:!1,taxRate15:!0,taxAmount:0,totalToDate:0,group:"M7_3B",groupLabel:"Milestone 7.3b Hull enclosed"},{id:141,description:"Claim 132 DCR 037 - 0-00230 - Fender modification Signed and Accepted by Canada (AMOUNT TBD)",claimNumber:132,claimAmount:0,taxRate5:!1,taxRate15:!0,taxAmount:0,totalToDate:0,group:"DCR037",groupLabel:"DCR-037 Fender modification"},{id:142,description:"Claim 133 C-230 Milestone 8.3a Prime Movers Installed and Accepted by Canada",claimNumber:133,claimAmount:879727.21,taxRate5:!1,taxRate15:!1,taxAmount:123161.81,totalToDate:1002889.02,group:"M8_3A",groupLabel:"Milestone 8.3a Prime Movers"},{id:143,description:"Claim 134 C-230 Milestone 7.3b Hull enclosed and accepted by Canada",claimNumber:134,claimAmount:989693.11,taxRate5:!1,taxRate15:!1,taxAmount:138557.04,totalToDate:1128250.15,group:"M7_3B",groupLabel:"Milestone 7.3b Hull enclosed"},{id:144,description:"Claim 135 DCR 037 - 0-00230 - Fender modification Signed and Accepted by Canada",claimNumber:135,claimAmount:7903,taxRate5:!1,taxRate15:!0,taxAmount:1106.42,totalToDate:9009.42,group:"DCR037",groupLabel:"DCR-037 Fender modification"},{id:145,description:"Claim 136 C-230 Milestone 7.3c Deckhouse and hull assembly complete and accepted by Canada",claimNumber:136,claimAmount:879727.21,taxRate5:!1,taxRate15:!1,taxAmount:123161.81,totalToDate:1002889.02,group:"M7_3C",groupLabel:"Milestone 7.3c Deckhouse & Hull assembly"},{id:146,description:"Claim 137 C-230 19.c Milestone 7 for NLT 3 completed and accepted by Canada",claimNumber:137,claimAmount:14e5,taxRate5:!1,taxRate15:!1,taxAmount:196e3,totalToDate:1596e3,group:"M7_NLT3",groupLabel:"Milestone 7 for NLT 3"},{id:147,description:"Claim 138 C-228 Milestone 11.1 Delivery and Final Acceptance of vessels complete at respective CFR bases Holdback (Reference claim 120)",claimNumber:138,claimAmount:103996.12,taxRate5:!0,taxRate15:!1,taxAmount:5199.81,totalToDate:109195.93,group:"M11_1_HOLDBACK",groupLabel:"Milestone 11.1 Holdback"},{id:148,description:"Claim 138 C-229 Milestone 11.2 Delivery and Final Acceptance of vessels complete at respective CFR bases Holdback (Reference claim 120)",claimNumber:138,claimAmount:150976.13,taxRate5:!0,taxRate15:!1,taxAmount:7548.81,totalToDate:158524.94,group:"M11_2_HOLDBACK",groupLabel:"Milestone 11.2 Holdback"},{id:149,description:"Claim 139 C-230-DCR 001 Exterior Watertight Power Receptacles",claimNumber:139,claimAmount:16041.25,taxRate5:!1,taxRate15:!1,taxAmount:2245.78,totalToDate:18287.03,group:"DCR001_230",groupLabel:"DCR-001 C-230 Watertight Power Receptacles"}],H=e=>e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});function $(e){let{isOpen:t,onClose:a,onSave:i,initialData:c}=e,[s,o]=(0,n.useState)(c||{claimNumber:"137",pspcContractNumber:"017mc.W8472-185713",claims:G});if(!t)return null;let l=(e,t,a)=>{o(r=>{let n=[...r.claims];if(n[e]={...n[e],[t]:a},"claimAmount"===t||"taxRate5"===t||"taxRate15"===t){let t=n[e],a=0;a=t.taxRate5?.05:t.taxRate15?.15:.14,n[e].taxAmount=t.claimAmount*a,n[e].totalToDate=t.claimAmount+n[e].taxAmount}return{...r,claims:n}})},d=e=>{o(t=>({...t,claims:t.claims.filter((t,a)=>a!==e)}))},m=()=>{i(s),a()};s.claims.reduce((e,t)=>e+t.claimAmount,0),s.claims.reduce((e,t)=>e+t.taxAmount,0),s.claims.reduce((e,t)=>e+t.totalToDate,0);let p=s.claims.filter(e=>e.taxRate5).reduce((e,t)=>e+t.claimAmount,0),u=s.claims.filter(e=>e.taxRate15).reduce((e,t)=>e+t.claimAmount,0),x=s.claims.filter(e=>!e.taxRate5&&!e.taxRate15).reduce((e,t)=>e+t.claimAmount,0),g=p+u+x,b=s.claims.filter(e=>e.taxRate5).reduce((e,t)=>e+t.taxAmount,0),h=s.claims.filter(e=>e.taxRate15).reduce((e,t)=>e+t.taxAmount,0),C=s.claims.filter(e=>!e.taxRate5&&!e.taxRate15).reduce((e,t)=>e+t.taxAmount,0),N=b+h+C,y=Array.from(new Set(s.claims.map(e=>e.group)));return(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-[95vw] h-[95vh] max-w-7xl flex flex-col overflow-hidden",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border-b bg-gray-50",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(O.Z,{className:"w-6 h-6 text-purple-600"}),(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Payment Claim Form"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("button",{onClick:m,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 text-sm",children:"Sauvegarder"}),(0,r.jsx)("button",{onClick:a,"aria-label":"Fermer le formulaire",title:"Fermer",className:"p-2 rounded-md hover:bg-gray-200 text-gray-500",children:(0,r.jsx)(S.Z,{className:"w-6 h-6"})})]})]}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:(0,r.jsxs)("div",{className:"border-2 border-black p-4 mb-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-4 text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:"OCEAN"}),(0,r.jsx)("div",{className:"text-gray-600",children:"GO FULL FORCE"})]}),(0,r.jsxs)("div",{className:"text-right space-y-1",children:[(0,r.jsxs)("div",{className:"font-semibold",children:["Summary sheet to Claim for Progress Payment - Claim No. ",(0,r.jsx)("input",{"aria-label":"Claim number",title:"Claim number",value:s.claimNumber,onChange:e=>o(t=>({...t,claimNumber:e.target.value})),className:"w-16 border-b border-gray-400 text-center outline-none"})]}),(0,r.jsxs)("div",{children:["PSPC Contract # ",(0,r.jsx)("input",{"aria-label":"PSPC Contract number",title:"PSPC Contract number",value:s.pspcContractNumber,onChange:e=>o(t=>({...t,pspcContractNumber:e.target.value})),className:"w-48 border-b border-gray-400 text-center outline-none"})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-8 mb-6 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Cumulative (W/O tax)"}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:"5% tax claim cumulative W/O tx"}),(0,r.jsxs)("span",{children:[H(p)," $"]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:"15% tax claim cumulative W/O tx"}),(0,r.jsxs)("span",{children:[H(u)," $"]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:"14% tax claim cumulative W/O tx"}),(0,r.jsxs)("span",{children:[H(x)," $"]})]}),(0,r.jsxs)("div",{className:"flex justify-between font-bold border-t pt-1",children:[(0,r.jsx)("span",{children:"Total W/O Tax"}),(0,r.jsxs)("span",{children:[H(g)," $"]})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:"Cumulative Tax"}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:"5% tax rate cumulative"}),(0,r.jsxs)("span",{children:[H(b)," $"]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:"15% tax rate cumulative"}),(0,r.jsxs)("span",{children:[H(h)," $"]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{children:"14% tax rate cumulative"}),(0,r.jsxs)("span",{children:[H(C)," $"]})]}),(0,r.jsxs)("div",{className:"flex justify-between font-bold border-t pt-1",children:[(0,r.jsx)("span",{children:"Total Tax"}),(0,r.jsxs)("span",{children:[H(N)," $"]})]})]})]})]}),(0,r.jsx)("div",{className:"text-right mb-4",children:(0,r.jsxs)("div",{className:"text-lg font-bold text-purple-700",children:["Cumulative TOTAL to date: ",H(g+N)," $"]})}),(0,r.jsxs)("div",{className:"border border-black text-xs",children:[(0,r.jsxs)("div",{className:"bg-gray-100 grid grid-cols-9 gap-1 p-2 border-b border-black font-semibold",children:[(0,r.jsx)("div",{className:"col-span-4 text-center",children:"DESCRIPTION"}),(0,r.jsx)("div",{className:"col-span-1 text-center",children:"Claim #"}),(0,r.jsx)("div",{className:"col-span-1 text-center",children:"Claim amount"}),(0,r.jsx)("div",{className:"col-span-1 text-center",children:"Tax amount"}),(0,r.jsx)("div",{className:"col-span-1 text-center",children:"Total to date"}),(0,r.jsx)("div",{className:"col-span-1 text-center",children:"Actions"})]}),y.map(e=>{var t;let a=s.claims.filter(t=>t.group===e),i=(null===(t=a[0])||void 0===t?void 0:t.groupLabel)||e,c=a.reduce((e,t)=>e+t.claimAmount,0),o=a.reduce((e,t)=>e+t.totalToDate,0);return(0,r.jsxs)(n.Fragment,{children:[a.map(e=>{let t=s.claims.findIndex(t=>t.id===e.id);return(0,r.jsxs)("div",{className:"grid grid-cols-9 gap-1 p-2 border-b border-gray-300 hover:bg-gray-50",children:[(0,r.jsx)("div",{className:"col-span-4",children:(0,r.jsx)("input",{"aria-label":"Description",title:"Description",value:e.description,onChange:e=>l(t,"description",e.target.value),className:"w-full px-2 py-1 text-xs border-none bg-transparent focus:bg-white focus:border focus:border-blue-300 rounded"})}),(0,r.jsx)("div",{className:"col-span-1 text-center",children:(0,r.jsx)("input",{type:"number","aria-label":"Claim #",title:"Claim number",value:e.claimNumber,onChange:e=>l(t,"claimNumber",parseInt(e.target.value)||0),className:"w-full px-1 py-1 text-center text-xs border-none bg-transparent focus:bg-white focus:border focus:border-blue-300 rounded"})}),(0,r.jsxs)("div",{className:"col-span-1 text-right",children:[(0,r.jsxs)("div",{className:"flex items-center justify-end",children:[(0,r.jsx)("input",{type:"number",step:"0.01","aria-label":"Claim amount",title:"Claim amount",value:e.claimAmount,onChange:e=>l(t,"claimAmount",parseFloat(e.target.value)||0),className:"w-full px-1 py-1 text-right text-xs border-none bg-transparent focus:bg-white focus:border focus:border-blue-300 rounded"}),(0,r.jsx)("span",{className:"ml-1 text-xs",children:"$"})]}),(0,r.jsxs)("div",{className:"flex justify-center space-x-1 mt-1",children:[(0,r.jsxs)("label",{className:"flex items-center text-[10px]",children:[(0,r.jsx)("input",{type:"checkbox",checked:e.taxRate5,onChange:e=>{l(t,"taxRate5",e.target.checked),e.target.checked&&l(t,"taxRate15",!1)},className:"w-3 h-3 mr-1"}),"5%"]}),(0,r.jsxs)("label",{className:"flex items-center text-[10px]",children:[(0,r.jsx)("input",{type:"checkbox",checked:e.taxRate15,onChange:e=>{l(t,"taxRate15",e.target.checked),e.target.checked&&l(t,"taxRate5",!1)},className:"w-3 h-3 mr-1"}),"15%"]}),(0,r.jsxs)("label",{className:"flex items-center text-[10px]",children:[(0,r.jsx)("input",{type:"checkbox",checked:!e.taxRate5&&!e.taxRate15,onChange:e=>{e.target.checked&&(l(t,"taxRate5",!1),l(t,"taxRate15",!1))},className:"w-3 h-3 mr-1"}),"14%"]})]})]}),(0,r.jsx)("div",{className:"col-span-1 text-right",children:(0,r.jsxs)("div",{className:"flex items-center justify-end",children:[(0,r.jsx)("span",{className:"text-xs text-gray-600",children:H(e.taxAmount)}),(0,r.jsx)("span",{className:"ml-1 text-xs",children:"$"})]})}),(0,r.jsx)("div",{className:"col-span-1 text-right",children:(0,r.jsxs)("div",{className:"flex items-center justify-end",children:[(0,r.jsx)("span",{className:"text-xs text-gray-600",children:H(e.totalToDate)}),(0,r.jsx)("span",{className:"ml-1 text-xs",children:"$"})]})}),(0,r.jsx)("div",{className:"col-span-1 text-center",children:(0,r.jsx)("button",{onClick:()=>d(t),className:"text-red-500 hover:text-red-700 hover:bg-red-50 p-1 rounded flex items-center justify-center",title:"Supprimer cette ligne",children:(0,r.jsx)(E.Z,{className:"w-4 h-4"})})})]},e.id)}),(0,r.jsxs)("div",{className:"bg-gray-200 grid grid-cols-9 gap-1 p-2 border-b border-black font-semibold",children:[(0,r.jsxs)("div",{className:"col-span-4",children:["Total ",i]}),(0,r.jsx)("div",{className:"col-span-1"}),(0,r.jsxs)("div",{className:"col-span-1 text-right",children:[H(c)," $"]}),(0,r.jsx)("div",{className:"col-span-1"}),(0,r.jsxs)("div",{className:"col-span-1 text-right",children:[H(o)," $"]}),(0,r.jsx)("div",{className:"col-span-1"})]})]},e)}),(0,r.jsx)("div",{className:"bg-blue-50 grid grid-cols-9 gap-1 p-3 border-b border-black",children:(0,r.jsx)("div",{className:"col-span-9 text-center",children:(0,r.jsxs)("button",{onClick:()=>{let e=Math.max(...s.claims.map(e=>e.claimNumber),0)+1,t={id:Math.max(...s.claims.map(e=>e.id),0)+1,description:"Claim ".concat(e," - Nouvelle r\xe9clamation"),claimNumber:e,claimAmount:0,taxRate5:!1,taxRate15:!1,taxAmount:0,totalToDate:0,group:"CLAIM_".concat(e),groupLabel:"Claim ".concat(e)};o(a=>({...a,claimNumber:(e+1).toString(),claims:[...a.claims,t]}))},className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 text-sm font-medium flex items-center justify-center mx-auto",children:[(0,r.jsx)(_.Z,{className:"w-4 h-4 mr-2"}),"Ajouter nouvelle r\xe9clamation"]})})})]})]})}),(0,r.jsxs)("div",{className:"border-t px-6 py-4 bg-gray-50 flex items-center justify-between text-sm",children:[(0,r.jsx)("span",{children:"Formulaire Payment Claim - Ocean Factory (totaux par groupe)"}),(0,r.jsxs)("div",{className:"space-x-3",children:[(0,r.jsx)("button",{onClick:a,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"Fermer"}),(0,r.jsx)("button",{onClick:m,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700",children:"Sauvegarder"})]})]})]})})}function W(e){let{isOpen:t,onClose:a,onSave:i,initialData:c}=e,[s,o]=(0,n.useState)({contractNumber:(null==c?void 0:c.contractNumber)||"",contractorName:(null==c?void 0:c.contractorName)||"Ocean Factory Inc.",claimNumber:(null==c?void 0:c.claimNumber)||"001",claimPeriod:(null==c?void 0:c.claimPeriod)||"Octobre 2024",claims:(null==c?void 0:c.claims)||[{description:"Milestone 1",amount:45e3,tax:6750},{description:"Milestone 2",amount:35e3,tax:5250}],subtotal:(null==c?void 0:c.subtotal)||8e4,applicableTaxes:(null==c?void 0:c.applicableTaxes)||12e3,total:(null==c?void 0:c.total)||92e3,lessHoldbacks:(null==c?void 0:c.lessHoldbacks)||4600,totalAmountClaim:(null==c?void 0:c.totalAmountClaim)||87400,currentClaimAmount:(null==c?void 0:c.currentClaimAmount)||87400}),[l,d]=(0,n.useState)(1);if(!t)return null;let m=(e,t)=>{o(a=>({...a,[e]:t}))};return(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-[95vw] h-[95vh] max-w-7xl flex flex-col overflow-hidden",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border-b bg-gray-50",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(O.Z,{className:"w-6 h-6 text-blue-600"}),(0,r.jsxs)("h3",{className:"text-lg font-semibold",children:["Formulaire PWGSC-TPSGC 1111 - Page ",l,"/2"]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("button",{onClick:()=>d(1===l?2:1),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:1===l?"Page 2":"Page 1"}),(0,r.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600",children:"✕"})]})]}),(0,r.jsx)("div",{className:"flex-1 p-6 overflow-auto",children:(0,r.jsxs)("div",{className:"bg-white p-6 text-sm",children:[(0,r.jsxs)("div",{className:"text-center mb-4",children:[(0,r.jsx)("h2",{className:"text-lg font-bold",children:"PROGRESSIVE PAYMENT CLAIM"}),(0,r.jsx)("h3",{className:"text-lg font-bold",children:"DEMANDE DE PAIEMENT PROGRESSIF"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Contract No./N\xb0 de contrat:"}),(0,r.jsx)("input",{type:"text",value:s.contractNumber,onChange:e=>m("contractNumber",e.target.value),className:"ml-2 border border-gray-300 rounded px-2 py-1"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Contractor/Entrepreneur:"}),(0,r.jsx)("input",{type:"text",value:s.contractorName,onChange:e=>m("contractorName",e.target.value),className:"ml-2 border border-gray-300 rounded px-2 py-1"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Total Amount Claim/Montant total demand\xe9:"}),(0,r.jsxs)("span",{className:"ml-2 font-bold",children:["$",s.totalAmountClaim.toLocaleString("en-CA",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]})}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border-t bg-gray-50",children:[(0,r.jsx)("span",{children:"Formulaire PWGSC-TPSGC 1111 - Demande de paiement progressif"}),(0,r.jsxs)("div",{className:"space-x-3",children:[(0,r.jsx)("button",{onClick:a,className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"Fermer"}),(0,r.jsx)("button",{onClick:()=>{i(s),a()},className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"Sauvegarder"})]})]})]})})}var q=a(5159);function Z(){var e;let{documents:t,updateDocument:a,isDocumentAccessible:i,getDocumentById:c,resetAllDocuments:s}=(0,q.s)(),[o,l]=(0,n.useState)(null),[d,m]=(0,n.useState)(!1),[p,u]=(0,n.useState)(!1),[x,g]=(0,n.useState)(null),[b,h]=(0,n.useState)(!1),[C,N]=(0,n.useState)({name:"",status:"en_cours"}),[y,j]=(0,n.useState)([]),[f,T]=(0,n.useState)(!1);n.useEffect(()=>{j(JSON.parse(localStorage.getItem("oceanfactory_montages")||"[]"))},[]);let R=e=>{confirm('\xcates-vous s\xfbr de vouloir charger le montage "'.concat(e.name,'" ? Les donn\xe9es actuelles seront perdues.'))&&(e.documents.forEach(e=>{a(e.id,e)}),T(!1),alert('Montage "'.concat(e.name,'" charg\xe9 avec succ\xe8s !')))},F=(e,t)=>{if(confirm('\xcates-vous s\xfbr de vouloir supprimer le montage "'.concat(t,'" ?'))){let a=y.filter((t,a)=>a!==e);j(a),localStorage.setItem("oceanfactory_montages",JSON.stringify(a)),alert('Montage "'.concat(t,'" supprim\xe9 !'))}},v=(e,t)=>{a(e,{fichier:t,statut:"complete",previewData:URL.createObjectURL(t)})},w=e=>{let t=c(e);if(!t||!i(t.ordre)){alert("Ce document ne peut pas \xeatre rempli pour le moment. Veuillez compl\xe9ter les documents pr\xe9c\xe9dents d'abord.");return}"payment-claim"===e?m(!0):"formulaire-1111"===e?u(!0):l(e)},A=e=>{switch(e){case"complete":return(0,r.jsx)(L.Z,{className:"w-5 h-5 text-green-500"});case"en_cours":return(0,r.jsx)(k.Z,{className:"w-5 h-5 text-yellow-500"});default:return(0,r.jsx)(k.Z,{className:"w-5 h-5 text-red-500"})}},E=e=>{switch(e){case"complete":return"Compl\xe9t\xe9";case"en_cours":return"En cours";default:return"\xc0 faire"}},M=e=>{switch(e){case"complete":return"bg-green-50 border-green-200";case"en_cours":return"bg-yellow-50 border-yellow-200";default:return"bg-red-50 border-red-200"}},S=()=>Math.round(t.filter(e=>"complete"===e.statut).length/t.length*100);return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Progression du Montage"}),(0,r.jsxs)("span",{className:"text-2xl font-bold text-purple-600",children:[S(),"%"]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,r.jsx)("div",{className:"bg-purple-600 h-3 rounded-full transition-all duration-300",style:{width:"".concat(S(),"%")}})}),(0,r.jsxs)("div",{className:"mt-3 text-sm text-gray-600",children:[t.filter(e=>"complete"===e.statut).length," sur ",t.length," documents compl\xe9t\xe9s"]})]}),(0,r.jsx)("div",{className:"grid gap-4",children:t.map(e=>{let t=i(e.ordre);return(0,r.jsx)("div",{className:"p-6 rounded-lg border-2 transition-all ".concat(t?M(e.statut):"border-gray-300 bg-gray-50"),children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"p-3 bg-white rounded-lg shadow-sm",children:t?"formulaire"===e.type?(0,r.jsx)(O.Z,{className:"w-8 h-8 text-purple-600"}):(0,r.jsx)(I.Z,{className:"w-8 h-8 text-blue-600"}):(0,r.jsx)(U.Z,{className:"w-8 h-8 text-gray-400"})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"bg-purple-100 text-purple-800 text-xs font-semibold px-2 py-1 rounded",children:e.ordre}),(0,r.jsx)("h4",{className:"text-lg font-semibold ".concat(t?"text-gray-900":"text-gray-500"),children:e.nom})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[A(e.statut),(0,r.jsx)("span",{className:"text-sm font-medium",children:t?E(e.statut):"Bloqu\xe9 - Terminez les documents pr\xe9c\xe9dents"})]}),e.fichier&&(0,r.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Fichier: ",e.fichier.name]})]})]}),(0,r.jsxs)("div",{className:"flex space-x-3",children:["complete"===e.statut&&e.previewData&&(0,r.jsxs)("button",{onClick:()=>g(e.id),className:"px-3 py-2 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 transition-colors flex items-center space-x-2",children:[(0,r.jsx)(D.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:"Aper\xe7u"})]}),t&&(0,r.jsx)(r.Fragment,{children:"formulaire"===e.type?(0,r.jsx)("button",{onClick:()=>w(e.id),className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors",children:"complete"===e.statut?"Modifier":"Remplir"}):(0,r.jsx)("div",{className:"relative",children:(0,r.jsxs)("label",{htmlFor:"file-".concat(e.id),className:"block",children:[(0,r.jsx)("input",{id:"file-".concat(e.id),type:"file",onChange:t=>{var a;let r=null===(a=t.target.files)||void 0===a?void 0:a[0];r&&v(e.id,r)},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.txt","aria-label":"Importer un fichier pour ".concat(e.nom)}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors cursor-pointer",children:[(0,r.jsx)(B.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"Importer"})]})]})})})]})]})},e.id)})}),(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Actions"}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,r.jsx)("button",{onClick:()=>{confirm("\xcates-vous s\xfbr de vouloir cr\xe9er un nouveau montage ? Toutes les donn\xe9es actuelles seront perdues.")&&(s(),l(null),g(null),alert("Nouveau montage cr\xe9\xe9 avec succ\xe8s !"))},className:"px-6 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Nouveau montage"}),(0,r.jsx)("button",{onClick:()=>{let e=S();N({name:"Montage_".concat(new Date().toLocaleDateString("fr-CA")),status:100===e?"acheve":"en_cours"}),h(!0)},className:"px-6 py-3 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 transition-colors",children:"Sauvegarder"}),(0,r.jsxs)("button",{onClick:()=>T(!0),className:"px-6 py-3 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors",children:["Charger un montage (",y.length,")"]}),(0,r.jsx)("button",{disabled:100>S(),className:"px-6 py-3 rounded-md font-medium transition-colors ".concat(100===S()?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:"Valider le Montage Complet"}),(0,r.jsx)("button",{className:"px-6 py-3 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors",onClick:()=>{console.log("Documents compl\xe9t\xe9s:",t.filter(e=>"complete"===e.statut))},children:"Exporter la Liste"})]})]}),(0,r.jsx)($,{isOpen:d,onClose:()=>m(!1),onSave:e=>{a("payment-claim",{contenu:e,statut:"complete",previewData:"Payment Claim Form compl\xe9t\xe9"}),m(!1)}}),(0,r.jsx)(W,{isOpen:p,onClose:()=>u(!1),onSave:e=>{a("formulaire-1111",{contenu:e,statut:"complete",previewData:"Formulaire PWGSC-1111 compl\xe9t\xe9"}),u(!1)}}),x&&(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold",children:["Aper\xe7u - ",null===(e=c(x))||void 0===e?void 0:e.nom]}),(0,r.jsx)("button",{onClick:()=>g(null),className:"text-gray-400 hover:text-gray-600",children:"✕"})]})}),(0,r.jsx)("div",{className:"p-6",children:(()=>{let e=c(x);if(!e)return null;if("formulaire"===e.type)return(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)(L.Z,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),(0,r.jsx)("h4",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Formulaire Compl\xe9t\xe9"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:e.previewData}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Ce formulaire a \xe9t\xe9 rempli et valid\xe9 avec succ\xe8s."})]});if(e.fichier){let t=e.previewData;return e.fichier.type.startsWith("image/")?(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("img",{src:t,alt:e.nom,className:"max-w-full max-h-96 mx-auto rounded-lg shadow-lg"}),(0,r.jsxs)("p",{className:"mt-4 text-sm text-gray-600",children:["Fichier: ",e.fichier.name]})]}):(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)(O.Z,{className:"w-16 h-16 text-blue-500 mx-auto mb-4"}),(0,r.jsx)("h4",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Document Import\xe9"}),(0,r.jsxs)("p",{className:"text-gray-600 mb-4",children:["Nom du fichier: ",e.fichier.name]}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 mb-4",children:["Type: ",e.fichier.type||"Type de fichier non d\xe9termin\xe9"]}),(0,r.jsxs)("a",{href:t,download:e.fichier.name,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[(0,r.jsx)(B.Z,{className:"w-4 h-4 mr-2"}),"T\xe9l\xe9charger le fichier"]})]})}return(0,r.jsx)("div",{className:"text-center py-8",children:(0,r.jsx)("p",{className:"text-gray-500",children:"Aucun aper\xe7u disponible"})})})()})]})}),b&&(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-end justify-center bg-black bg-opacity-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-t-lg shadow-xl w-full max-w-2xl mx-4 animate-slide-up",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Sauvegarder le montage"}),(0,r.jsx)("button",{onClick:()=>h(!1),className:"text-gray-400 hover:text-gray-600",children:"✕"})]})}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"saveName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom du montage"}),(0,r.jsx)("input",{id:"saveName",type:"text",value:C.name,onChange:e=>N(t=>({...t,name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-purple-500 focus:border-purple-500",placeholder:"Nom du montage..."})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Statut du montage"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"radio",name:"status",value:"en_cours",checked:"en_cours"===C.status,onChange:e=>N(t=>({...t,status:e.target.value})),className:"mr-2"}),(0,r.jsx)("span",{className:"text-yellow-600 font-medium",children:"En cours"}),(0,r.jsx)("span",{className:"text-sm text-gray-500 ml-2",children:"- Montage non termin\xe9, peut \xeatre poursuivi plus tard"})]}),(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"radio",name:"status",value:"acheve",checked:"acheve"===C.status,onChange:e=>N(t=>({...t,status:e.target.value})),className:"mr-2",disabled:100>S()}),(0,r.jsx)("span",{className:"font-medium ".concat(100===S()?"text-green-600":"text-gray-400"),children:"Achev\xe9"}),(0,r.jsx)("span",{className:"text-sm text-gray-500 ml-2",children:"- Montage compl\xe9t\xe9 (disponible uniquement si tous les documents sont compl\xe9t\xe9s)"})]})]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Aper\xe7u de la sauvegarde"}),(0,r.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Progression:"})," ",S(),"% (",t.filter(e=>"complete"===e.statut).length,"/",t.length," documents)"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Date:"})," ",new Date().toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]}),(0,r.jsx)("p",{children:(0,r.jsx)("strong",{children:"Documents compl\xe9t\xe9s:"})}),(0,r.jsx)("ul",{className:"ml-4",children:t.filter(e=>"complete"===e.statut).map(e=>(0,r.jsxs)("li",{className:"text-green-600",children:["• ",e.nom]},e.id))})]})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,r.jsx)("button",{onClick:()=>h(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Annuler"}),(0,r.jsx)("button",{onClick:()=>{let e={name:C.name,status:C.status,documents:t,savedAt:new Date().toISOString(),completion:S()},a=JSON.parse(localStorage.getItem("oceanfactory_montages")||"[]");a.push(e),localStorage.setItem("oceanfactory_montages",JSON.stringify(a)),j(a),h(!1),alert('Montage "'.concat(C.name,'" sauvegard\xe9 avec succ\xe8s !'))},className:"px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700",children:"Sauvegarder"})]})]})]})}),f&&(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["Montages sauvegard\xe9s (",y.length,")"]}),(0,r.jsx)("button",{onClick:()=>T(!1),className:"text-gray-400 hover:text-gray-600",children:"✕"})]})}),(0,r.jsx)("div",{className:"p-6",children:0===y.length?(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(O.Z,{className:"w-8 h-8 text-gray-400"})}),(0,r.jsx)("p",{className:"text-gray-500 text-lg mb-2",children:"Aucun montage sauvegard\xe9"}),(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:"Cr\xe9ez et sauvegardez un montage pour le voir appara\xeetre ici."})]}):(0,r.jsx)("div",{className:"space-y-4",children:y.map((e,t)=>(0,r.jsx)("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold text-gray-900",children:e.name}),(0,r.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full ".concat("acheve"===e.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:"acheve"===e.status?"Achev\xe9":"En cours"})]}),(0,r.jsxs)("div",{className:"mt-2 text-sm text-gray-600 space-y-1",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Progression:"})," ",e.completion,"% (",e.documents.filter(e=>"complete"===e.statut).length,"/",e.documents.length," documents)"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Sauvegard\xe9 le:"})," ",new Date(e.savedAt).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-1 mt-2",children:e.documents.filter(e=>"complete"===e.statut).map(e=>(0,r.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs rounded",children:e.nom},e.id))})]})]}),(0,r.jsxs)("div",{className:"flex space-x-2 ml-4",children:[(0,r.jsx)("button",{onClick:()=>R(e),className:"px-3 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors text-sm",children:"Charger"}),(0,r.jsx)("button",{onClick:()=>F(t,e.name),className:"px-3 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors text-sm",children:"Supprimer"})]})]})},t))})})]})})]})}var V=a(9519),z=a(7282),Y=a(2339),K=a(7501),Q=a(1173),X=a.n(Q);function ee(){var e;let{documents:t,isAllDocumentsComplete:a,getDocumentById:i}=(0,q.s)(),[c,s]=(0,n.useState)(!1),[o,l]=(0,n.useState)(null),d=(0,n.useRef)(null),m=(0,n.useRef)(null),p=async()=>{if(!a()){alert("Tous les documents doivent \xeatre compl\xe9t\xe9s avant de g\xe9n\xe9rer le PDF.");return}s(!0);try{let e=new K.ZP("p","mm","a4"),a=e.internal.pageSize.getWidth();if(e.internal.pageSize.getHeight(),d.current){d.current.style.display="block";let t=await X()(d.current,{scale:2,useCORS:!0,allowTaint:!0}),r=t.toDataURL("image/png"),n=a-20,i=t.height*n/t.width;e.addImage(r,"PNG",10,10,n,i),d.current.style.display="none"}if(e.addPage(),m.current){m.current.style.display="block";let t=await X()(m.current,{scale:2,useCORS:!0,allowTaint:!0}),r=t.toDataURL("image/png"),n=a-20,i=t.height*n/t.width;e.addImage(r,"PNG",10,10,n,i),m.current.style.display="none"}for(let a of t.filter(e=>"complete"!==e.statut&&"formulaire"!==e.type))e.addPage(),e.setFontSize(20),e.text("".concat(a.ordre,". ").concat(a.nom),20,30),e.setFontSize(12),e.text("Document \xe0 ins\xe9rer lors de la finalisation",20,50),e.text("Ce document sera ajout\xe9 automatiquement",20,65),e.text("lorsque les donn\xe9es seront disponibles.",20,80);let r="Ocean_Factory_Compilation_".concat(new Date().toISOString().split("T")[0],".pdf");e.save(r)}catch(e){console.error("Erreur lors de la g\xe9n\xe9ration du PDF:",e),alert("Erreur lors de la g\xe9n\xe9ration du PDF")}finally{s(!1)}},u=e=>{switch(e){case"complete":return(0,r.jsx)(L.Z,{className:"w-5 h-5 text-green-500"});case"en_cours":return(0,r.jsx)("div",{className:"w-5 h-5 rounded-full bg-yellow-300"});default:return(0,r.jsx)(V.Z,{className:"w-5 h-5 text-red-500"})}},x=e=>{switch(e){case"complete":return"Disponible";case"en_cours":return"En cours";default:return"Manquant"}};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"bg-white p-8 rounded-lg border border-gray-200",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(z.Z,{className:"w-8 h-8 text-purple-600"})}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Compilation des Documents"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"Compilation automatique de tous les documents du montage en un PDF final"})]}),(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900 mb-4",children:"Documents \xe0 compiler :"}),(0,r.jsx)("div",{className:"space-y-3",children:t.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white rounded border",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)("span",{className:"text-sm font-medium text-gray-500",children:[e.ordre,"."]}),u(e.statut),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.nom})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("span",{className:"text-xs px-2 py-1 rounded ".concat("complete"===e.statut?"bg-green-100 text-green-800":"en_cours"===e.statut?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:x(e.statut)}),"complete"===e.statut&&e.previewData&&(0,r.jsxs)("button",{onClick:()=>l(e.id),className:"px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs hover:bg-blue-200 transition-colors flex items-center space-x-1",children:[(0,r.jsx)(D.Z,{className:"w-3 h-3"}),(0,r.jsx)("span",{children:"Aper\xe7u"})]})]})]},e.id))})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("button",{onClick:p,disabled:c||!a(),className:"flex items-center space-x-2 mx-auto px-6 py-3 rounded-md font-medium transition-colors ".concat(c||!a()?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-purple-600 text-white hover:bg-purple-700"),children:[(0,r.jsx)(Y.Z,{className:"w-5 h-5"}),(0,r.jsx)("span",{children:c?"G\xe9n\xe9ration en cours...":a()?"G\xe9n\xe9rer et T\xe9l\xe9charger le PDF":"En attente des documents manquants"})]}),!a()&&(0,r.jsx)("p",{className:"mt-2 text-sm text-orange-600",children:"Tous les documents doivent \xeatre compl\xe9t\xe9s dans Montage avant de pouvoir g\xe9n\xe9rer le PDF."})]})]})}),o&&(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold",children:["Aper\xe7u - ",null===(e=i(o))||void 0===e?void 0:e.nom]}),(0,r.jsx)("button",{onClick:()=>l(null),className:"text-gray-400 hover:text-gray-600",children:"✕"})]})}),(0,r.jsx)("div",{className:"p-6",children:(()=>{let e=i(o);if(!e)return null;if("formulaire"===e.type)return(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)(L.Z,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),(0,r.jsx)("h4",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Formulaire Pr\xeat pour Compilation"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:e.previewData}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Ce formulaire sera inclus dans le PDF final."})]});if(e.fichier){let t=e.previewData;return e.fichier.type.startsWith("image/")?(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("img",{src:t,alt:e.nom,className:"max-w-full max-h-96 mx-auto rounded-lg shadow-lg"}),(0,r.jsxs)("p",{className:"mt-4 text-sm text-gray-600",children:["Fichier: ",e.fichier.name]})]}):(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)(z.Z,{className:"w-16 h-16 text-blue-500 mx-auto mb-4"}),(0,r.jsx)("h4",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Document Pr\xeat pour Compilation"}),(0,r.jsxs)("p",{className:"text-gray-600 mb-4",children:["Nom du fichier: ",e.fichier.name]}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Ce document sera inclus dans le PDF final."})]})}return(0,r.jsx)("div",{className:"text-center py-8",children:(0,r.jsx)("p",{className:"text-gray-500",children:"Aucun aper\xe7u disponible"})})})()})]})}),(0,r.jsxs)("div",{style:{position:"absolute",left:"-9999px",top:"-9999px"},children:[(0,r.jsx)("div",{ref:d,style:{display:"none",width:"210mm",backgroundColor:"white"},children:(0,r.jsx)(W,{isOpen:!0,onClose:()=>{},onSave:()=>{}})}),(0,r.jsx)("div",{ref:m,style:{display:"none",width:"210mm",backgroundColor:"white"},children:(0,r.jsx)($,{isOpen:!0,onClose:()=>{},onSave:()=>{}})})]})]})}function et(){let[e,t]=(0,n.useState)("montage");return(0,r.jsxs)("div",{className:"h-full",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Gestion des Proc\xe9dures"}),(0,r.jsx)("p",{className:"text-gray-600",children:"G\xe9rez le montage, la compilation des fichiers et les r\xe9clamations de paiement"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md mb-6",children:[(0,r.jsx)("div",{className:"border-b",children:(0,r.jsxs)("nav",{className:"flex space-x-8 px-6","aria-label":"Sub-tabs",children:[(0,r.jsx)("button",{onClick:()=>t("montage"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("montage"===e?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Montage"}),(0,r.jsx)("button",{onClick:()=>t("compilation"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("compilation"===e?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Compilation"})]})}),(0,r.jsxs)("div",{className:"p-6",children:["montage"===e&&(0,r.jsx)(Z,{}),"compilation"===e&&(0,r.jsx)(ee,{})]})]})]})}function ea(){let e=(0,i.useSearchParams)(),t=(0,i.useRouter)(),[a,s]=(0,n.useState)("details"),[o,l]=(0,n.useState)("milestones"),[d,m]=(0,n.useState)(null),[p,u]=(0,n.useState)(null),x=(0,n.useRef)(null);return(0,n.useEffect)(()=>{let t=e.get("tab"),a=e.get("subTab"),r=e.get("highlight");t&&s(t),a&&l(a),r&&(u(r),setTimeout(()=>u(null),3e3))},[e]),(0,n.useEffect)(()=>{let e=e=>{let{type:t,id:a,name:r}=e.detail;m({type:t,id:a,name:r}),s("documents")};return window.addEventListener("openDocumentFolder",e),()=>window.removeEventListener("openDocumentFolder",e)},[]),(0,r.jsxs)("div",{className:"min-h-screen w-full p-4",children:[(0,r.jsx)("div",{className:"bg-ocean-blue text-white p-6 rounded-lg mb-6 shadow-lg",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:"Ocean Factory"}),(0,r.jsx)("p",{className:"text-blue-100 mt-2",children:"Syst\xe8me de Gestion de Facturation"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)("button",{onClick:()=>{try{let e={milestones:localStorage.getItem("milestones")||"[]",dcr:localStorage.getItem("dcr")||"[]",billingBeforeTax:localStorage.getItem("billingBeforeTax")||"[]",billingWithTax:localStorage.getItem("billingWithTax")||"[]",documents:localStorage.getItem("documents")||"[]",procedures:localStorage.getItem("procedures")||"[]",formData:localStorage.getItem("formData")||"{}",timestamp:new Date().toISOString(),version:"1.0"},t=JSON.stringify(e,null,2),a=new Blob([t],{type:"application/json"}),r=URL.createObjectURL(a),n=document.createElement("a");n.href=r,n.download="ocean-factory-backup-".concat(new Date().toISOString().split("T")[0],".json"),document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(r),alert("✅ Base de donn\xe9es sauvegard\xe9e avec succ\xe8s!")}catch(e){console.error("Erreur lors de la sauvegarde:",e),alert("❌ Erreur lors de la sauvegarde de la base de donn\xe9es")}},className:"flex items-center space-x-2 bg-green-600 hover:bg-green-700 px-4 py-2 rounded-lg transition-colors duration-200 font-medium",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3-3m0 0l-3 3m3-3v12"})}),(0,r.jsx)("span",{children:"SAUVEGARDER"})]}),(0,r.jsxs)("button",{onClick:()=>{let e=document.createElement("input");e.type="file",e.accept=".json",e.onchange=e=>{let t=e.target.files[0];if(t){let e=new FileReader;e.onload=e=>{try{let t=JSON.parse(e.target.result);t.version&&t.timestamp?(Object.keys(t).forEach(e=>{if("timestamp"!==e&&"version"!==e){let a="string"==typeof t[e]?t[e]:JSON.stringify(t[e]);localStorage.setItem(e,a)}}),alert("✅ Base de donn\xe9es restaur\xe9e avec succ\xe8s!\nSauvegarde du: ".concat(new Date(t.timestamp).toLocaleString("fr-FR"))),window.location.reload()):alert("❌ Fichier de sauvegarde invalide")}catch(e){console.error("Erreur lors de la restauration:",e),alert("❌ Erreur lors de la restauration de la base de donn\xe9es")}},e.readAsText(t)}},e.click()},className:"flex items-center space-x-2 bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg transition-colors duration-200 font-medium",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),(0,r.jsx)("span",{children:"RESTAURER"})]}),(0,r.jsxs)("button",{onClick:()=>t.push("/welcome"),className:"flex items-center space-x-2 bg-white/10 hover:bg-white/20 px-4 py-2 rounded-lg transition-colors duration-200",children:[(0,r.jsx)(c.Z,{className:"w-5 h-5"}),(0,r.jsx)("span",{children:"Accueil"})]})]})]})}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-md mb-6",children:[(0,r.jsx)("div",{className:"border-b",children:(0,r.jsxs)("nav",{className:"flex space-x-8 px-6","aria-label":"Tabs",children:[(0,r.jsx)("button",{onClick:()=>s("details"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("details"===a?"border-ocean-blue text-ocean-blue":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"D\xe9tails Amendment"}),(0,r.jsx)("button",{onClick:()=>s("calcul"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("calcul"===a?"border-ocean-blue text-ocean-blue":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Registres"}),(0,r.jsx)("button",{onClick:()=>s("documents"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("documents"===a?"border-ocean-blue text-ocean-blue":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Archives"}),(0,r.jsx)("button",{onClick:()=>s("procedure"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("procedure"===a?"border-ocean-blue text-ocean-blue":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Proc\xe9dure"})]})}),(0,r.jsxs)("div",{className:"p-6",children:["details"===a&&(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold mb-6",children:"D\xe9tails Amendment"}),(0,r.jsxs)("div",{className:"flex space-x-4 mb-6",children:[(0,r.jsx)("button",{onClick:()=>l("milestones"),className:"px-4 py-2 rounded-md transition-colors ".concat("milestones"===o?"bg-ocean-light text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Milestones Details"}),(0,r.jsx)("button",{onClick:()=>l("dcr"),className:"px-4 py-2 rounded-md transition-colors ".concat("dcr"===o?"bg-orange-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"DCR Details"})]}),"milestones"===o&&(0,r.jsx)(N,{}),"dcr"===o&&(0,r.jsx)(T,{})]}),"calcul"===a&&(0,r.jsx)("div",{children:(0,r.jsx)(F,{})}),"documents"===a&&(0,r.jsx)("div",{children:(0,r.jsx)(J,{ref:x,selectedFolder:d,onFolderChange:m})}),"procedure"===a&&(0,r.jsx)("div",{children:(0,r.jsx)(et,{})})]})]}),(0,r.jsx)("div",{className:"text-center text-gray-500 text-sm",children:(0,r.jsx)("p",{children:"\xa9 2024 Ocean Factory - Syst\xe8me de Facturation v1.0.0"})})]})}function er(){return(0,r.jsx)(n.Suspense,{fallback:(0,r.jsx)("div",{children:"Chargement..."}),children:(0,r.jsx)(ea,{})})}},409:function(e,t,a){"use strict";a.d(t,{AppProvider:function(){return s},b:function(){return o}});var r=a(7437),n=a(2265),i=a(5159);let c=(0,n.createContext)(void 0);function s(e){let{children:t}=e,[a,s]=(0,n.useState)([]),[o,l]=(0,n.useState)([]),[d,m]=(0,n.useState)([]),p=(e,t)=>{m([...e.map(e=>({id:"milestone-".concat(e.id),nom:"".concat(e.numeroEtape," - ").concat(e.description),type:"milestone",referenceId:e.id,documents:[]})),...t.map(e=>({id:"dcr-".concat(e.id),nom:"".concat(e.numeroEtape," - ").concat(e.description),type:"dcr",referenceId:e.id,documents:[]}))])};return(0,n.useEffect)(()=>{(a.length>0||o.length>0)&&p(a,o)},[a,o]),(0,r.jsx)(c.Provider,{value:{milestones:a,dcrs:o,folders:d,setMilestones:s,setDcrs:l,setFolders:m,addMilestone:e=>{s(t=>[...t,e])},addDCR:e=>{l(t=>[...t,e])},updateMilestone:(e,t)=>{s(a=>a.map(a=>a.id===e?{...a,...t}:a))},updateDCR:(e,t)=>{l(a=>a.map(a=>a.id===e?{...a,...t}:a))},addDocumentToFolder:(e,t)=>{m(a=>a.map(a=>a.id===e?{...a,documents:[...a.documents,t]}:a))},removeDocumentFromFolder:(e,t)=>{m(a=>a.map(a=>a.id===e?{...a,documents:a.documents.filter(e=>e.id!==t)}:a))},getDocumentsForItem:(e,t)=>{let a="".concat(e,"-").concat(t),r=d.find(e=>e.id===a);return r?r.documents:[]}},children:(0,r.jsx)(i.C,{children:t})})}function o(){let e=(0,n.useContext)(c);if(void 0===e)throw Error("useAppContext must be used within an AppProvider");return e}},5159:function(e,t,a){"use strict";a.d(t,{C:function(){return s},s:function(){return o}});var r=a(7437),n=a(2265);let i=(0,n.createContext)(void 0),c=[{id:"formulaire-1111",nom:"Formulaire 1111",type:"formulaire",statut:"vide",ordre:1},{id:"payment-claim",nom:"Payment Claim",type:"formulaire",statut:"vide",ordre:2},{id:"facture-sap",nom:"Facture SAP",type:"import",statut:"vide",ordre:3},{id:"courriel-client",nom:"Courriel de confirmation du client",type:"import",statut:"vide",ordre:4},{id:"documents-annexes",nom:"Documents annexes",type:"import",statut:"vide",ordre:5}];function s(e){let{children:t}=e,[a,s]=(0,n.useState)(c);return(0,r.jsx)(i.Provider,{value:{documents:a,updateDocument:(e,t)=>{s(a=>a.map(a=>a.id===e?{...a,...t}:a))},getNextAvailableDocument:()=>a.find(e=>"vide"===e.statut)||null,isDocumentAccessible:e=>1===e||a.filter(t=>t.ordre<e).every(e=>"complete"===e.statut),isAllDocumentsComplete:()=>a.every(e=>"complete"===e.statut),getDocumentById:e=>a.find(t=>t.id===e),resetAllDocuments:()=>{s(c.map(e=>({...e,statut:"vide",fichier:null,contenu:void 0,previewData:void 0})))}},children:t})}function o(){let e=(0,n.useContext)(i);if(void 0===e)throw Error("useDocuments must be used within a DocumentsProvider");return e}},1765:function(e,t,a){"use strict";a.d(t,{PriceSyncProvider:function(){return s},S:function(){return o}});var r=a(7437),n=a(2265);let i=(0,n.createContext)(void 0),c=[{id:"c228",name:"C-228 NLT1",milestones:[],dcrs:[],registers:[],formAmounts:[],taxRate:.15},{id:"c229",name:"C-229 NLT2",milestones:[],dcrs:[],registers:[],formAmounts:[],taxRate:.15},{id:"c230",name:"C-230 NLT3",milestones:[],dcrs:[],registers:[],formAmounts:[],taxRate:.15},{id:"c231",name:"C-231 NLT4",milestones:[],dcrs:[],registers:[],formAmounts:[],taxRate:.15}];function s(e){let{children:t}=e,[a,s]=(0,n.useState)(c),o=(e,t)=>e*(1+t),l=(e,t,a,r,n)=>{console.log("Synchronizing to registers: ".concat(e,", ").concat(t,", ").concat(a,", ").concat(r))},d=(e,t,a)=>{console.log("Removing from registers: ".concat(e,", ").concat(t,", ").concat(a))},m=(e,t,a)=>{console.log("Synchronizing to forms: ".concat(e,", ").concat(t))};return(0,r.jsx)(i.Provider,{value:{projects:a,updateMilestonePrice:(e,t,a)=>{s(r=>r.map(r=>{if(r.id!==e)return r;let n=r.milestones.map(e=>{if(e.id===t){let t={...e,prixUnitaireFerme:a,prixFermeTotal:a};return e.facture&&(l(r.id,"milestone",e.id,a,r.taxRate),m(r.id,a,r.taxRate)),t}return e});return{...r,milestones:n}}))},updateDCRPrice:(e,t,a)=>{s(r=>r.map(r=>{if(r.id!==e)return r;let n=r.dcrs.map(e=>{if(e.id===t){let t={...e,prixUnitaireFerme:a,prixFermeTotal:a};return e.facture&&(l(r.id,"dcr",e.id,a,r.taxRate),m(r.id,a,r.taxRate)),t}return e});return{...r,dcrs:n}}))},toggleMilestoneFacture:(e,t)=>{s(a=>a.map(a=>{if(a.id!==e)return a;let r=a.milestones.map(e=>{if(e.id===t){let t=!e.facture,r={...e,facture:t};return t?l(a.id,"milestone",e.id,e.prixUnitaireFerme,a.taxRate):d(a.id,"milestone",e.id),m(a.id,e.prixUnitaireFerme,a.taxRate),r}return e});return{...a,milestones:r}}))},toggleDCRFacture:(e,t)=>{s(a=>a.map(a=>{if(a.id!==e)return a;let r=a.dcrs.map(e=>{if(e.id===t){let t=!e.facture,r={...e,facture:t};return t?l(a.id,"dcr",e.id,e.prixUnitaireFerme,a.taxRate):d(a.id,"dcr",e.id),m(a.id,e.prixUnitaireFerme,a.taxRate),r}return e});return{...a,dcrs:r}}))},calculateTTC:o,getTotalsByProject:e=>{let t=a.find(t=>t.id===e);if(!t)return{totalMilestonesHT:0,totalMilestonesTTC:0,totalDCRsHT:0,totalDCRsTTC:0,totalFactureHT:0,totalFactureTTC:0,totalContractHT:0,totalContractTTC:0};let r=t.milestones.reduce((e,t)=>e+t.prixFermeTotal,0),n=t.dcrs.reduce((e,t)=>e+t.prixFermeTotal,0),i=t.milestones.filter(e=>e.facture).reduce((e,t)=>e+t.prixFermeTotal,0)+t.dcrs.filter(e=>e.facture).reduce((e,t)=>e+t.prixFermeTotal,0),c=r+n;return{totalMilestonesHT:r,totalMilestonesTTC:o(r,t.taxRate),totalDCRsHT:n,totalDCRsTTC:o(n,t.taxRate),totalFactureHT:i,totalFactureTTC:o(i,t.taxRate),totalContractHT:c,totalContractTTC:o(c,t.taxRate)}},getFormAmountsByProject:e=>{let t=a.find(t=>t.id===e);return(null==t?void 0:t.formAmounts)||[]}},children:t})}function o(){let e=(0,n.useContext)(i);if(void 0===e)throw Error("usePriceSync must be used within a PriceSyncProvider");return e}}},function(e){e.O(0,[125,505,337,668,971,23,744],function(){return e(e.s=678)}),_N_E=e.O()}]);